[{"id":"ae68be7369407e97","type":"tab","label":"Flow 1","disabled":false,"info":"","env":[]},{"id":"7dc69f87fffada86","type":"tab","label":"MODBUS","disabled":true,"info":"","env":[]},{"id":"eeab6ec5a969349e","type":"tab","label":"Initialize","disabled":true,"info":"","env":[]},{"id":"ee1ffeb6c3e4a06e","type":"tab","label":"Debug","disabled":true,"info":"","env":[]},{"id":"a23961c3c7ee5cb0","type":"tab","label":"R60 FINS Telegrams","disabled":true,"info":"","env":[]},{"id":"ed93ec1675e6852c","type":"tab","label":"R60 W-Registers","disabled":true,"info":"","env":[]},{"id":"5a9ed8a4a215d867","type":"tab","label":"R60 H- and DM-Registers","disabled":true,"info":"","env":[]},{"id":"8d86b2dca3baefc2","type":"tab","label":"R60 System variable","disabled":true,"info":"","env":[]},{"id":"e0cce675d65f673b","type":"tab","label":"R5","disabled":true,"info":"","env":[]},{"id":"b62bc327ee548edd","type":"tab","label":"R50 - Telegrams","disabled":true,"info":"","env":[]},{"id":"fa7a87223fda8b8c","type":"tab","label":"R50 - Dashboard","disabled":true,"info":"","env":[]},{"id":"e9b76b6839013e00","type":"tab","label":"IP Settings","disabled":true,"info":""},{"id":"d2dbc81a58b6f72c","type":"tab","label":"R60 Goto/Sweep","disabled":true,"info":"","env":[]},{"id":"1bf2db867fa90a88","type":"tab","label":"R60 - Reset","disabled":true,"info":"","env":[]},{"id":"7bf98e21ded32b47","type":"tab","label":"R60","disabled":true,"info":"","env":[]},{"id":"51bbad0878cd8966","type":"tab","label":"Watchdog","disabled":true,"info":"","env":[]},{"id":"9e702f4d4b057300","type":"subflow","name":"Lamp handler","info":"","category":"","in":[{"x":60,"y":100,"wires":[{"id":"f366c807b830ee4b"}]}],"out":[],"env":[],"meta":{},"color":"#C0DEFF","icon":"node-red/light.svg"},{"id":"e8c4dc311b342ba5","type":"subflow","name":"ElapsedTime","info":"","category":"","in":[{"x":80,"y":80,"wires":[{"id":"6dd0cdc2bd93e19f"}]}],"out":[],"env":[],"meta":{},"color":"#C0DEED","icon":"font-awesome/fa-clock-o"},{"id":"56baf3adbae499b7","type":"subflow","name":"Error flag handler FINS","info":"","category":"","in":[{"x":100,"y":120,"wires":[{"id":"30ce3e38bb43c1f7"}]}],"out":[{"x":360,"y":100,"wires":[{"id":"30ce3e38bb43c1f7","port":0}]}],"env":[],"meta":{},"color":"#DDAA99","status":{"x":360,"y":160,"wires":[{"id":"30ce3e38bb43c1f7","port":1}]}},{"id":"6bb57b6db6c2449d","type":"subflow","name":"MDC commands","info":"","category":"","in":[{"x":60,"y":80,"wires":[{"id":"150234e38c66fa3c"}]}],"out":[{"x":1100,"y":80,"wires":[{"id":"b39bf248b1d643f2","port":0}]}],"env":[],"meta":{},"color":"#3FADB5","icon":"font-awesome/fa-support"},{"id":"190714efd60a5f96","type":"subflow","name":"History Log","info":"","category":"","in":[{"x":60,"y":60,"wires":[{"id":"93e651aa6071da75"}]}],"out":[],"env":[],"meta":{"module":"History Log"},"color":"#87A980","inputLabels":["Data"],"icon":"font-awesome/fa-book","status":{"x":300,"y":100,"wires":[{"id":"93e651aa6071da75","port":1}]}},{"id":"0a9403866feacaca","type":"group","z":"ee1ffeb6c3e4a06e","name":"PORT A","style":{"label":true},"nodes":["58dac0c2e808168a","fd97b5a1b8cfa1e1","e052d0da63ec402c","05bd292adf536853","c749f9c6967f9523","60dc0bb92b1a30fa","a57db0b72bcd176f","5a5fe4f5f6008c60","60382c05bdd26059","28dce1198fca87d1","5e0393418181d200","b9ecfdc10ebc12f3","e49d1d8afa6fa4af","f01635e9896c5a0c"],"x":144,"y":179,"w":742,"h":382},{"id":"2bb4587f3c31e083","type":"group","z":"ee1ffeb6c3e4a06e","name":"PORT B","style":{"label":true},"nodes":["9280d41783147667","a67b16c0618f3cfe","1b58438f3dd3522e","24a1fc03bb527e8e","c9132ebe1b8b00f5","a11dce8131d4b638","0f41177995615e44","5a359a9a51ae0d39"],"x":144,"y":599,"w":563.1999816894531,"h":262},{"id":"4c5adf699c5575c8","type":"group","z":"ee1ffeb6c3e4a06e","name":"PORT C","style":{"label":true},"nodes":["12b2d6367b182885","d3aeaef2f3d50940","fcdef0359761460d","345619635c192b29","9970c7127a8ca108","258b1d2c1275987d","64cb4ff2fd3b3f6f","39b29c18ac8ef748","23e89fea9ffa3098","8dd009e6b3ecae80","1b12363157bd52bf","8f0861a6aef06add"],"x":144,"y":919,"w":622,"h":442},{"id":"d47e39f7ccb00e26","type":"group","z":"ee1ffeb6c3e4a06e","name":"PORT D","style":{"label":true},"nodes":["1e4af69e2c40f316","f35d4963c364b593","16d9f8c68251bc23","e49229445362b7e1","444b80d2759e8722","fb34a0c4cac8b70d"],"x":144,"y":1439,"w":602,"h":202},{"id":"bf211c3a96a53c94","type":"group","z":"1bf2db867fa90a88","name":"Drive to Vertical End Stop","style":{"label":true},"nodes":["085be12661d7b485","8ca34c79d9702964","7bdb9538db131314","a160791941aa8aa6","2a949cd2c4a18a98","15d3d9784dc286bc","0d76d7da04f1d219","1ee6780f9ee3a5f9"],"x":634,"y":319,"w":752,"h":222},{"id":"1b367e1c6e762837","type":"group","z":"1bf2db867fa90a88","name":"Reset Vertical Counter","style":{"label":true},"nodes":["31dab7b657757ae2","81d956aa84d8f23a","b6457177e5e2cb6c","0aa5f2b0dcfc5c62","64f749329ba140c9","6a702c1d534c56e3","dc2d0a9aacfe0c5d","38a9b0640c52b3db"],"x":634,"y":579,"w":772,"h":202},{"id":"9c116711da37882f","type":"group","z":"1bf2db867fa90a88","name":"Drive to Horizontal end Stop","style":{"label":true},"nodes":["aab91a42aee0211b","0204d67770ee94a9","ef48e913eda34001","d12c473c0d3b9762","1ceffebc9470b44d","c11ce10a8b29113a","a4b79894487aa1dc","d9fc80567eacb9e3"],"x":634,"y":1139,"w":732,"h":242},{"id":"b3faf7a5880f6195","type":"group","z":"1bf2db867fa90a88","name":"Reset Horizontal Counter","style":{"label":true},"nodes":["6a3a126537aab26c","bc43c369702c528e","749dcc3191ba2a8d","8bc19da847148d1b","758da18ab585440d","ad0aea1f48711b41","34c57ae98a1c6547","d6f9cfaef56beb34"],"x":634,"y":1399,"w":672,"h":202},{"id":"af908bacf1378db2","type":"group","z":"1bf2db867fa90a88","name":"Drive to Focus End Out","style":{"label":true},"nodes":["85c52af54aa1a6ea","33b506a6c1a7b45f","f5d6144c0c07013c","8d1ffb4fd6bf0180","4a17aa992ce34303","ece980fb1ab7e973","a7c91e46b0913bfb","e3bbf8a4a55d021c","d3a76658f7c0bee6","2667e535ac03fcfc"],"x":634,"y":2019,"w":732,"h":262},{"id":"7ae20847982ca1d3","type":"group","z":"1bf2db867fa90a88","name":"Drive to Focus End In","style":{"label":true},"nodes":["74a0ac2e72d8e615","38a998e78e93eeba","1f031c24ff1fd113","a641e7f58c0cbc43","8c9b79429770e2d4","1e0fd7d93ddee310","d90314293e7ff0e3","2beedbfeb4f2f53a","2d0bc4c2631406b5","b0739134a75ee4f0"],"x":634,"y":2299,"w":732,"h":262},{"id":"5ac5e6e38e0af80f","type":"group","z":"1bf2db867fa90a88","name":"Drive to Focus 50%","style":{"label":true},"nodes":["4be5940e88346c7e","5ed90eb1b70bd6f0","bef2bf962b240e0f","039507982c21ad7a","126e3b7b72df9204","aa02fa42cbf9f51c"],"x":634,"y":2579,"w":732,"h":242},{"id":"a6dda6644d170c83","type":"group","z":"1bf2db867fa90a88","name":"Drive to 0","style":{"label":true},"nodes":["78aa97310b307bdc","a765675e0b5acb00","3585ac7db134cd56","1df48fd17328b5ff","c9904abdf5614f9c","5c3e5c203ff08edb","9347d2e7d1c4d8d2","307d4ad1e94243bb","0f1d856e18d1302f","6dd1e32fecc428bd","d230dd178d7236f6","6465015e58c642e7"],"x":634,"y":799,"w":772,"h":322},{"id":"c1f6e3626f8d7626","type":"group","z":"1bf2db867fa90a88","name":"Goto 0","style":{"label":true},"nodes":["3c52eaf0b3466897","374433f255f01a65","0c8ef268adb45e2f","3a0e6ab56cfce0a2","403276ccaf0e8ff0","bc6a04d28790fd17","bfefb994801f08ac","395c29b5fd8075d8","5d0d34b6a4a5edcc","02b7d2c465a1fba8","f1ac2345f0efabad"],"x":634,"y":1639,"w":672,"h":362},{"id":"49fa3c13452e364d","type":"group","z":"d2dbc81a58b6f72c","name":"Goto x","style":{"label":true},"nodes":["4054cf89b419b0f4","23af03939537f319","61c5a95bce99d031","bb363c91075f0ba6","715ffcc4ea0f3d5c","67d5fb115392ea07","4b7e7c46b002910f","bcc94dcaf135b892","87e51857550d2499","830d5cdb1c43c7e4","b0fc30a2f928cd7a","54b94afb32cad43c","19f0705ab06b7a96","bcac5efc59b31124"],"x":114,"y":79,"w":792,"h":342},{"id":"b352b384e82cd839","type":"group","z":"d2dbc81a58b6f72c","name":"Sweep","style":{"label":true},"nodes":["d9e743664a04ac92","de4f91c407d1fc60","73a69804ee3ceb11","5201617e5993901a","aefdd6bbab165660","2ebde25686ed2cf0","0c8737b68d5f0476","64f7604383a3a9a3","0165ab3eba8146b0","d86143f5cc9ad61f","4cd2a9e73edc5b5f","3f1d876259dfbd13","3caa410f0e4f31cb","f947fb4d04013019","1d7fa8f567af5272","88801acca232782a","a4fd1790552f815f","39bbbdbfb4a48c58","028b768c4231a766","8b27ad56e07adcf3"],"x":114,"y":499,"w":1032,"h":462},{"id":"e099df4c892c2948","type":"junction","z":"e9b76b6839013e00","x":140,"y":280,"wires":[["1b8d8b533ccbdbc2","f47fea6fed756d74","ab8db9119b28e477"]]},{"id":"6f22240d6bfd8a8a","type":"modbus-client","name":"Serial Port","clienttype":"simpleser","bufferCommands":true,"stateLogEnabled":true,"queueLogEnabled":false,"failureLogEnabled":true,"tcpHost":"127.0.0.1","tcpPort":"502","tcpType":"DEFAULT","serialPort":"/dev/ttyS0","serialType":"RTU-BUFFERD","serialBaudrate":"115200","serialDatabits":"8","serialStopbits":"1","serialParity":"none","serialConnectionDelay":"100","serialAsciiResponseStartDelimiter":"0x3A","unit_id":1,"commandDelay":1,"clientTimeout":200,"reconnectOnTimeout":true,"reconnectTimeout":2000,"parallelUnitIdsAllowed":false,"showErrors":false,"showWarnings":true,"showLogs":true},{"id":"cef642f22a51c923","type":"ui_base","theme":{"name":"theme-custom","lightTheme":{"default":"#0094CE","baseColor":"#0094CE","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif","edited":true,"reset":false},"darkTheme":{"default":"#097479","baseColor":"#ffffff","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif","edited":true,"reset":false},"customTheme":{"name":"Sealight","default":"#4B7930","baseColor":"#fa8533","baseFont":"Verdana,Verdana,Geneva,sans-serif","reset":false},"themeState":{"base-color":{"default":"#4B7930","value":"#fa8533","edited":true},"page-titlebar-backgroundColor":{"value":"#45494e","edited":true},"page-backgroundColor":{"value":"#fafafa","edited":false},"page-sidebar-backgroundColor":{"value":"#fafafa","edited":true},"group-textColor":{"value":"#fcb27e","edited":false},"group-borderColor":{"value":"#ffffff","edited":false},"group-backgroundColor":{"value":"#ffffff","edited":false},"widget-textColor":{"value":"#45494e","edited":true},"widget-backgroundColor":{"value":"#fa8533","edited":false},"widget-borderColor":{"value":"#ffffff","edited":false},"base-font":{"value":"Verdana,Verdana,Geneva,sans-serif"}},"angularTheme":{"primary":"indigo","accents":"blue","warn":"red","background":"grey","palette":"light"}},"site":{"name":"Node-RED Dashboard","hideToolbar":"false","allowSwipe":"true","lockMenu":"false","allowTempTheme":"true","dateFormat":"DD/MM/YYYY","sizes":{"sx":48,"sy":48,"gx":6,"gy":6,"cx":6,"cy":0,"px":0,"py":0}}},{"id":"604edba14166b2c1","type":"ui_tab","name":"R50","icon":"settings_overscan","order":2,"disabled":false,"hidden":false},{"id":"4e193612bb93b4b6","type":"ui_tab","name":"Setup","icon":"http","order":3,"disabled":false,"hidden":false},{"id":"0b4853a8648656f8","type":"ui_tab","name":"R5","icon":"open_with","order":1,"disabled":false,"hidden":false},{"id":"09441f038503c9f1","type":"ui_tab","name":"Debug","icon":"dashboard","order":4,"disabled":false,"hidden":false},{"id":"e4e8b18f165aee49","type":"ui_tab","name":"R60 Registers","icon":"dashboard","order":1,"disabled":false,"hidden":false},{"id":"6b1cfed8797c4903","type":"ui_group","name":"Telegram 08","tab":"604edba14166b2c1","order":3,"disp":true,"width":"6","collapse":true,"className":""},{"id":"3c410cd6cbd2d8fc","type":"ui_group","name":"R5 Slave","tab":"0b4853a8648656f8","order":1,"disp":false,"width":"7","collapse":false,"className":""},{"id":"9e6176b8a64d7c2b","type":"ui_group","name":"Port D","tab":"09441f038503c9f1","order":6,"disp":true,"width":"6","collapse":true,"className":""},{"id":"d75f2020636d5da4","type":"ui_group","name":"IP Address","tab":"4e193612bb93b4b6","order":2,"disp":true,"width":"6","collapse":false,"className":""},{"id":"ef8e4c8ea11dd5c5","type":"ui_group","name":"Port A","tab":"09441f038503c9f1","order":3,"disp":true,"width":"6","collapse":true,"className":""},{"id":"19a069cf519cda5d","type":"ui_group","name":"Port B","tab":"09441f038503c9f1","order":4,"disp":true,"width":"6","collapse":true,"className":""},{"id":"064bb7e05824a058","type":"ui_group","name":"Port C","tab":"09441f038503c9f1","order":5,"disp":true,"width":"6","collapse":true,"className":""},{"id":"6f03721c41f2c6d6","type":"ui_group","name":"Analog","tab":"09441f038503c9f1","order":1,"disp":true,"width":"18","collapse":true,"className":""},{"id":"5ff70e0f4e7a65cc","type":"ui_group","name":"Feedback","tab":"09441f038503c9f1","order":2,"disp":true,"width":"6","collapse":true,"className":""},{"id":"dd3193ee6af1f484","type":"ui_group","name":"System Type","tab":"4e193612bb93b4b6","order":1,"disp":true,"width":"6","collapse":false,"className":""},{"id":"e0a73f75f46cdb55","type":"ui_group","name":"H-Registers","tab":"e4e8b18f165aee49","order":4,"disp":true,"width":"7","collapse":true,"className":""},{"id":"64bd2ca22f54aaef","type":"ui_group","name":"Physical input","tab":"e4e8b18f165aee49","order":1,"disp":true,"width":"5","collapse":true,"className":""},{"id":"de26d54e2520959c","type":"ui_group","name":"Physical Output","tab":"e4e8b18f165aee49","order":2,"disp":true,"width":"5","collapse":true,"className":""},{"id":"c55a857ecd1e4471","type":"ui_group","name":"W-Registers","tab":"e4e8b18f165aee49","order":5,"disp":true,"width":"6","collapse":true,"className":""},{"id":"41aa664489ca8367","type":"ui_group","name":"Ratio settings","tab":"4e193612bb93b4b6","order":3,"disp":true,"width":"6","collapse":true,"className":""},{"id":"c663dac55eb75a60","type":"ui_group","name":"Reset","tab":"4e193612bb93b4b6","order":4,"disp":true,"width":"6","collapse":false,"className":""},{"id":"165c3949f7f07547","type":"ui_group","name":"DM-Registers","tab":"e4e8b18f165aee49","order":5,"disp":true,"width":"7","collapse":true,"className":""},{"id":"04e42a9e17402047","type":"ui_group","name":"SW/FW info.","tab":"09441f038503c9f1","order":7,"disp":true,"width":"6","collapse":true,"className":""},{"id":"d0de459772c6d1d1","type":"ui_group","name":"Date and Time","tab":"4e193612bb93b4b6","order":5,"disp":true,"width":"6","collapse":false,"className":""},{"id":"b48630df5222cb9c","type":"ui_spacer","z":"7dc69f87fffada86","name":"spacer","group":"dd3193ee6af1f484","order":2,"width":"0","height":"0"},{"id":"415493b934e44a66","type":"ui_spacer","z":"7dc69f87fffada86","name":"spacer","group":"dd3193ee6af1f484","order":5,"width":"0","height":"0"},{"id":"c76880aa149b39ee","type":"ui_spacer","z":"ee1ffeb6c3e4a06e","name":"spacer","group":"6f03721c41f2c6d6","order":7,"width":"0","height":"0"},{"id":"58278f54b45791c3","type":"bit-config","name":"SLStatus","bits":[{"property":"lamp","length":1,"shift":0,"type":"boolean"},{"property":"endStopHorCW","length":1,"shift":1,"type":"boolean"},{"property":"endStopHorCCW","length":1,"shift":2,"type":"boolean"},{"property":"endStopVertCW","length":1,"shift":3,"type":"boolean"},{"property":"endStopVertCCW","length":1,"shift":4,"type":"boolean"},{"property":"endStopFocusOut","length":1,"shift":5,"type":"boolean"},{"property":"endStopFocusIn","length":1,"shift":6,"type":"number"},{"property":"alarm","length":1,"shift":7,"type":"boolean"},{"property":"focusDoubleCmd","length":1,"shift":15,"type":"boolean"}]},{"id":"6a635b6fe4cb76c7","type":"bit-config","name":"PortABits","bits":[{"property":"JS_Down","length":1,"shift":4,"type":"boolean"},{"property":"MDFocusFault","length":1,"shift":5,"type":"boolean"},{"property":"LampOnBtn","length":1,"shift":7,"type":"boolean"},{"property":"RlyLampOn","length":1,"shift":8,"type":"boolean"},{"property":"JS_Up","length":1,"shift":9,"type":"boolean"},{"property":"RlyStep","length":1,"shift":10,"type":"boolean"},{"property":"FocusEndOut","length":1,"shift":12,"type":"boolean"},{"property":"FocusEndIn","length":1,"shift":13,"type":"boolean"},{"property":"JS_Right","length":1,"shift":14,"type":"boolean"},{"property":"VertSpeedNeg","length":1,"shift":15,"type":"boolean"}]},{"id":"8cc1fb1e05e0f783","type":"bit-config","name":"PortBBits","bits":[{"property":"MD_FocusDir","length":1,"shift":1,"type":"boolean"},{"property":"MD_HorizEn","length":1,"shift":5,"type":"boolean"},{"property":"FocusInBtn","length":1,"shift":7,"type":"boolean"},{"property":"SS_Vert_A","length":1,"shift":9,"type":"boolean"},{"property":"PowerOKLed","length":1,"shift":13,"type":"boolean"},{"property":"U1DERE","length":1,"shift":14,"type":"boolean"}]},{"id":"fb9d13d3e2f609d7","type":"bit-config","name":"PortCBits","bits":[{"property":"SW1","length":4,"shift":0,"type":"number"},{"property":"SS_VERT_B","length":1,"shift":4,"type":"boolean"},{"property":"HorizSpeedNeg","length":1,"shift":5,"type":"boolean"},{"property":"MD_VERT_EN","length":1,"shift":6,"type":"boolean"},{"property":"MD_VERT_SF","length":1,"shift":7,"type":"boolean"},{"property":"MD_HORIZ_SF","length":1,"shift":8,"type":"boolean"},{"property":"FocusPlusBtn","length":1,"shift":10,"type":"boolean"},{"property":"JS_Left","length":1,"shift":11,"type":"boolean"},{"property":"HighTemp","length":1,"shift":13,"type":"boolean"},{"property":"VertSpeedPlusBtn","length":1,"shift":14,"type":"boolean"}]},{"id":"6e2f66967afc9efd","type":"bit-config","name":"PortDBits","bits":[{"property":"RlyIgniteOn","length":1,"shift":0,"type":"boolean"},{"property":"SS_HORIZ_A","length":1,"shift":2,"type":"boolean"},{"property":"HorizSpeedPlusBtn","length":1,"shift":3,"type":"boolean"},{"property":"SS_HORIZ_B","length":1,"shift":4,"type":"boolean"}]},{"id":"8e3f0b650d98dc09","type":"shared-state","name":"Horizontal_pos_act","lbl":"","tags":"","historyCount":"2","dataType":"num","boolType":"bool","boolStrTrue":"","boolStrFalse":"","precision":"2","numMin":"-360","numMax":"360","unit":"deg","saveInterval":"0"},{"id":"3c9cf2f8bc9a8795","type":"shared-state","name":"Vertical_pos_act","lbl":"","tags":"","historyCount":"2","dataType":"num","boolType":"bool","boolStrTrue":"","boolStrFalse":"","precision":"2","numMin":"-90","numMax":"90","unit":"deg","saveInterval":"0"},{"id":"f5321b6a2e1b0a9d","type":"shared-state","name":"SL","lbl":"","tags":"","historyCount":"2","dataType":"num","boolType":"bool","boolStrTrue":"","boolStrFalse":"","precision":"","numMin":"1","numMax":"9","unit":"","saveInterval":"0"},{"id":"93669d6727d608a6","type":"shared-state","name":"SystemType","lbl":"","tags":"","historyCount":"2","dataType":"str","boolType":"bool","boolStrTrue":"","boolStrFalse":"","precision":"","numMin":"","numMax":"","unit":"","saveInterval":"0"},{"id":"c5e1aff309299435","type":"shared-state","name":"Horizontal_speed","lbl":"","tags":"H254","historyCount":"2","dataType":"num","boolType":"bool","boolStrTrue":"","boolStrFalse":"","precision":"0","numMin":"10","numMax":"100","unit":"","saveInterval":"10000"},{"id":"2e7924d4a68ba534","type":"shared-state","name":"Vertical_speed","lbl":"","tags":"H256","historyCount":"2","dataType":"num","boolType":"bool","boolStrTrue":"","boolStrFalse":"","precision":"0","numMin":"10","numMax":"100","unit":"","saveInterval":"10000"},{"id":"20566e8d2d01e4d9","type":"shared-state","name":"H150","lbl":"","tags":"","historyCount":"2","dataType":"num","boolType":"bool","boolStrTrue":"","boolStrFalse":"","precision":"","numMin":"","numMax":"","unit":"","saveInterval":"1000"},{"id":"60e7eca22349521a","type":"shared-state","name":"H151_00","lbl":"","tags":"","historyCount":"2","dataType":"bool","boolType":"num","boolStrTrue":"","boolStrFalse":"","precision":"","numMin":"","numMax":"","unit":"","saveInterval":"0"},{"id":"80a99fcd0b3f68de","type":"shared-state","name":"H260","lbl":"","tags":"","historyCount":"2","dataType":"num","boolType":"bool","boolStrTrue":"","boolStrFalse":"","precision":"","numMin":"","numMax":"","unit":"","saveInterval":"1000"},{"id":"0d3f30c04a0f967b","type":"shared-state","name":"H261","lbl":"","tags":"","historyCount":"2","dataType":"num","boolType":"bool","boolStrTrue":"","boolStrFalse":"","precision":"","numMin":"10","numMax":"100","unit":"","saveInterval":"1000"},{"id":"9dfa40ef260d7df9","type":"shared-state","name":"H302","lbl":"","tags":"","historyCount":"2","dataType":"num","boolType":"bool","boolStrTrue":"","boolStrFalse":"","precision":"","numMin":"","numMax":"","unit":"","saveInterval":"1000"},{"id":"f72e7f578295d2fe","type":"shared-state","name":"H304","lbl":"","tags":"","historyCount":"2","dataType":"num","boolType":"bool","boolStrTrue":"","boolStrFalse":"","precision":"","numMin":"","numMax":"","unit":"","saveInterval":"1000"},{"id":"4e2990d3d3a0cfb1","type":"shared-state","name":"H306","lbl":"","tags":"","historyCount":"2","dataType":"num","boolType":"bool","boolStrTrue":"","boolStrFalse":"","precision":"","numMin":"","numMax":"","unit":"","saveInterval":"1000"},{"id":"9177b5255b1917d3","type":"shared-state","name":"H308","lbl":"","tags":"","historyCount":"2","dataType":"num","boolType":"bool","boolStrTrue":"","boolStrFalse":"","precision":"","numMin":"","numMax":"","unit":"","saveInterval":"1000"},{"id":"eba949b83245bc3a","type":"shared-state","name":"H310","lbl":"","tags":"","historyCount":"2","dataType":"num","boolType":"bool","boolStrTrue":"","boolStrFalse":"","precision":"","numMin":"","numMax":"","unit":"","saveInterval":"1000"},{"id":"f75ea206b4c80cd5","type":"shared-state","name":"H312","lbl":"","tags":"","historyCount":"2","dataType":"num","boolType":"bool","boolStrTrue":"","boolStrFalse":"","precision":"","numMin":"","numMax":"","unit":"","saveInterval":"1000"},{"id":"15c4f25ae9fb0ce6","type":"shared-state","name":"H314","lbl":"","tags":"","historyCount":"2","dataType":"num","boolType":"bool","boolStrTrue":"","boolStrFalse":"","precision":"","numMin":"","numMax":"","unit":"","saveInterval":"1000"},{"id":"0e07a621c7734422","type":"shared-state","name":"H316","lbl":"","tags":"","historyCount":"2","dataType":"num","boolType":"bool","boolStrTrue":"","boolStrFalse":"","precision":"","numMin":"","numMax":"","unit":"","saveInterval":"1000"},{"id":"f248fd28597ca4d9","type":"shared-state","name":"H318","lbl":"","tags":"","historyCount":"2","dataType":"num","boolType":"bool","boolStrTrue":"","boolStrFalse":"","precision":"","numMin":"","numMax":"","unit":"","saveInterval":"1000"},{"id":"c2667f8de0fa1871","type":"shared-state","name":"H320","lbl":"","tags":"","historyCount":"2","dataType":"num","boolType":"bool","boolStrTrue":"","boolStrFalse":"","precision":"","numMin":"","numMax":"","unit":"","saveInterval":"1000"},{"id":"bddc4878942be82e","type":"shared-state","name":"H322","lbl":"","tags":"","historyCount":"2","dataType":"num","boolType":"bool","boolStrTrue":"","boolStrFalse":"","precision":"","numMin":"","numMax":"","unit":"","saveInterval":"1000"},{"id":"07c08f129a7b4c70","type":"shared-state","name":"H324","lbl":"","tags":"","historyCount":"2","dataType":"num","boolType":"bool","boolStrTrue":"","boolStrFalse":"","precision":"","numMin":"","numMax":"","unit":"","saveInterval":"1000"},{"id":"2262c0a1fce38a3c","type":"shared-state","name":"Horizontal_pos_puls_ratio","lbl":"","tags":"","historyCount":"2","dataType":"num","boolType":"bool","boolStrTrue":"","boolStrFalse":"","precision":"","numMin":"","numMax":"","unit":"","saveInterval":"0"},{"id":"0eb6076645abaa5e","type":"shared-state","name":"Vertical_pos_puls_ratio","lbl":"","tags":"","historyCount":"2","dataType":"num","boolType":"bool","boolStrTrue":"","boolStrFalse":"","precision":"","numMin":"","numMax":"","unit":"","saveInterval":"0"},{"id":"888cbf8448978e81","type":"shared-state","name":"VerticalInitValue","lbl":"","tags":"","historyCount":"2","dataType":"num","boolType":"bool","boolStrTrue":"","boolStrFalse":"","precision":"","numMin":"-20000","numMax":"20000","unit":"","saveInterval":"0"},{"id":"b88b589938e6439e","type":"shared-state","name":"HorizontalInitValue","lbl":"","tags":"","historyCount":"2","dataType":"num","boolType":"bool","boolStrTrue":"","boolStrFalse":"","precision":"","numMin":"-20000","numMax":"20000","unit":"","saveInterval":"0"},{"id":"183f35baf73533ae","type":"shared-state","name":"myAlarmLimitLamp","lbl":"","tags":"","historyCount":"2","dataType":"num","boolType":"bool","boolStrTrue":"","boolStrFalse":"","precision":"5","numMin":"0","numMax":"99999","unit":"","saveInterval":"0"},{"id":"a380e10a93bb06f6","type":"shared-state","name":"myHoursOfUseLamp","lbl":"","tags":"","historyCount":"2","dataType":"num","boolType":"bool","boolStrTrue":"","boolStrFalse":"","precision":"5","numMin":"0","numMax":"65535","unit":"h","saveInterval":"60000"},{"id":"a3359771aeaf0a9a","type":"shared-state","name":"myTimesOfStrikesLamp","lbl":"","tags":"","historyCount":"2","dataType":"num","boolType":"bool","boolStrTrue":"","boolStrFalse":"","precision":"","numMin":"0","numMax":"65535","unit":"","saveInterval":"0"},{"id":"d423ff8fccb8bc7a","type":"shared-state","name":"H104","lbl":"","tags":"","historyCount":"2","dataType":"num","boolType":"bool","boolStrTrue":"","boolStrFalse":"","precision":"","numMin":"0","numMax":"100","unit":"","saveInterval":"0"},{"id":"cc99b107ae5d636b","type":"shared-state","name":"H105","lbl":"","tags":"","historyCount":"2","dataType":"num","boolType":"bool","boolStrTrue":"","boolStrFalse":"","precision":"","numMin":"0","numMax":"100","unit":"","saveInterval":"0"},{"id":"b85a896e6cae7d2e","type":"shared-state","name":"H106","lbl":"","tags":"","historyCount":"2","dataType":"num","boolType":"bool","boolStrTrue":"","boolStrFalse":"","precision":"","numMin":"0","numMax":"100","unit":"","saveInterval":"0"},{"id":"08b8f050c4969e90","type":"shared-state","name":"H107","lbl":"","tags":"","historyCount":"2","dataType":"num","boolType":"bool","boolStrTrue":"","boolStrFalse":"","precision":"","numMin":"0","numMax":"100","unit":"","saveInterval":"0"},{"id":"1db7bf75d46ca85f","type":"shared-state","name":"H100","lbl":"","tags":"","historyCount":"2","dataType":"num","boolType":"bool","boolStrTrue":"","boolStrFalse":"","precision":"","numMin":"50","numMax":"99","unit":"","saveInterval":"0"},{"id":"8402cd05901ab1ef","type":"shared-state","name":"IgnitionTime","lbl":"","tags":"","historyCount":"2","dataType":"num","boolType":"bool","boolStrTrue":"","boolStrFalse":"","precision":"","numMin":"300","numMax":"1000","unit":"","saveInterval":"0"},{"id":"281ce15898884b61","type":"shared-state","name":"H220","lbl":"","tags":"","historyCount":"2","dataType":"str","boolType":"bool","boolStrTrue":"","boolStrFalse":"","precision":"","numMin":"","numMax":"","unit":"","saveInterval":"0"},{"id":"744223c35bab1e2d","type":"shared-state","name":"H200","lbl":"","tags":"","historyCount":"2","dataType":"str","boolType":"bool","boolStrTrue":"","boolStrFalse":"","precision":"","numMin":"","numMax":"","unit":"","saveInterval":"0"},{"id":"1ab7373f6bacb88c","type":"shared-state","name":"H210","lbl":"","tags":"","historyCount":"2","dataType":"str","boolType":"bool","boolStrTrue":"","boolStrFalse":"","precision":"","numMin":"","numMax":"","unit":"","saveInterval":"0"},{"id":"94260a86e7c6ad52","type":"shared-state","name":"H118","lbl":"","tags":"","historyCount":"2","dataType":"num","boolType":"bool","boolStrTrue":"","boolStrFalse":"","precision":"","numMin":"","numMax":"","unit":"","saveInterval":"0"},{"id":"cf0d9d2ce5d9afcc","type":"shared-state","name":"H120","lbl":"","tags":"","historyCount":"2","dataType":"num","boolType":"bool","boolStrTrue":"","boolStrFalse":"","precision":"","numMin":"","numMax":"","unit":"","saveInterval":"0"},{"id":"cf9864b7fc29b5db","type":"shared-state","name":"SystemMaxPowerHoriz","lbl":"","tags":"","historyCount":"2","dataType":"num","boolType":"bool","boolStrTrue":"","boolStrFalse":"","precision":"1","numMin":"1","numMax":"5","unit":"A","saveInterval":"0"},{"id":"95a7e0ce700f209f","type":"shared-state","name":"SystemMaxPowerVert","lbl":"","tags":"","historyCount":"2","dataType":"num","boolType":"bool","boolStrTrue":"","boolStrFalse":"","precision":"1","numMin":"1","numMax":"5","unit":"A","saveInterval":"0"},{"id":"925fe9794556cfab","type":"shared-state","name":"LimpModeHor","lbl":"","tags":"","historyCount":"2","dataType":"bool","boolType":"bool","boolStrTrue":"","boolStrFalse":"","precision":"","numMin":"","numMax":"","unit":"","saveInterval":"0"},{"id":"aec2e1d3093df16d","type":"shared-state","name":"LimpModeVert","lbl":"","tags":"","historyCount":"2","dataType":"bool","boolType":"bool","boolStrTrue":"","boolStrFalse":"","precision":"","numMin":"","numMax":"","unit":"","saveInterval":"0"},{"id":"dc65d6fbaddad817","type":"shared-state","name":"LimpModeFocus","lbl":"","tags":"","historyCount":"2","dataType":"bool","boolType":"bool","boolStrTrue":"","boolStrFalse":"","precision":"","numMin":"","numMax":"","unit":"","saveInterval":"0"},{"id":"775ba31a9c185aa4","type":"shared-state","name":"SystemMaxPowerFocus","lbl":"","tags":"","historyCount":"2","dataType":"num","boolType":"bool","boolStrTrue":"","boolStrFalse":"","precision":"1","numMin":"0.1","numMax":"2","unit":"A","saveInterval":"0"},{"id":"94dcc670ed4bd28e","type":"serial-port","name":"","serialport":"/dev/ttyS0","serialbaud":"115200","databits":8,"parity":"none","stopbits":1,"waitfor":"","dtr":"none","rts":"none","cts":"none","dsr":"none","newline":"1","bin":"false","out":"interbyte","addchar":"","responsetimeout":10000},{"id":"606b58074d6c23c9","type":"function","z":"9e702f4d4b057300","name":"Update Command","func":"let myCommand = global.get(\"Command\") & 0xFFFC;\nlet PO = global.get(\"Physical_output\");\nlet LampOnOff = global.get(\"LampOnOff\");\n\nif (LampOnOff==3) {\n    PO |= 0b00010000000;\n} else {\n    PO &= ~(0b00010000000);\n}\nglobal.set(\"Physical_output\", PO);\n\nglobal.set(\"Command\", myCommand | LampOnOff);\n\nnode.log(\"Lamp command sent: \" + LampOnOff);\n\nreturn {payload: LampOnOff};","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":970,"y":180,"wires":[["9fc3e0cd473d78b7"]]},{"id":"0631aa41c4be2c43","type":"switch","z":"9e702f4d4b057300","name":"LampOnOff","property":"LampOnOff","propertyType":"global","rules":[{"t":"eq","v":"2","vt":"num"},{"t":"eq","v":"3","vt":"num"}],"checkall":"true","repair":false,"outputs":2,"x":330,"y":100,"wires":[["c5509541d67234c6"],["f52348d330124a54"]]},{"id":"786bc6dbf4c65ca9","type":"change","z":"9e702f4d4b057300","name":"Lamp On","rules":[{"t":"set","p":"LampOnOff","pt":"global","to":"3","tot":"num"},{"t":"set","p":"Lamp","pt":"global","to":"3","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":780,"y":120,"wires":[["606b58074d6c23c9"]]},{"id":"f52348d330124a54","type":"change","z":"9e702f4d4b057300","name":"Lamp Off","rules":[{"t":"set","p":"LampOnOff","pt":"global","to":"2","tot":"num"},{"t":"set","p":"Lamp","pt":"global","to":"2","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":780,"y":180,"wires":[["606b58074d6c23c9"]]},{"id":"6e5ef877510f1669","type":"function","z":"9e702f4d4b057300","name":"Update TimesOfStrikesLamp","func":"let TOS = global.get(\"myTimesOfStrikesLamp\");\nreturn { payload: TOS + 1 };","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":840,"y":80,"wires":[["549ff670a239ec99"]]},{"id":"f366c807b830ee4b","type":"switch","z":"9e702f4d4b057300","name":"","property":"payload","propertyType":"msg","rules":[{"t":"true"}],"checkall":"true","repair":false,"outputs":1,"x":170,"y":100,"wires":[["0631aa41c4be2c43"]]},{"id":"c5509541d67234c6","type":"function","z":"9e702f4d4b057300","name":"Check if Lamp On is allowed","func":"let regW = global.get(\"regW\");\nlet BlockOn = false;\n\n// Drum high temp sensor activated and triggered?\nif ((global.get(\"H151\") & 0b0001) == 1) {\n    if (global.get(\"HighTempInDrum\") == false) {\n        BlockOn = true;\n    } \n}\n\n// Reset funksjon activated?\nif ((regW.W15 & 0b0000000000000001) == 1) {\n    BlockOn = true;\n}\n\nif (!BlockOn) {\n    return msg;\n}\n","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":560,"y":80,"wires":[["786bc6dbf4c65ca9","6e5ef877510f1669"]]},{"id":"1ad7a362d30376b3","type":"udp out","z":"9e702f4d4b057300","d":true,"name":"FINS out","addr":"192.168.1.41","iface":"","port":"9600","ipv":"udp4","outport":"9600","base64":false,"multicast":"false","x":1100,"y":240,"wires":[]},{"id":"9fc3e0cd473d78b7","type":"function","z":"9e702f4d4b057300","d":true,"name":"Build signal forward for PLS 41","func":"//var myList = [];\n\nlet myBit = (msg.payload===3?0x01:0x00);\n\n//===3?0x01:0x00);\n\n//                                ICF RSV GCT   DNA  DA1 DA2 SNA  SA1  SA2  SID CODE_HI CODE_LO #BITS SC_HI  SC_LO    ME Adr_Hi Adr_Lo  #Bit  \nlet myFinsTelegram = Buffer.from([0x81, 0,  3, 0x00,  41,  0,  0,  11,   0, 0xA,   0x01,   0x02, 0x31, 0x00, 0x32, 0x07, 0, 0x01, myBit]);\n\n//myList.push(myFinsTelegram);\n\n//var telegram = Buffer.concat(myList);\n\nreturn { payload: myFinsTelegram };","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":870,"y":240,"wires":[["1ad7a362d30376b3"]]},{"id":"549ff670a239ec99","type":"set-shared-state","z":"9e702f4d4b057300","state":"a3359771aeaf0a9a","name":"myTimesOfStrikesLamp","triggerOnInit":true,"triggerOnChange":true,"provideOutput":false,"outputs":0,"x":1110,"y":80,"wires":[]},{"id":"6dd0cdc2bd93e19f","type":"function","z":"e8c4dc311b342ba5","name":"H.XX => Hh Mmin Ssec","func":"let H = Math.floor(msg.payload);\nlet fH = msg.payload - H;\nlet M = Math.floor(fH*60);\nlet fM = fH*60 - M;\nlet S = Math.floor(fM*60);\n\nreturn {payload: H + \"h \" + M + \"min \" + S + \"sec\"};","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":250,"y":80,"wires":[["0967a71c209f3b60"]]},{"id":"0967a71c209f3b60","type":"ui_text","z":"e8c4dc311b342ba5","group":"165c3949f7f07547","order":1,"width":0,"height":0,"name":"","label":"Hours of use lamp [h]","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#000000","x":500,"y":80,"wires":[]},{"id":"8559858351ec7aed","type":"comment","z":"56baf3adbae499b7","name":"Error flag handler FINS","info":"# Alarm A W33.00\n- High Temp W30.00\n\n# Alarm B W33.01\n- Blocked Horiz W31.00\n- Blocked Vert. W31.01\n\n# Alarm C W33.02\n- Init Error W31.02\n- Init Error Vertical W31.03\n- Init Error Horizontal W31.04\n- Init Error Focus Pos. W31.05\n- Init Error Focus Neg. W31.06\n\n# Alarm ABC W33.03\n- A, B, or C","x":180,"y":40,"wires":[]},{"id":"30ce3e38bb43c1f7","type":"function","z":"56baf3adbae499b7","name":"Handle Flags","func":"let regW = global.get(\"regW\");\nlet changed = false;\n\n// Alarm A\nif (regW.W30 != 0) {\n    if ((regW.W33 & 0b0001) == 0) {\n        regW.W33 |= 0b0001;\n        changed = true;\n    }\n} else {\n    if ((regW.W33 & 0b0001) != 0) {\n        regW.W33 &= ~(0b0001);\n        changed = true;\n    }\n}\n\n// Alarm B\nif (regW.W31 != 0) {\n    if ((regW.W33 & 0b0010) == 0) {\n        regW.W33 |= 0b0010;\n        changed = true;\n    }\n} else {\n    if ((regW.W33 & 0b0010) != 0) {\n        regW.W33 &= ~(0b0010);\n        changed = true;\n    }\n}\n\n// Alarm C\nif (regW.W32 != 0) {\n    if ((regW.W33 & 0b0100) == 0) {\n        regW.W33 |= 0b0100;\n        changed = true;\n    }\n} else {\n    if ((regW.W33 & 0b0100) != 0) {\n        regW.W33 &= ~(0b0100);\n        changed = true;\n    }\n}\n\n// Alarm A,B or C\nif ((regW.W33&0b0111) !=0)  {\n    if ((regW.W33 & 0b1000) == 0) {\n        regW.W33 |= 0b1000;\n        changed = true;\n    }\n} else {\n    if ((regW.W33 & 0b1000) != 0) {\n        regW.W33 &= ~(0b1000);\n        changed = true;\n    }\n}\n\n\nif(changed) {\n    global.set(\"regW\",regW);\n}\n\n\nreturn [\n    { payload: regW },\n    { payload: { fill: (regW.W33 ? \"red\" : \"green\"), shape: \"ring\", text: \"Error Flags: \" + (regW.W33 & 0b1 ? \"A\" : \"\") + (regW.W33 & 0b10 ? \"B\" : \"\") + (regW.W33 & 0b100 ? \"C\" : \"\") } }\n];","outputs":2,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":230,"y":120,"wires":[[],[]]},{"id":"b39bf248b1d643f2","type":"function","z":"6bb57b6db6c2449d","name":"MDC commands","func":"function floatToInt16_t(val) {\n\n    if (val < 0) {\n        return (~(-val) + 1) & 0xFFFF;\n\n    } else {\n        return val;\n    }\n\n}\n\n// let myHorInput = global.get(\"HorInput\");\n// let myVertInput = global.get(\"VertInput\");\n// let pktNum = global.get(\"pktNum\");\n// let myCommand = global.get(\"Command\");\nlet cmd = msg.payload;\n\nif(cmd.myCommand !== 0) {\n    global.set(\"Command\", 0);\n}\n\n// Easy tracking of communication\nlet pktNum = (global.get(\"pktNum\")+1)&0xFFFF;\nglobal.set(\"pktNum\",pktNum);\n\n\nif(global.get(\"systemType\")==\"R60\") {\n\n    let regW = global.get(\"regW\");\n    let regWOrg = regW;\n    let regWChanged = false;\n\n    //--- LIMIT TEST -------------------\n    if((regW.W15 & 0b0000000000000001)==0) {\n\n        let myHorzMinInput = 9510;\n        let myVertMinInput = 9510;\n\n        cmd.myHorInput = global.get(\"horizPosSign\")*cmd.myHorInput;\n        cmd.myVertInput = global.get(\"vertPosSign\")*cmd.myVertInput; \n\n        // Check Horizontal Limits (if no Hor. Sweep order)\n        if ((regW.W0 & 0b00010000000) === 0) {\n            let myHorPos = global.get(\"Horizontal_pos_act\");\n            let myHorLimitNeg = global.get(\"H318\");\n            let myHorLimitPos = global.get(\"H320\");\n\n            // Update Horizontal Limits + flag\n            if (cmd.myHorInput > 0) {\n                if (myHorLimitPos <= (myHorPos+1.5)) {\n                    cmd.myHorInput = 0;\n                    global.set(\"HorInput\", 0);\n                } else if (myHorLimitPos <= (myHorPos+15)) {\n                    cmd.myHorInput = myHorzMinInput;\n                    global.set(\"HorInput\", cmd.myHorInput);\n                }\n            } else if (cmd.myHorInput < 0) {\n                 if (myHorLimitNeg >= (myHorPos-2)) {\n                    cmd.myHorInput = 0;\n                    global.set(\"HorInput\", 0);\n                } else if (myHorLimitNeg >= (myHorPos-15)) {\n                    cmd.myHorInput = -myHorzMinInput;\n                    global.set(\"HorInput\", cmd.myHorInput);\n                }                 \n            }\n        }\n\n\n        // Check Vertical Limits (if no Vert. Sweep order)\n        if ((regW.W0 & 0b00100000000) === 0) {\n            let myVertPos = global.get(\"Vertical_pos_act\");\n            let myVertLimitNeg = global.get(\"H322\");\n            let myVertLimitPos = global.get(\"H324\");\n\n            if (cmd.myVertInput < 0) {\n                if (myVertLimitPos <= (myVertPos+0.5)) {\n                    cmd.myVertInput = 0;\n                    global.set(\"VertInput\", 0);\n                } else if (myVertLimitPos <= (myVertPos+6)) {\n                    cmd.myVertInput = -myVertMinInput;\n                    global.set(\"VertInput\", cmd.myVertInput);\n                }\n            } else if (cmd.myVertInput > 0) {\n                if (myVertLimitNeg >= (myVertPos-0.5)) {\n                    cmd.myVertInput = 0;\n                    global.set(\"VertInput\", 0);\n                } else if (myVertLimitNeg >= (myVertPos-6)) {\n                    cmd.myVertInput = myVertMinInput;\n                    global.set(\"VertInput\", cmd.myVertInput);\n                }                \n            } \n        }\n\n    } else {\n        const MBS_COMMAND_STOP_HORIZ = 0x0100;\n        const MBS_COMMAND_STOP_VERT = 0x0200;\n        const MBS_COMMAND_STOP_FOCUS = 0x0400;\n        const MBS_COMMAND_BLOCK_LAMP = 0x0800;\n        cmd.myCommand |= MBS_COMMAND_STOP_HORIZ | MBS_COMMAND_STOP_VERT | MBS_COMMAND_STOP_FOCUS | MBS_COMMAND_BLOCK_LAMP;\n    }\n\n    // Tell driver if we are a R60 command\n    cmd.myCommand |= global.get(\"R60Mask\");\n\n    if (regWChanged) {\n        global.set(\"regW\",regW);\n    }\n\n    //---------------------------------\n\n}\n\nreturn { payload: [pktNum, floatToInt16_t(cmd.myHorInput), floatToInt16_t(cmd.myVertInput), floatToInt16_t(cmd.myFocusInput), cmd.myCommand]};","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":950,"y":80,"wires":[[]]},{"id":"150234e38c66fa3c","type":"switch","z":"6bb57b6db6c2449d","name":"Telegram Type?","property":"payload","propertyType":"msg","rules":[{"t":"istype","v":"number","vt":"number"},{"t":"else"}],"checkall":"false","repair":false,"outputs":2,"x":200,"y":80,"wires":[["cc1433a7b529d576"],["71d644dbf17aad95"]]},{"id":"cc1433a7b529d576","type":"function","z":"6bb57b6db6c2449d","name":"Ping!","func":"let cmd = {};\ncmd[\"myHorInput\"] = global.get(\"HorInput\");\ncmd[\"myVertInput\"] = global.get(\"VertInput\");\ncmd[\"myFocusInput\"] = global.get(\"focusInput\");\ncmd[\"myCommand\"] = global.get(\"Command\");\n\nreturn {payload: cmd};","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":730,"y":80,"wires":[["b39bf248b1d643f2"]]},{"id":"71d644dbf17aad95","type":"switch","z":"6bb57b6db6c2449d","name":"Input Source","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"W50","vt":"str"},{"t":"eq","v":"SJ","vt":"str"},{"t":"eq","v":"R5","vt":"str"},{"t":"else"}],"checkall":"false","repair":false,"outputs":4,"x":410,"y":140,"wires":[["2ca2353ec9ab22cc"],["1277493e6f1a828c"],["ca0eec30f956e26c"],["cc1433a7b529d576"]]},{"id":"ca0eec30f956e26c","type":"function","z":"6bb57b6db6c2449d","name":"R5","func":"let cmd = {};\n\ncmd[\"myHorInput\"] = global.get(\"HorInput\");\ncmd[\"myVertInput\"] = global.get(\"VertInput\");\ncmd[\"myFocusInput\"] = global.get(\"focusInput\");\ncmd[\"myCommand\"] = global.get(\"Command\");\n\nlet regW = global.get(\"regW\");\nif(!(regW.W15&0b0000000000000001)) {\n    if(msg.payload.myHorInput !== undefined) {\n        if(global.get(\"HState\")==0) {\n            cmd.myHorInput = msg.payload.myHorInput;\n            global.set(\"HorInput\",cmd.myHorInput);\n        } \n    }\n    if(msg.payload.myVertInput !== undefined) {\n        if(global.get(\"VState\")==0) {\n            cmd.myVertInput = msg.payload.myVertInput;\n            global.set(\"VertInput\",cmd.myVertInput);\n        }\n    }\n    if(msg.payload.myFocusInput !== undefined) {\n        cmd.myFocusInput = msg.payload.myFocusInput;\n        global.set(\"focusInput\",cmd.myFocusInput);\n    }\n    \n}\n\nreturn {payload: cmd};","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":730,"y":200,"wires":[["b39bf248b1d643f2"]]},{"id":"2ca2353ec9ab22cc","type":"function","z":"6bb57b6db6c2449d","name":"W0+50","func":"let cmd = {};\n\ncmd[\"myHorInput\"] = global.get(\"HorInput\");\ncmd[\"myVertInput\"] = global.get(\"VertInput\");\ncmd[\"myFocusInput\"] = global.get(\"focusInput\");\ncmd[\"myCommand\"] = global.get(\"Command\");\n\nlet regW = global.get(\"regW\");\nif(!(regW.W15&0b0000000000000001)) {\n    let H150 = global.get(\"H150\");\n    if(msg.payload.myHorInput !== undefined) {\n        if(global.get(\"HState\")==0) {\n            if(H150&0b1000000000) {\n                cmd.myHorInput = -msg.payload.myHorInput;\n            } else {\n                cmd.myHorInput = msg.payload.myHorInput;\n            }\n            global.set(\"HorInput\",cmd.myHorInput);\n        } \n    }\n    if(msg.payload.myVertInput !== undefined) {\n        if(global.get(\"VState\")==0) {\n            if(H150&0b10000000000) {\n                cmd.myVertInput = -msg.payload.myVertInput;\n            } else {\n                cmd.myVertInput = msg.payload.myVertInput;\n            }\n            global.set(\"VertInput\",cmd.myVertInput);\n        }\n    }\n    if(msg.payload.myFocusInput !== undefined) {\n        cmd.myFocusInput = msg.payload.myFocusInput;\n        global.set(\"focusInput\",cmd.myFocusInput);\n    }\n}\n\nreturn {payload: cmd};","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":740,"y":120,"wires":[["b39bf248b1d643f2"]]},{"id":"1277493e6f1a828c","type":"function","z":"6bb57b6db6c2449d","name":"SJ","func":"let cmd = {};\n\ncmd[\"myHorInput\"] = global.get(\"HorInput\");\ncmd[\"myVertInput\"] = global.get(\"VertInput\");\ncmd[\"myFocusInput\"] = global.get(\"focusInput\");\ncmd[\"myCommand\"] = global.get(\"Command\");\n\nlet regW = global.get(\"regW\");\nif(!(regW.W15&0b0000000000000001)) {\n    let H150 = global.get(\"H150\");\n    if(msg.payload.myHorInput !== undefined) {\n        if(global.get(\"HState\")==0) {\n            if(H150&0b10000) {\n                cmd.myHorInput = -msg.payload.myHorInput;\n            } else {\n                cmd.myHorInput = msg.payload.myHorInput;\n            }\n            global.set(\"HorInput\",cmd.myHorInput);\n        } \n    }\n    if(msg.payload.myVertInput !== undefined) {\n        if(global.get(\"VState\")==0) {\n            if(H150&0b100000) {\n                cmd.myVertInput = -msg.payload.myVertInput;\n            } else {\n                cmd.myVertInput = msg.payload.myVertInput;\n            }\n            global.set(\"VertInput\",cmd.myVertInput);\n        }\n    }\n    if(msg.payload.myFocusInput !== undefined) {\n        cmd.myFocusInput = msg.payload.myFocusInput;\n        global.set(\"focusInput\",cmd.myFocusInput);\n    }\n}\n\nreturn {payload: cmd};","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":730,"y":160,"wires":[["b39bf248b1d643f2"]]},{"id":"93e651aa6071da75","type":"function","z":"190714efd60a5f96","name":"Log","func":"let d = new Date(Date.now());\nlet myFilename = '/home/pi/logg/' + d.getFullYear() + '/' + (d.getMonth() + 1) + '.txt';\n\nif (msg.topic === \"\") {\n  msg.topic = \"info\";\n}\n\nlet myPayload = d.toISOString() + ' [' + msg.topic + ']: ' + msg.payload;\n\nreturn [\n  { payload: myPayload, filename: myFilename},\n  { payload: \"Last updated: \" + d.toISOString() }\n];","outputs":2,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":170,"y":60,"wires":[["f6904fc382ba9e28"],[]]},{"id":"f6904fc382ba9e28","type":"file","z":"190714efd60a5f96","name":"","filename":"filename","filenameType":"msg","appendNewline":true,"createDir":true,"overwriteFile":"false","encoding":"none","x":340,"y":40,"wires":[[]]},{"id":"7dae1416cad5796d","type":"serial in","z":"ae68be7369407e97","d":true,"name":"","serial":"94dcc670ed4bd28e","x":160,"y":120,"wires":[["afddda3348b60ec5"]]},{"id":"afddda3348b60ec5","type":"debug","z":"ae68be7369407e97","d":true,"name":"debug 2","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":320,"y":120,"wires":[]},{"id":"9ef43715ef611f3d","type":"serial out","z":"ae68be7369407e97","d":true,"name":"","serial":"94dcc670ed4bd28e","x":320,"y":60,"wires":[]},{"id":"038628c65863a993","type":"inject","z":"ae68be7369407e97","d":true,"name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"Hei","payloadType":"str","x":150,"y":60,"wires":[["9ef43715ef611f3d"]]},{"id":"0595d9a1a0645316","type":"modbus-read","z":"ae68be7369407e97","name":"","topic":"","showStatusActivities":false,"logIOActivities":false,"showErrors":false,"showWarnings":true,"unitid":"10","dataType":"HoldingRegister","adr":"10","quantity":"10","rate":"1","rateUnit":"s","delayOnStart":false,"startDelayTime":"","server":"6f22240d6bfd8a8a","useIOFile":false,"ioFile":"","useIOForPayload":false,"emptyMsgOnFail":false,"x":310,"y":260,"wires":[["46f7d4603442b872","1671be1d710fe703"],[]]},{"id":"46f7d4603442b872","type":"debug","z":"ae68be7369407e97","name":"debug 3","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":540,"y":240,"wires":[]},{"id":"efd42763667ef326","type":"debug","z":"ae68be7369407e97","name":"debug 5","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":700,"y":180,"wires":[]},{"id":"1671be1d710fe703","type":"function","z":"ae68be7369407e97","name":"function 3","func":"// Input: msg.payload = array[10] holding regs 10..19 (uint16)\n// Expected mapping:\n//  [0]=reg10=x(int16), [1]=reg11=y(int16), [2]=reg12=z(int16),\n//  [3]=reg13=tempRaw12(int16), [4]=reg14=frame(u16),\n//  [5]=reg15=channel(u16), [6]=reg16=pd(u16), [7..9]=reserved\n\nfunction u16_to_i16(u) {\n    u = u & 0xFFFF;\n    return (u & 0x8000) ? (u - 0x10000) : u;\n}\n\nlet regs = msg.payload;\n\nif (!Array.isArray(regs) || regs.length < 7) {\n    node.status({ fill: \"red\", shape: \"ring\", text: \"Invalid Modbus regs\" });\n    node.error(\"Expected array[10] regs 10..19\", msg);\n    return null;\n}\n\n// Signed fields\nlet x = u16_to_i16(regs[0]);\nlet y = u16_to_i16(regs[1]);\nlet z = u16_to_i16(regs[2]);\nlet rawT12 = u16_to_i16(regs[3]);   // from MCU: mag.temperature = rawT12 (signed)\n\n// Unsigned/status fields\nlet frame = regs[4] & 0xFFFF;       // typically 0..3\nlet ch = regs[5] & 0xFFFF;       // typically 0..3\nlet pd = regs[6] & 0xFFFF;       // 0/1 (conversion completed)\n\n// Heading\nlet headingRad = Math.atan2(y, x);\nlet headingDeg = headingRad * 180 / Math.PI;\nif (headingDeg < 0) headingDeg += 360;\n\n// Temperature conversion (same as we used earlier)\n// If rawT12 is not a real rawT12 in your MCU, comment this out and send raw directly.\nlet temperatureC = 25.0 + (rawT12 - 340) * 1.1;\n\n// Validity (best we can do with exposed fields)\nlet valid = (ch === 0) && (pd === 1);\n\n// Status under node\nnode.status({\n    fill: valid ? \"green\" : \"yellow\",\n    shape: valid ? \"dot\" : \"ring\",\n    text: `Head ${headingDeg.toFixed(1)}° | T ${temperatureC.toFixed(1)}°C | FRM ${frame} CH ${ch} PD ${pd}`\n});\n\n// Output JSON\nmsg.payload = {\n    source: \"modbus_regs_10_19\",\n    valid: valid,\n    magnetometer: {\n        x: x,\n        y: y,\n        z: z,\n        heading_deg: Number(headingDeg.toFixed(2))\n    },\n    temperature_raw12: rawT12,\n    temperature_c: Number(temperatureC.toFixed(2)),\n    frame_counter: frame,\n    channel: ch,\n    pd: pd,\n    regs_10_19: regs\n};\n\nreturn msg;\n","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":540,"y":180,"wires":[["efd42763667ef326"]]},{"id":"fb1943a3e8867836","type":"debug","z":"7dc69f87fffada86","name":"debug 4","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":840,"y":80,"wires":[]},{"id":"3ba9fe5e4ec23b2b","type":"catch","z":"7dc69f87fffada86","name":"","scope":null,"uncaught":false,"x":680,"y":80,"wires":[["fb1943a3e8867836"]]},{"id":"a6fbc1ab4f644682","type":"inject","z":"7dc69f87fffada86","name":"Kick it to Start","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":true,"onceDelay":"3","topic":"","payload":"1","payloadType":"num","x":180,"y":140,"wires":[["a4f179828a1edafd"]]},{"id":"d318f7ed5ddbdeed","type":"function","z":"7dc69f87fffada86","name":"Input Voltage","func":"let raw = msg.payload;\nlet inV = raw*3.3/4096;\nlet V = inV * 28 / 3;\n\nreturn {payload: Math.round(V*10)/10};","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":650,"y":1620,"wires":[["ae858226604dfc34"]]},{"id":"28cea1ca53e4e3b5","type":"function","z":"7dc69f87fffada86","name":"Current Focus MD","func":"//let raw = msg.payload;\n//let inV = raw * 3.3 / 4096;\n//let A = 1000 * inV / 2490;\nlet A = msg.payload * 0.00032355986;\n\nreturn { payload: A.toFixed(2) };","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":670,"y":1500,"wires":[["2594e8ff344b1fd4","07ebc3e17caea303"]]},{"id":"23d897d94c1c5aaf","type":"function","z":"7dc69f87fffada86","name":"V to %","func":"let raw = msg.payload;\nglobal.set(\"Focus_Position_Raw\",raw/10.0);\n//let inV = raw*3.3/4096;\n//let V = inV * 24 / 3;\n//let prosent = (raw - 330) * 50 / (590 - 330);\nlet min = global.get(\"H118\");\nlet max = global.get(\"H120\");\nlet prosent = (raw - min) * 100 / (max - min);\n\nreturn {payload: Math.round(prosent)};","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":630,"y":1660,"wires":[["7f670829f110aced"]]},{"id":"e86aaf89efff499b","type":"range","z":"7dc69f87fffada86","minin":"0","maxin":"100","minout":"0","maxout":"100","action":"clamp","round":true,"property":"payload","name":"","x":820,"y":1700,"wires":[["a785f651d6fafc8f","b6afa99b702184e1"]]},{"id":"e50a7196e4fc95bc","type":"function","z":"7dc69f87fffada86","name":"Fanout PortA","func":"let LimpModeFocus = global.get(\"LimpModeFocus\");\nlet payload1 = (LimpModeFocus? false : msg.payload.FocusEndOut);\nlet payload2 = (LimpModeFocus? false : msg.payload.FocusEndIn);\n\nreturn [\n    { payload: payload1 },\n    { payload: payload2 },\n    {\n        payload: [\n            {\n                \"command\": \"update_style\",\n                \"selector\": \"#U\",\n                \"attributeName\": \"fill\",\n                \"attributeValue\": ((msg.payload.JS_Up == 1) ? \"white\" : \"orange\")\n            },\n            {\n                \"command\": \"update_style\",\n                \"selector\": \"#LampInd\",\n                \"attributeName\": \"stroke\",\n                \"attributeValue\": (msg.payload.RlyLampOn ? \"orange\" : \"#2d2d2d\")\n            }\n        ]\n    },\n    { payload: msg.payload.RlyLampOn }\n];","outputs":4,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":1010,"y":1740,"wires":[["6f0e4efc66470263"],["07b999f297bb6562"],["a5d4aef0364d53ac"],["f57f69c58e0dc911","b2b3016e4e1003ee"]]},{"id":"57d15fe22c25e35c","type":"function","z":"7dc69f87fffada86","name":"Pars modbus respons","func":"return [\n    { payload: msg.payload[0] },\n    { payload: msg.payload[1] },\n    { payload: msg.payload[2] },\n    { payload: msg.payload[3] },\n    { payload: msg.payload[4] },\n    { payload: msg.payload[5] },\n    { payload: msg.payload[6] },\n    { payload: msg.payload[7] },\n    { payload: msg.payload[8] },\n    { payload: msg.payload[9] },\n    { payload: msg.payload[10] },\n    { payload: msg.payload[11] },\n    { payload: msg.payload[12] },\n    { payload: msg.payload[13] },\n    { payload: msg.payload[14] },\n    { payload: msg.payload[15] },\n    { payload: msg.payload[16] }\n];","outputs":17,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":160,"y":1520,"wires":[["9bc20349283976a8"],["159c10536f240f1e"],["7e8e89b8f879574b"],[],[],["28cea1ca53e4e3b5"],["6c3e2fd5e27cd533"],["cf44b02db3adcbb6"],["d318f7ed5ddbdeed"],["23d897d94c1c5aaf"],[],["5ff306b8fe3909dd"],["3b6ff6707413a4c5"],["3e45ed0ed3501dbb"],["5ab4eb12dad36773"],["d71b832e7f911e52"],["fb5c402788f9ccae"]]},{"id":"a5d4aef0364d53ac","type":"link out","z":"7dc69f87fffada86","name":"R5 Test Panel Data Provider","mode":"link","links":["b520c274b873026e"],"x":1185,"y":1760,"wires":[]},{"id":"5ff306b8fe3909dd","type":"rbe","z":"7dc69f87fffada86","name":"","func":"rbe","gap":"","start":"","inout":"out","septopics":true,"property":"payload","topi":"topic","x":630,"y":1740,"wires":[["ccd2bee72080cc2d"]]},{"id":"3b6ff6707413a4c5","type":"rbe","z":"7dc69f87fffada86","name":"","func":"rbe","gap":"","start":"","inout":"out","septopics":true,"property":"payload","topi":"topic","x":630,"y":1860,"wires":[["40269633abc701a4"]]},{"id":"3e45ed0ed3501dbb","type":"rbe","z":"7dc69f87fffada86","name":"","func":"rbe","gap":"","start":"","inout":"out","septopics":true,"property":"payload","topi":"topic","x":630,"y":1900,"wires":[["631fcef90269c476"]]},{"id":"5ab4eb12dad36773","type":"rbe","z":"7dc69f87fffada86","name":"","func":"rbe","gap":"","start":"","inout":"out","septopics":true,"property":"payload","topi":"topic","x":770,"y":2220,"wires":[["3d8da29b0a4a60f0"]]},{"id":"f57f69c58e0dc911","type":"link out","z":"7dc69f87fffada86","name":"RlyLampOn","mode":"link","links":["9becc703c572e48c"],"x":1135,"y":1780,"wires":[]},{"id":"02d2103c0f1472b3","type":"function","z":"7dc69f87fffada86","name":"Horiz. pos. RAW=>ACT.","func":"let i = (global.get(\"LimpModeHor\") ? 0: msg.payload);\n//let lastI = global.get(\"Horizontal_pos_last_raw\");\nlet Ratio = global.get(\"myHorizRatio\");\nlet horizPosSign = global.get(\"horizPosSign\");\nlet result = 0;\n\nif(i>0x7FFF) {\n    // Parse toerkomplementet\n    i = -((~i + 1) & 0xFFFF);\n}\ni *= horizPosSign;\n\n\n// Store converted value\nglobal.set(\"Horizontal_pos_last_raw\", i);\n\nresult = i / Ratio;\n\nif (Number.isNaN(result)) {\n    result = 0;\n}\n\nglobal.set(\"HorizBlockedTimer\", 500);\n\nreturn [\n    { payload: result },\n    { payload: i}\n];\n","outputs":2,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":1230,"y":1180,"wires":[["87669cf6fd50b51a"],["bff56790ef28963c"]]},{"id":"87669cf6fd50b51a","type":"link out","z":"7dc69f87fffada86","name":"link out Horiz Pos Raw","mode":"link","links":["32885a0d66a25f9d"],"x":1395,"y":1160,"wires":[]},{"id":"1db8759243762a8e","type":"function","z":"7dc69f87fffada86","name":"Vert. pos. RAW=>ACT.","func":"let i =(global.get(\"LimpModeVert\") ? 0: msg.payload);\n//let lastI = global.get(\"Vertical_pos_last_raw\");\nlet Ratio = global.get(\"myVertRatio\");\nlet vertPosSign = global.get(\"vertPosSign\");\nlet result = 0;\n\nif (i > 0x7FFF) {\n    // Parse toerkomplementet\n    i = -((~i + 1) & 0xFFFF);\n}\ni *= vertPosSign;\n\n// Store converted value\nglobal.set(\"Vertical_pos_last_raw\", i);\n\nresult = i / Ratio;\n\nif (Number.isNaN(result)) {\n    result=0;\n}\n\nglobal.set(\"VertBlockedTimer\", 500);\n\nreturn [\n    { payload: result },\n    {payload: i}\n];\n","outputs":2,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":1220,"y":1300,"wires":[["f12c4028b51c3a4d"],["231e2a7ef8edbffc"]]},{"id":"f12c4028b51c3a4d","type":"link out","z":"7dc69f87fffada86","name":"link out Vert Pos Raw","mode":"link","links":["34d601203a1fb526"],"x":1395,"y":1280,"wires":[]},{"id":"6c3e2fd5e27cd533","type":"function","z":"7dc69f87fffada86","name":"Current Vert MD","func":"//let raw = msg.payload;\n//let inV = raw * 3.3 / 4096;\n//let A = inV / 270;   // 0.24% of power comsumption\n//A *= 417;  // 100/0.24 = 416.66667\nlet A = msg.payload / 803.662524524;\n\nreturn { payload: A.toFixed(3) };","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":660,"y":1540,"wires":[["d7a4fe776f22bf8a","07ebc3e17caea303"]]},{"id":"cf44b02db3adcbb6","type":"function","z":"7dc69f87fffada86","name":"Current Horz MD","func":"//let raw = msg.payload;\n//let inV = raw * 3.3 / 4096;\n//let A = inV / 270;   // 0.24% of power comsumption\n//A *= 417;  // 100/0.24 = 416.66667\nlet A = msg.payload / 803.662524524;\n\nreturn {payload: A.toFixed(3) }","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":670,"y":1580,"wires":[["b3b992fd506ad0c9","07ebc3e17caea303"]]},{"id":"7e8e89b8f879574b","type":"change","z":"7dc69f87fffada86","name":"","rules":[{"t":"set","p":"SLStatusByte","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":690,"y":1440,"wires":[["f070db581ec87f08"]]},{"id":"952167cb3768f978","type":"rbe","z":"7dc69f87fffada86","name":"","func":"rbe","gap":"","start":"","inout":"out","septopics":true,"property":"payload.SW1","topi":"topic","x":1010,"y":1940,"wires":[["9a89d87cba1903c3"]]},{"id":"9a89d87cba1903c3","type":"function","z":"7dc69f87fffada86","name":"Return PortC.SW1 if not 0","func":"let SW1 = msg.payload.SW1;\n\nif ((SW1 != 0) && (SW1 != global.get(\"SL\"))) {\n    return {payload: SW1};\n}","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":1210,"y":1940,"wires":[["b0ec6f71353fb619"]]},{"id":"b0ec6f71353fb619","type":"link out","z":"7dc69f87fffada86","name":"link out PortC.SW1","mode":"link","links":["cebd4becfa46b69d","b9fd66cd57f148c2"],"x":1375,"y":1940,"wires":[]},{"id":"46d51034819d2e57","type":"rbe","z":"7dc69f87fffada86","name":"","func":"rbe","gap":"","start":"","inout":"out","septopics":true,"property":"payload","topi":"topic","x":1030,"y":1180,"wires":[["02d2103c0f1472b3"]]},{"id":"767f8aaf1be33f76","type":"link in","z":"7dc69f87fffada86","name":"link in Modbus Input","links":["039507982c21ad7a","0f1d856e18d1302f","13c2e2e55affc4b6","15d3d9784dc286bc","1677a2e94e2692a4","1ceffebc9470b44d","1d56fdac314ee716","34fcb78df7365632","395c29b5fd8075d8","3f1d876259dfbd13","4a17aa992ce34303","81d956aa84d8f23a","87e51857550d2499","a641e7f58c0cbc43","aefdd6bbab165660","bb363c91075f0ba6","bc43c369702c528e","dd093eb333f77323","ed8b8e34dea834f9","d215d36952795dbe","99926cfd8602b64b"],"x":195,"y":400,"wires":[["54188a2ecaa446a1"]]},{"id":"dc2c9fee1f3d0484","type":"link out","z":"7dc69f87fffada86","name":"link out Port A","mode":"link","links":["5e0393418181d200"],"x":955,"y":1800,"wires":[]},{"id":"c1be60ae7c469091","type":"link out","z":"7dc69f87fffada86","name":"link out SL Status byte","mode":"link","links":["8e56abeee1b1cef2"],"x":1615,"y":1440,"wires":[]},{"id":"1336bc93a89fbfe5","type":"change","z":"7dc69f87fffada86","name":"","rules":[{"t":"set","p":"SLStatus","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1410,"y":1440,"wires":[["c1be60ae7c469091","27d26613bdad3b04","9485c489bd3335d3"]]},{"id":"4284fc4805df2e9e","type":"link out","z":"7dc69f87fffada86","name":"link out Port B","mode":"link","links":["5a359a9a51ae0d39"],"x":975,"y":1860,"wires":[]},{"id":"a1d12c10ef725438","type":"link out","z":"7dc69f87fffada86","name":"link out Port C","mode":"link","links":["12b2d6367b182885"],"x":975,"y":1900,"wires":[]},{"id":"8d03f44a3521f057","type":"link out","z":"7dc69f87fffada86","name":"link out Port D","mode":"link","links":["1e4af69e2c40f316"],"x":1115,"y":2220,"wires":[]},{"id":"e8934c2dd002f564","type":"rbe","z":"7dc69f87fffada86","name":"","func":"rbe","gap":"","start":"","inout":"out","septopics":true,"property":"payload","topi":"topic","x":1030,"y":1300,"wires":[["1db8759243762a8e"]]},{"id":"b6afa99b702184e1","type":"change","z":"7dc69f87fffada86","name":"","rules":[{"t":"set","p":"Focus_Position","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1050,"y":1640,"wires":[[]]},{"id":"6f0e4efc66470263","type":"rbe","z":"7dc69f87fffada86","name":"","func":"rbe","gap":"","start":"","inout":"out","septopics":true,"property":"payload","topi":"topic","x":1170,"y":1680,"wires":[["8059959e477ed591"]]},{"id":"07b999f297bb6562","type":"rbe","z":"7dc69f87fffada86","name":"","func":"rbe","gap":"","start":"","inout":"out","septopics":true,"property":"payload","topi":"topic","x":1170,"y":1720,"wires":[["a00642e46729ea55"]]},{"id":"8059959e477ed591","type":"function","z":"7dc69f87fffada86","name":"update Physical_input","func":"let myPi = global.get(\"Physical_input\");\n(!msg.payload ? (myPi |= 0x0010) : (myPi &= ~0x0010));  \nglobal.set(\"Physical_input\",myPi);\n\nreturn msg;","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":1360,"y":1680,"wires":[["eed2318dba1b804d","27d26613bdad3b04"]]},{"id":"a00642e46729ea55","type":"function","z":"7dc69f87fffada86","name":"update Physical_input","func":"let myPi = global.get(\"Physical_input\");\n(!msg.payload ? (myPi |= 0x0020) : (myPi &= ~0x0020));  \nglobal.set(\"Physical_input\",myPi);\n\nreturn msg;","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":1360,"y":1720,"wires":[["620ff4da5cdaea34","27d26613bdad3b04"]]},{"id":"4ed35a8b956e3f71","type":"change","z":"7dc69f87fffada86","name":"","rules":[{"t":"set","p":"HighTempInDrum","pt":"global","to":"payload.HighTemp","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1080,"y":1980,"wires":[["48ee068c56a931b7"]]},{"id":"6f0cb35bf557e779","type":"subflow:9e702f4d4b057300","z":"7dc69f87fffada86","name":"","x":1300,"y":2040,"wires":[]},{"id":"f02abba7b7a3bd15","type":"function","z":"7dc69f87fffada86","name":"Turn Lamp off?","func":"// Drum high temp sensor activated, triggered and Lamp On?\nif ((global.get(\"H151\") & 0b0001) == 1) {\n    if (global.get(\"HighTempInDrum\") == false) {\n        if(global.get(\"Lamp\")==3) {\n            return {payload: true};\n        }\n    }\n}","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":1100,"y":2040,"wires":[["6f0cb35bf557e779"]]},{"id":"48ee068c56a931b7","type":"function","z":"7dc69f87fffada86","name":"update Physical_input & High Temp In Drum Alarm","func":"if ((global.get(\"H151\") & 0b0001) == 1) {\n\n    // Physical input\n    let myPi = global.get(\"Physical_input\");\n    ((msg.payload.HighTemp) ? (myPi |= 0b001000000) : (myPi &= ~0b001000000));  \n    global.set(\"Physical_input\",myPi);\n\n    // w30.00\n    let regW = global.get(\"regW\");\n    ((!msg.payload.HighTemp) ? (regW.W30 |= 0b0001) : (regW.W30 &= ~0b0001));\n    global.set(\"regW\", regW);\n\n} else {\n\n    // Physical input\n    let myPi = global.get(\"Physical_input\");\n    myPi &= ~0b001000000;\n    global.set(\"Physical_input\", myPi);\n\n    // w30.00\n    let regW = global.get(\"regW\");\n    regW.W30 &= ~0b0001;\n    global.set(\"regW\", regW);\n\n}\n\nreturn msg;","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":1430,"y":1980,"wires":[["f02abba7b7a3bd15","27d26613bdad3b04","bb7c0559b85b161d"]]},{"id":"27d26613bdad3b04","type":"link out","z":"7dc69f87fffada86","name":"link out 43","mode":"link","links":["ba26879509f8b5e2"],"x":1725,"y":1580,"wires":[]},{"id":"916e40fed0938416","type":"function","z":"7dc69f87fffada86","name":"Blocked?","func":"let myAction = global.get(\"HorInput\");\nlet HorizBlockedTimer = global.get(\"HorizBlockedTimer\");\n\nif ((myAction != 0) && (!global.get(\"LimpModeHor\"))) {\n    global.set(\"HorizBlockedTimer\", HorizBlockedTimer - 100);\n} else if (HorizBlockedTimer !== 500) {\n    global.set(\"HorizBlockedTimer\", 500);\n}\n\nlet regW = global.get(\"regW\");\nif (HorizBlockedTimer < 0) {\n    if ((regW.W31 & 0x1) == 0) {\n        regW.W31 |= 0x1;\n        global.set(\"regW\",regW);\n    }\n} else {\n    if ((regW.W31 & 0x1) != 0) {\n        regW.W31 &= ~(0x1);\n        global.set(\"regW\", regW);\n    }\n}\n\nnode.status({ fill: (regW.W31 & 0b1 ? \"red\" : \"green\"), shape: \"ring\", text: \"T:\" + HorizBlockedTimer });\n\nreturn [\n    msg,\n    { payload: ((HorizBlockedTimer<0)?true:false) }\n];","outputs":2,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":640,"y":1220,"wires":[["46d51034819d2e57"],["af0198d11e2e5413"]]},{"id":"af0198d11e2e5413","type":"rbe","z":"7dc69f87fffada86","name":"","func":"rbe","gap":"","start":"","inout":"out","septopics":true,"property":"payload","topi":"topic","x":830,"y":1240,"wires":[["b3958cfd49f8d02a"]]},{"id":"b3958cfd49f8d02a","type":"link out","z":"7dc69f87fffada86","name":"link out 49","mode":"link","links":["13a43e121be8adee"],"x":935,"y":1260,"wires":[]},{"id":"bb7c0559b85b161d","type":"link out","z":"7dc69f87fffada86","name":"link out 50","mode":"link","links":["13a43e121be8adee"],"x":1675,"y":1980,"wires":[]},{"id":"cfbf7493664a7c75","type":"function","z":"7dc69f87fffada86","name":"Blocked?","func":"let myAction = global.get(\"VertInput\");\nlet VertBlockedTimer = global.get(\"VertBlockedTimer\");\n\nif ((myAction != 0) && (!global.get(\"LimpModeVert\"))) {\n    global.set(\"VertBlockedTimer\", VertBlockedTimer - 100);\n} else if (VertBlockedTimer !== 500) {\n    global.set(\"VertBlockedTimer\", 500);\n}\n\nlet regW = global.get(\"regW\");\nif (VertBlockedTimer < 0) {\n    if ((regW.W31 & 0b10) == 0) {\n        regW.W31 |= 0b10;\n        global.set(\"regW\",regW);\n    }\n} else {\n    if ((regW.W31 & 0b10) != 0) {\n        regW.W31 &= ~(0b10);\n        global.set(\"regW\", regW);\n    }\n}\n\nnode.status({ fill: (regW.W31 & 0b10 ? \"red\" : \"green\"), shape: \"ring\", text: \"T:\" + VertBlockedTimer });\n\nreturn [\n    msg,\n    { payload: ((VertBlockedTimer<0)?true:false) }\n];","outputs":2,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":640,"y":1340,"wires":[["e8934c2dd002f564"],["f30b9fe4040e5481"]]},{"id":"f30b9fe4040e5481","type":"rbe","z":"7dc69f87fffada86","name":"","func":"rbe","gap":"","start":"","inout":"out","septopics":true,"property":"payload","topi":"topic","x":830,"y":1360,"wires":[["b3958cfd49f8d02a"]]},{"id":"b2b3016e4e1003ee","type":"rbe","z":"7dc69f87fffada86","name":"","func":"rbe","gap":"","start":"","inout":"out","septopics":true,"property":"payload","topi":"topic","x":1170,"y":1820,"wires":[["1a443a720a35a6a4"]]},{"id":"9ecf13822627e0b9","type":"subflow:9e702f4d4b057300","z":"7dc69f87fffada86","name":"","x":1540,"y":1800,"wires":[]},{"id":"1a443a720a35a6a4","type":"function","z":"7dc69f87fffada86","name":"Toggle Lamp?","func":"if (msg.payload == true) {\n    if (global.get(\"LampOnOff\") == 2) {\n        return { payload: true };\n    }\n} else {\n    if (global.get(\"LampOnOff\") == 3) {\n        return { payload: true };\n    }\n}\n\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1340,"y":1800,"wires":[["9ecf13822627e0b9"]]},{"id":"0d2426ee8d0fd9a5","type":"function","z":"7dc69f87fffada86","name":"update Physical_output","func":"let myPo = global.get(\"Physical_output\");\n(msg.payload.RlyIgniteOn ? (myPo |= 0x0040) : (myPo &= ~0x0040));  \nglobal.set(\"Physical_output\",myPo);\n\nreturn msg;","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":1210,"y":2260,"wires":[["44b8dc19b6482151"]]},{"id":"44b8dc19b6482151","type":"link out","z":"7dc69f87fffada86","name":"link out 54","mode":"link","links":["ba26879509f8b5e2"],"x":1375,"y":2260,"wires":[]},{"id":"0dc1ea745f4426f5","type":"function","z":"7dc69f87fffada86","name":"update Physical_output","func":"let myHorInput = msg.payload[1];\nlet myVertInput = msg.payload[2];\nlet myFocusInput = msg.payload[3];\n\nlet myPo = global.get(\"Physical_output\");\nlet myOldPo = myPo;\n(myHorInput != 0 ? (myPo |= 0x0002) : (myPo &= ~0x0002));   // PWM Horiz\n(myVertInput < 0x8000 ? (myPo |= 0x0004) : (myPo &= ~0x0004));   // Dir Vert\n(myVertInput != 0 ? (myPo |= 0x0008) : (myPo &= ~0x0008));  // PWM Vert\nif( myFocusInput > 0x7FFF ) {\n    myPo |= 0x0010;  // Neg\n    myPo &= ~0x0020;\n} else {\n    myPo &= ~0x0010;  \n    ((myFocusInput != 0) ? (myPo |= 0x0020) : (myPo &= ~0x0020));   // Pos?\n}\nif (myOldPo != myPo) {  \n    global.set(\"Physical_output\",myPo);\n}\n\nreturn msg;","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":630,"y":500,"wires":[["563d453f73e56d1e"]]},{"id":"563d453f73e56d1e","type":"link out","z":"7dc69f87fffada86","name":"link out 55","mode":"link","links":["ba26879509f8b5e2"],"x":795,"y":500,"wires":[]},{"id":"7bf92013a7d0fc55","type":"comment","z":"7dc69f87fffada86","name":"MODBUS - Main communication between RPi & MDC-backplane","info":"","x":290,"y":80,"wires":[]},{"id":"d41964b062315091","type":"switch","z":"7dc69f87fffada86","name":"","property":"debugMode","propertyType":"global","rules":[{"t":"true"}],"checkall":"true","repair":false,"outputs":1,"x":930,"y":880,"wires":[["6fb7cf022618bcaf"]]},{"id":"33b03ff429cd46a8","type":"switch","z":"7dc69f87fffada86","name":"","property":"debugMode","propertyType":"global","rules":[{"t":"true"}],"checkall":"true","repair":false,"outputs":1,"x":570,"y":660,"wires":[["320fd41b129bb82d"]]},{"id":"eb98b546d77fa777","type":"function","z":"7dc69f87fffada86","name":"Feed Sequencer","func":"msg.sequences = [\n    { name: \"MAIN_FB\", fc: 3, address: 20, unitid: 10, quantity: 25 }\n];\n\nif(msg.payload == 3) {\n    msg.sequences.push({ name: \"VER_FB\", fc: 3, address: 75, unitid: 10, quantity: 8 });\n}\n\nreturn msg;\n","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":610,"y":780,"wires":[["738bf0a795eaeb88"]]},{"id":"b751c3dff1253eba","type":"switch","z":"7dc69f87fffada86","name":"Switch on Telegram Response","property":"modbusRequest.name","propertyType":"msg","rules":[{"t":"eq","v":"MAIN_FB","vt":"str"},{"t":"eq","v":"VER_FB","vt":"str"}],"checkall":"false","repair":false,"outputs":2,"x":670,"y":900,"wires":[["57d15fe22c25e35c","d41964b062315091"],["8084a9ce0c0bc3a1"]]},{"id":"caa818f65ceae0b9","type":"function","z":"7dc69f87fffada86","name":"FC16 - Write Multiple Registers (Addr:10, Reg:10, Cnt:5)","func":"return {payload: { value: msg.payload, 'fc': 16, 'unitid': 10, 'address': 10 , 'quantity': 5 }};","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":730,"y":540,"wires":[["173071e48fe1d216"]]},{"id":"099ba1cfc40f8efb","type":"function","z":"7dc69f87fffada86","name":"msg.payload[0]","func":"return { payload: msg.payload[0] };","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1340,"y":540,"wires":[["3b3f0a499a8b311a"]]},{"id":"159c10536f240f1e","type":"switch","z":"7dc69f87fffada86","name":"!R60?","property":"systemType","propertyType":"global","rules":[{"t":"neq","v":"R60","vt":"str"},{"t":"eq","v":"R60","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":490,"y":1300,"wires":[["e8934c2dd002f564"],["cfbf7493664a7c75"]]},{"id":"9bc20349283976a8","type":"switch","z":"7dc69f87fffada86","name":"!R60?","property":"systemType","propertyType":"global","rules":[{"t":"neq","v":"R60","vt":"str"},{"t":"eq","v":"R60","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":490,"y":1180,"wires":[["46d51034819d2e57"],["916e40fed0938416"]]},{"id":"830b4034191ca453","type":"function","z":"7dc69f87fffada86","name":"FC6 - Preset Single Register (Addr:10, Reg:24)","func":"return {payload: { value: msg.payload, 'fc': 6, 'unitid': 10, 'address': 24, 'quantity': 1 }};","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":700,"y":280,"wires":[["173071e48fe1d216"]]},{"id":"f14df927c1afee42","type":"link in","z":"7dc69f87fffada86","name":"link in IgnitionTime","links":["b108a398543f4075"],"x":465,"y":280,"wires":[["830b4034191ca453"]]},{"id":"1fdff9b53027673c","type":"function","z":"7dc69f87fffada86","name":"FC6 - Preset Single Register (Addr:10, Reg:7)","func":"return {payload: { value: msg.payload, 'fc': 6, 'unitid': 10, 'address': 7, 'quantity': 1 }};","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":700,"y":200,"wires":[["173071e48fe1d216"]]},{"id":"83f1cc1bdff22594","type":"link in","z":"7dc69f87fffada86","name":"link in HorizPosCounter","links":["df2b9beb755ab7e6","19f0705ab06b7a96","028b768c4231a766","d6f9cfaef56beb34","f1ac2345f0efabad"],"x":465,"y":200,"wires":[["1fdff9b53027673c"]]},{"id":"ba9a61dc76de7986","type":"function","z":"7dc69f87fffada86","name":"FC6 - Preset Single Register (Addr:10, Reg:8)","func":"return {payload: { value: msg.payload, 'fc': 6, 'unitid': 10, 'address': 8, 'quantity': 1 }};","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":700,"y":240,"wires":[["173071e48fe1d216"]]},{"id":"21ef1f1dabe04bb2","type":"link in","z":"7dc69f87fffada86","name":"link in VertPosCounter","links":["dee9a61129167db0","bcac5efc59b31124","8b27ad56e07adcf3","38a9b0640c52b3db","6465015e58c642e7"],"x":465,"y":240,"wires":[["ba9a61dc76de7986"]]},{"id":"151a96f93cafd5ef","type":"inject","z":"7dc69f87fffada86","name":"Ask for FW Rev. & Build Date at Startup","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":true,"onceDelay":0.1,"topic":"","payload":"3","payloadType":"num","x":260,"y":740,"wires":[["f586491c05181d8d"]]},{"id":"f586491c05181d8d","type":"trigger","z":"7dc69f87fffada86","name":"","op1":"3","op2":"3","op1type":"num","op2type":"num","duration":"100","extend":true,"overrideDelay":false,"units":"ms","reset":"","bytopic":"all","topic":"topic","outputs":1,"x":180,"y":800,"wires":[["eb98b546d77fa777"]]},{"id":"80dd9178d67057ba","type":"function","z":"7dc69f87fffada86","name":"Process String","func":"node.status({ fill: \"green\", shape: \"ring\", text: \"Rev.:\" + msg.payload.sFWDescriptionRev + \" Date: \" + msg.payload.sFWDescriptionDate });\nreturn [\n    { payload: msg.payload.sFWDescriptionRev },\n    { payload: msg.payload.sFWDescriptionDate }\n];","outputs":2,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1140,"y":960,"wires":[["48cf95df76c8ea6b"],["3eb42f4f20fe4d23"]]},{"id":"8084a9ce0c0bc3a1","type":"buffer-parser","z":"7dc69f87fffada86","name":"","data":"payload","dataType":"msg","specification":"spec","specificationType":"ui","items":[{"type":"ascii","name":"sFWDescriptionDate","offset":0,"length":11,"offsetbit":0,"scale":"1","mask":""},{"type":"ascii","name":"sFWDescriptionRev","offset":12,"length":4,"offsetbit":0,"scale":"1","mask":""}],"swap1":"","swap2":"","swap3":"","swap1Type":"swap","swap2Type":"swap","swap3Type":"swap","msgProperty":"payload","msgPropertyType":"str","resultType":"keyvalue","resultTypeType":"return","multipleResult":false,"fanOutMultipleResult":false,"setTopic":true,"outputs":1,"x":950,"y":960,"wires":[["80dd9178d67057ba"]]},{"id":"a4f179828a1edafd","type":"trigger","z":"7dc69f87fffada86","name":"","op1":"","op2":"0","op1type":"pay","op2type":"str","duration":"-200","extend":false,"overrideDelay":false,"units":"ms","reset":"","bytopic":"all","topic":"topic","outputs":1,"x":180,"y":200,"wires":[["27b7d503378fc521"]]},{"id":"54188a2ecaa446a1","type":"delay","z":"7dc69f87fffada86","name":"","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"8","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":190,"y":540,"wires":[["27b7d503378fc521"]]},{"id":"cd24d1a63782f89e","type":"function","z":"7dc69f87fffada86","name":"FC6 - Preset Single Register (Addr:10, Reg:50)","func":"let respons = 0;\nif((msg.payload===true) || (msg.payload===1)) {\n    respons = 1;\n}\nreturn {payload: { value: respons, 'fc': 6, 'unitid': 10, 'address': 50, 'quantity': 1 }};","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":700,"y":440,"wires":[["173071e48fe1d216"]]},{"id":"07fc8be7348b9527","type":"switch","z":"7dc69f87fffada86","name":"Slave Panel Enabled","property":"SlavePanelEnable","propertyType":"global","rules":[{"t":"true"}],"checkall":"true","repair":false,"outputs":1,"x":1220,"y":1860,"wires":[["abb7bc32ecb7f80e"]]},{"id":"c50c7ccb73a434ed","type":"function","z":"7dc69f87fffada86","name":"Slave JS","func":"let myInput = 0;\nlet HSpeedIndex = Math.round(global.get(\"H260\") / 10);\nlet myR60HorizLookup = global.get(\"myR60HorizLookup\");\nlet VSpeedIndex = Math.round(global.get(\"H261\") / 10);\nlet myR60VertLookup = global.get(\"myR60VertLookup\");\nlet respons = {};\n\nif (!msg.payload.UDR.JS_Right) {\n    respons[\"myHorInput\"] = Math.round(myR60HorizLookup.table[HSpeedIndex] * 0x7FFF / 100);\n} else if (!msg.payload.L.JS_Left) {\n    respons[\"myHorInput\"] = -Math.round(myR60HorizLookup.table[HSpeedIndex] * 0x7FFF / 100);\n} else {\n    respons[\"myHorInput\"] = 0;\n}\n\n// Down?\nif (!msg.payload.UDR.JS_Down) {\n    respons[\"myVertInput\"] = -(Math.round(myR60VertLookup.table[VSpeedIndex] * 0x7FFF / 100));\n}\n// Up?\nelse if (!msg.payload.UDR.JS_Up) {\n    respons[\"myVertInput\"] = Math.round(myR60VertLookup.table[VSpeedIndex] * 0x7FFF / 100);\n}\n// No Action\nelse {\n    respons[\"myVertInput\"] = 0;\n}\n\nreturn {payload: respons, topic: \"SJ\"}","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1620,"y":1920,"wires":[["d215d36952795dbe"]],"info":"//let  = msg.payload;\r\n/*\r\nmsg.payload = {\r\n  JS_Down: false, // Single boolean value\r\n  MDFocusFault: false, // Single boolean value\r\n  LampOnBtn: false, // Single boolean value\r\n  RlyLampOn: false, // Single boolean value\r\n  JS_Up: false, // Single boolean value\r\n  RlyStep: false, // Single boolean value\r\n  FocusEndOut: false, // Single boolean value\r\n  FocusEndIn: false, // Single boolean value\r\n  JS_Right: false, // Single boolean value\r\n  VertSpeedNeg: false, // Single boolean value\r\n*/\r\n\r\nlet myInput = 0;\r\nlet HSpeedIndex = Math.round(global.get(\"Horizontal_speed\") / 10);\r\nlet myR60HorizLookup = global.get(\"myR60HorizLookup\");\r\nlet VSpeedIndex = Math.round(global.get(\"Vertical_speed\") / 10);\r\nlet myR60VertLookup = global.get(\"myR60VertLookup\");\r\n\r\n// Left?\r\n//if ((regW.W0 & 0x0001) !== 0) {\r\n//    myInput = (~(Math.round((myR60HorizLookup.table[HSpeedIndex] * 0x7FFF / 100))) + 1) & 0xFFFF;\r\n//}\r\n\r\n// Right?\r\nif (!msg.payload.JS_Right) {\r\n    myInput = Math.round(myR60HorizLookup.table[HSpeedIndex] * 0x7FFF / 100);\r\n}\r\n\r\n//if ((regW.W50 & 0x000C) === 0) {\r\n    global.set(\"HorInput\", myInput);\r\n//}\r\n\r\nlet myVInput = 0;\r\n\r\n// Down?\r\nif (!msg.payload.JS_Down) {\r\n    myVInput = (~(Math.round((myR60VertLookup.table[VSpeedIndex] * 0x7FFF / 100))) + 1) & 0xFFFF;\r\n}\r\n\r\n// Up?\r\nif (!msg.payload.JS_Up) {\r\n    myVInput = Math.round(myR60VertLookup.table[VSpeedIndex] * 0x7FFF / 100);\r\n}\r\n\r\n//if ((regW.W50 & 0x0003) === 0) {\r\n    global.set(\"VertInput\", myVInput);\r\n//}\r\n\r\nreturn { payload: msg.payload };"},{"id":"d215d36952795dbe","type":"link out","z":"7dc69f87fffada86","name":"link out Slave Joystick UDR","mode":"link","links":["767f8aaf1be33f76"],"x":1735,"y":1920,"wires":[]},{"id":"6f0675ee2bda6529","type":"switch","z":"7dc69f87fffada86","name":"Slave Panel Enabled","property":"SlavePanelEnable","propertyType":"global","rules":[{"t":"true"}],"checkall":"true","repair":false,"outputs":1,"x":1060,"y":2100,"wires":[["1d6ebe1820b570ed"]]},{"id":"1d6ebe1820b570ed","type":"function","z":"7dc69f87fffada86","name":"Slave JS L","func":"let respons = {};\n\nrespons[\"JS_Left\"] = msg.payload.JS_Left;\n\nreturn {payload: respons, topic: \"L\"}","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1270,"y":2100,"wires":[["4516a3f27a6865a6"]]},{"id":"27b7d503378fc521","type":"subflow:6bb57b6db6c2449d","z":"7dc69f87fffada86","name":"","x":390,"y":540,"wires":[["0dc1ea745f4426f5","caa818f65ceae0b9"]]},{"id":"7f670829f110aced","type":"smooth","z":"7dc69f87fffada86","name":"","property":"payload","action":"mean","count":"5","round":"","mult":"single","reduce":false,"x":780,"y":1660,"wires":[["e86aaf89efff499b"]]},{"id":"5d27b791096c9241","type":"link in","z":"7dc69f87fffada86","name":"link in 151_00","links":["3ce3ecff6a5c1c35"],"x":725,"y":1980,"wires":[["95a7d9fcb36c56d6"]]},{"id":"95a7d9fcb36c56d6","type":"function","z":"7dc69f87fffada86","name":"Last PORT C","func":"node.status({ text: global.get(\"PORTC\").HighTemp });\n\nreturn {payload: global.get(\"PORTC\")};","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":850,"y":1980,"wires":[["4ed35a8b956e3f71"]]},{"id":"26985e372b39c6ce","type":"link in","z":"7dc69f87fffada86","name":"link in SlavePanelEnable","links":["618b21a955fd1543"],"x":465,"y":440,"wires":[["cd24d1a63782f89e"]]},{"id":"4516a3f27a6865a6","type":"join","z":"7dc69f87fffada86","name":"","mode":"custom","build":"object","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":true,"timeout":"","count":"2","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"num","reduceFixup":"","x":1470,"y":1920,"wires":[["c50c7ccb73a434ed"]]},{"id":"abb7bc32ecb7f80e","type":"function","z":"7dc69f87fffada86","name":"Slave JS U/D/R","func":"let respons = {};\n\nrespons[\"JS_Up\"] = msg.payload.JS_Up;\nrespons[\"JS_Down\"] = msg.payload.JS_Down;\nrespons[\"JS_Right\"] = msg.payload.JS_Right;\n\nreturn {payload: respons, topic: \"UDR\"}","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1440,"y":1860,"wires":[["4516a3f27a6865a6"]]},{"id":"7a36df0161c0cb4f","type":"function","z":"7dc69f87fffada86","name":"Update Focus double command","func":"let regW = global.get(\"regW\");\n\nif(msg.payload.focusDoubleCmd) {\n    regW.W32 |= 0b100000000000;\n} else {\n    regW.W32 &= ~(0b100000000000);\n}\n\nreturn {payload: regW.W32};","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1830,"y":1400,"wires":[["5d9c02fd2fbaf5c6"]]},{"id":"9485c489bd3335d3","type":"rbe","z":"7dc69f87fffada86","name":"","func":"rbe","gap":"","start":"","inout":"out","septopics":true,"property":"payload.focusDoubleCmd","topi":"topic","x":1610,"y":1400,"wires":[["7a36df0161c0cb4f"]]},{"id":"5d9c02fd2fbaf5c6","type":"link out","z":"7dc69f87fffada86","name":"link out 57","mode":"link","links":["13a43e121be8adee"],"x":2015,"y":1400,"wires":[]},{"id":"2372b15a926a1742","type":"function","z":"7dc69f87fffada86","name":"FC6 - Preset Single Register (Addr:10, Reg:41)","func":"let Raw= Math.round(803.662524524*global.get(\"SystemMaxPowerVert\"));\nreturn {payload: { value: Raw, 'fc': 6, 'unitid': 10, 'address': 41, 'quantity': 1 }};","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":700,"y":360,"wires":[["173071e48fe1d216"]]},{"id":"e2cd45968c86489c","type":"function","z":"7dc69f87fffada86","name":"FC6 - Preset Single Register (Addr:10, Reg:40)","func":"let Raw= Math.round(803.662524524*global.get(\"SystemMaxPowerHoriz\"));\nreturn {payload: { value: Raw, 'fc': 6, 'unitid': 10, 'address': 40, 'quantity': 1 }};","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":700,"y":320,"wires":[["173071e48fe1d216"]]},{"id":"630fb9a5dc0d271b","type":"link in","z":"7dc69f87fffada86","name":"link in SMPH","links":["17aa85718a1f7bc9"],"x":465,"y":320,"wires":[["e2cd45968c86489c"]]},{"id":"687871e70fb28bfc","type":"link in","z":"7dc69f87fffada86","name":"link in SMPV","links":["e84a45a961ac4cc1"],"x":465,"y":360,"wires":[["2372b15a926a1742"]]},{"id":"713504762c77fcf7","type":"change","z":"7dc69f87fffada86","name":"set","rules":[{"t":"set","p":"payload","pt":"msg","to":"Overcurrent detected!","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1270,"y":1540,"wires":[["478da53815e4845a"]]},{"id":"07ebc3e17caea303","type":"switch","z":"7dc69f87fffada86","name":"","property":"payload","propertyType":"msg","rules":[{"t":"gt","v":"2","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":1130,"y":1540,"wires":[["713504762c77fcf7"]]},{"id":"edccf337c46c11f3","type":"function","z":"7dc69f87fffada86","name":"Mask if Focus Limp mode","func":"if(msg.payload.focusDoubleCmd) {\n  if(global.get(\"LimpModeFocus\")) {\n    msg.payload.focusDoubleCmd = false;\n  }\n}\n\nreturn msg;","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1170,"y":1440,"wires":[["1336bc93a89fbfe5"]]},{"id":"56e405ec0b1ff8b5","type":"function","z":"7dc69f87fffada86","name":"FC6 - Preset Single Register (Addr:10, Reg:43)","func":"let Raw= Math.round(3090.6182244*global.get(\"SystemMaxPowerFocus\"));\nreturn {payload: { value: Raw, 'fc': 6, 'unitid': 10, 'address': 43, 'quantity': 1 }};","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":700,"y":400,"wires":[["173071e48fe1d216"]]},{"id":"8f90c587c769e839","type":"link in","z":"7dc69f87fffada86","name":"link in SMPF","links":["341334563f2e68f4"],"x":465,"y":400,"wires":[["56e405ec0b1ff8b5"]]},{"id":"478da53815e4845a","type":"delay","z":"7dc69f87fffada86","name":"","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":true,"allowrate":false,"outputs":1,"x":1430,"y":1540,"wires":[["5de44816b81135dd"]]},{"id":"6fb7cf022618bcaf","type":"modbus-response","z":"7dc69f87fffada86","name":"","registerShowMax":20,"x":1110,"y":880,"wires":[]},{"id":"320fd41b129bb82d","type":"modbus-response","z":"7dc69f87fffada86","name":"","registerShowMax":20,"x":750,"y":660,"wires":[]},{"id":"3b3f0a499a8b311a","type":"modbus-flex-write","z":"7dc69f87fffada86","name":"","showStatusActivities":false,"showErrors":false,"showWarnings":true,"server":"6f22240d6bfd8a8a","emptyMsgOnFail":false,"keepMsgProperties":false,"delayOnStart":false,"startDelayTime":"","x":350,"y":660,"wires":[["33b03ff429cd46a8","eb98b546d77fa777"],[]]},{"id":"738bf0a795eaeb88","type":"modbus-flex-sequencer","z":"7dc69f87fffada86","name":"","sequences":[{"name":"","unitid":"10","fc":"FC3","address":"1","quantity":"1"}],"server":"6f22240d6bfd8a8a","showStatusActivities":false,"showErrors":false,"showWarnings":true,"logIOActivities":false,"useIOFile":false,"ioFile":"","useIOForPayload":false,"emptyMsgOnFail":false,"keepMsgProperties":false,"delayOnStart":false,"startDelayTime":"","x":380,"y":900,"wires":[["b751c3dff1253eba","4747006220ad3f70"],[]]},{"id":"173071e48fe1d216","type":"queue","z":"7dc69f87fffada86","name":"MODBUS Send Queue","input":"payload","inputType":"msg","addFields":"ABC","addFieldsType":"str","pourType":"interval","pourTypeType":"pourType","pourTime":"0.1","pourTimeType":"num","pourAmount":"1","pourAmountType":"num","maxUseMemory":"90","x":1110,"y":540,"wires":[["099ba1cfc40f8efb"]]},{"id":"bff56790ef28963c","type":"ui_text","z":"7dc69f87fffada86","group":"5ff70e0f4e7a65cc","order":3,"width":0,"height":0,"name":"","label":"Raw Horizontal Pos.","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":"","color":"#000000","x":1480,"y":1200,"wires":[]},{"id":"231e2a7ef8edbffc","type":"ui_text","z":"7dc69f87fffada86","group":"5ff70e0f4e7a65cc","order":7,"width":0,"height":0,"name":"","label":"Raw Vertical Pos.","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":"","color":"#000000","x":1470,"y":1320,"wires":[]},{"id":"d71b832e7f911e52","type":"ui_text","z":"7dc69f87fffada86","group":"3c410cd6cbd2d8fc","order":5,"width":0,"height":0,"name":"","label":"R5 Horizontal speed index","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#000000","x":840,"y":2260,"wires":[]},{"id":"fb5c402788f9ccae","type":"ui_text","z":"7dc69f87fffada86","group":"3c410cd6cbd2d8fc","order":5,"width":0,"height":0,"name":"","label":"R5 Vertical speed index","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#000000","x":830,"y":2300,"wires":[]},{"id":"48cf95df76c8ea6b","type":"ui_text","z":"7dc69f87fffada86","group":"04e42a9e17402047","order":2,"width":0,"height":0,"name":"","label":"FW Rev.","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#000000","x":1320,"y":940,"wires":[]},{"id":"3eb42f4f20fe4d23","type":"ui_text","z":"7dc69f87fffada86","group":"04e42a9e17402047","order":3,"width":0,"height":0,"name":"","label":"FW Build Date","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#000000","x":1340,"y":980,"wires":[]},{"id":"2594e8ff344b1fd4","type":"ui_gauge","z":"7dc69f87fffada86","name":"","group":"6f03721c41f2c6d6","order":4,"width":"3","height":"3","gtype":"gage","title":"Focus","label":"A","format":"{{value}}","min":0,"max":"1","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","diff":false,"className":"","x":990,"y":1500,"wires":[]},{"id":"d7a4fe776f22bf8a","type":"ui_gauge","z":"7dc69f87fffada86","name":"","group":"6f03721c41f2c6d6","order":3,"width":"3","height":"3","gtype":"gage","title":"Vert","label":"A","format":"{{value}}","min":0,"max":"5","colors":["#00b500","#e6e600","#ca3838"],"seg1":"2.0","seg2":"2.3","diff":false,"className":"","x":990,"y":1540,"wires":[]},{"id":"b3b992fd506ad0c9","type":"ui_gauge","z":"7dc69f87fffada86","name":"","group":"6f03721c41f2c6d6","order":2,"width":"3","height":"3","gtype":"gage","title":"Horiz","label":"A","format":"{{value}}","min":0,"max":"5","colors":["#00b500","#e6e600","#ca3838"],"seg1":"2.0","seg2":"2.3","diff":false,"className":"","x":990,"y":1580,"wires":[]},{"id":"ae858226604dfc34","type":"ui_gauge","z":"7dc69f87fffada86","name":"","group":"6f03721c41f2c6d6","order":1,"width":"3","height":"3","gtype":"gage","title":"Power Supply","label":"V","format":"{{value}}","min":0,"max":"36","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","diff":false,"className":"","x":840,"y":1620,"wires":[]},{"id":"a785f651d6fafc8f","type":"ui_gauge","z":"7dc69f87fffada86","name":"","group":"6f03721c41f2c6d6","order":5,"width":"3","height":"3","gtype":"donut","title":"Focus Pos","label":"%","format":"{{value}}","min":0,"max":"100","colors":["#00b500","#00e61b","#3acb57"],"seg1":"","seg2":"","diff":false,"className":"","x":1010,"y":1680,"wires":[]},{"id":"5de44816b81135dd","type":"ui_toast","z":"7dc69f87fffada86","position":"top right","displayTime":"3","highlight":"","sendall":true,"outputs":0,"ok":"OK","cancel":"","raw":false,"className":"","topic":"","name":"","x":1630,"y":1540,"wires":[]},{"id":"ccd2bee72080cc2d","type":"bit-decode","z":"7dc69f87fffada86","name":"","bits":"6a635b6fe4cb76c7","x":810,"y":1740,"wires":[["e50a7196e4fc95bc","dc2c9fee1f3d0484","07fc8be7348b9527"]]},{"id":"40269633abc701a4","type":"bit-decode","z":"7dc69f87fffada86","name":"","bits":"8cc1fb1e05e0f783","x":810,"y":1860,"wires":[["4284fc4805df2e9e"]]},{"id":"631fcef90269c476","type":"bit-decode","z":"7dc69f87fffada86","name":"","bits":"fb9d13d3e2f609d7","x":810,"y":1900,"wires":[["952167cb3768f978","a1d12c10ef725438","4ed35a8b956e3f71","6f0675ee2bda6529"]]},{"id":"3d8da29b0a4a60f0","type":"bit-decode","z":"7dc69f87fffada86","name":"","bits":"6e2f66967afc9efd","x":950,"y":2220,"wires":[["8d03f44a3521f057","0d2426ee8d0fd9a5"]]},{"id":"f070db581ec87f08","type":"bit-decode","z":"7dc69f87fffada86","name":"","bits":"58278f54b45791c3","x":930,"y":1440,"wires":[["edccf337c46c11f3"]]},{"id":"eed2318dba1b804d","type":"ui_led","z":"7dc69f87fffada86","order":4,"group":"6b1cfed8797c4903","width":0,"height":0,"label":"Focus End Out","labelPlacement":"left","labelAlignment":"left","colorForValue":[{"color":"#646464","value":"false","valueType":"bool"},{"color":"#ffff00","value":"true","valueType":"bool"}],"allowColorForValueInMessage":false,"shape":"circle","showGlow":true,"name":"FocusEndOut","x":1580,"y":1680,"wires":[]},{"id":"620ff4da5cdaea34","type":"ui_led","z":"7dc69f87fffada86","order":5,"group":"6b1cfed8797c4903","width":0,"height":0,"label":"Focus End In","labelPlacement":"left","labelAlignment":"left","colorForValue":[{"color":"#646464","value":"false","valueType":"bool"},{"color":"#ffff00","value":"true","valueType":"bool"}],"allowColorForValueInMessage":false,"shape":"circle","showGlow":true,"name":"Focus End In","x":1570,"y":1720,"wires":[]},{"id":"4747006220ad3f70","type":"debug","z":"7dc69f87fffada86","name":"debug 1","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":640,"y":980,"wires":[]},{"id":"b460046fb8fcf5c0","type":"comment","z":"eeab6ec5a969349e","name":"Initialize some working variables","info":"","x":190,"y":560,"wires":[]},{"id":"3b8e6fda523ac133","type":"change","z":"eeab6ec5a969349e","name":"","rules":[{"t":"set","p":"SLStatus","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":590,"y":660,"wires":[["1708345cfa16ac41"]]},{"id":"e88a736eb299a6c3","type":"inject","z":"eeab6ec5a969349e","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":true,"onceDelay":0.1,"topic":"","payload":"0","payloadType":"num","x":130,"y":620,"wires":[["a0826312040379ff","1c115483c89cf3f6","11024bad25082a3c","fa96272d0f01ad5f","4daabf9e9cc7ccdc","8dce26a7330f3f06","6dd76de2ca27ba90","f5e5f87d824f368b"]]},{"id":"1708345cfa16ac41","type":"link out","z":"eeab6ec5a969349e","name":"link out Init","mode":"link","links":["8e56abeee1b1cef2"],"x":735,"y":660,"wires":[]},{"id":"41323d13b9d20de8","type":"comment","z":"eeab6ec5a969349e","name":"Setup Style Sheet","info":"","x":150,"y":1700,"wires":[]},{"id":"1c115483c89cf3f6","type":"change","z":"eeab6ec5a969349e","name":"","rules":[{"t":"set","p":"myHorizLookupTable","pt":"global","to":"{\"table\":[-100,-94,-89,-83,-77,-71,-66,-60,-54,-49,-43,-37,-31,-26,-20,0,20,26,31,37,43,49,54,60,66,71,77,83,89,94,100]}","tot":"json"}],"action":"","property":"","from":"","to":"","reg":false,"x":410,"y":700,"wires":[[]]},{"id":"11024bad25082a3c","type":"change","z":"eeab6ec5a969349e","name":"","rules":[{"t":"set","p":"myVertLookupTable","pt":"global","to":"{\"table\":[-100,-95,-90,-85,-80,-75,-70,-65,-60,-55,-50,-45,-40,-35,-30,0,30,35,40,45,50,55,60,65,70,75,80,85,90,95,100]}","tot":"json"}],"action":"","property":"","from":"","to":"","reg":false,"x":410,"y":780,"wires":[[]]},{"id":"fa96272d0f01ad5f","type":"change","z":"eeab6ec5a969349e","name":"Init Global variables","rules":[{"t":"set","p":"SWinfo","pt":"global","to":"v.16 2025-08-27","tot":"str"},{"t":"set","p":"lastPanelID","pt":"global","to":"0","tot":"num"},{"t":"set","p":"SLComDetected","pt":"global","to":"false","tot":"bool"},{"t":"set","p":"pktNum","pt":"global","to":"0","tot":"num"},{"t":"set","p":"focusInput","pt":"global","to":"0","tot":"num"},{"t":"set","p":"Command","pt":"global","to":"0","tot":"num"},{"t":"set","p":"myCommand","pt":"global","to":"0","tot":"num"},{"t":"set","p":"VertInput","pt":"global","to":"0","tot":"num"},{"t":"set","p":"HorInput","pt":"global","to":"0","tot":"num"},{"t":"set","p":"Horizontal_pos_last_raw","pt":"global","to":"-9999.999","tot":"num"},{"t":"set","p":"Vertical_pos_last_raw","pt":"global","to":"-9999.999","tot":"num"},{"t":"set","p":"LampOnOff","pt":"global","to":"2","tot":"num"},{"t":"set","p":"Focus_Position_Raw","pt":"global","to":"500.00","tot":"num"},{"t":"set","p":"horizPosSign","pt":"global","to":"1","tot":"num"},{"t":"set","p":"vertPosSign","pt":"global","to":"1","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":370,"y":620,"wires":[["73fd99befb804207"]]},{"id":"902a2270cf1641ad","type":"comment","z":"eeab6ec5a969349e","name":"System","info":"","x":110,"y":80,"wires":[]},{"id":"4789fa369f7d43fd","type":"change","z":"eeab6ec5a969349e","name":"","rules":[{"t":"set","p":"systemType","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":500,"y":140,"wires":[["1e7610d930229253"]]},{"id":"aafd75875cad01d4","type":"function","z":"eeab6ec5a969349e","name":"Set SLComDetected & R60Mask based on selection","func":"if (msg.payload === \"R50\") {\n    global.set(\"SLComDetected\", false);\n} else {\n    global.set(\"SLComDetected\", true);\n}\n\nlet R60Mask = global.get(\"R60Mask\"); \nif (msg.payload === \"R60\") {\n    R60Mask |= 0x0080;\n} else {\n    R60Mask &= ~(0x0080);\n}\nglobal.set(\"R60Mask\", R60Mask);\n\nnode.status({ text: \"R50:\" + msg.payload + \" R60 Mask: 0x\" + R60Mask.toString(16) });\n","outputs":0,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":1000,"y":140,"wires":[]},{"id":"73df5c8645b82aee","type":"comment","z":"eeab6ec5a969349e","name":"Position & Puls Ratio settings","info":"","x":180,"y":1140,"wires":[]},{"id":"9eea56372c3f2781","type":"change","z":"eeab6ec5a969349e","name":"","rules":[{"t":"set","p":"myHorizRatio","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":610,"y":1200,"wires":[[]]},{"id":"cd5a8375230e96b1","type":"change","z":"eeab6ec5a969349e","name":"","rules":[{"t":"set","p":"myVertRatio","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":560,"y":1460,"wires":[[]]},{"id":"4f6db43e6d412dcf","type":"inject","z":"eeab6ec5a969349e","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":true,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":150,"y":1880,"wires":[["88f69779050b0679","6ed1697744f4e60a","56f284650ddc0def","01b8c3ce9c84141b","192a422c25b7f38f","77f51b591fc0d375"]]},{"id":"88f69779050b0679","type":"change","z":"eeab6ec5a969349e","name":"","rules":[{"t":"set","p":"Physical_input","pt":"global","to":"0x0030","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":470,"y":1880,"wires":[["7cd2e5ef86e859af"]]},{"id":"6ed1697744f4e60a","type":"change","z":"eeab6ec5a969349e","name":"","rules":[{"t":"set","p":"Physical_output","pt":"global","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":470,"y":1920,"wires":[["7cd2e5ef86e859af"]]},{"id":"7cd2e5ef86e859af","type":"link out","z":"eeab6ec5a969349e","name":"link out Initialized","mode":"link","links":["ba26879509f8b5e2","13a43e121be8adee"],"x":735,"y":1880,"wires":[]},{"id":"717c4fdaec70b8e7","type":"comment","z":"eeab6ec5a969349e","name":"Initialize some working variables","info":"","x":190,"y":1820,"wires":[]},{"id":"56f284650ddc0def","type":"change","z":"eeab6ec5a969349e","name":"","rules":[{"t":"set","p":"Focus_Position","pt":"global","to":"0.0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":470,"y":1960,"wires":[[]]},{"id":"01b8c3ce9c84141b","type":"change","z":"eeab6ec5a969349e","name":"","rules":[{"t":"set","p":"H326","pt":"global","to":"732","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":440,"y":2000,"wires":[[]]},{"id":"192a422c25b7f38f","type":"change","z":"eeab6ec5a969349e","name":"","rules":[{"t":"set","p":"H328","pt":"global","to":"732","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":440,"y":2040,"wires":[[]]},{"id":"77f51b591fc0d375","type":"buffer-maker","z":"eeab6ec5a969349e","name":"All W-Registers","specification":"spec","specificationType":"ui","items":[{"name":"W0","type":"uint16le","length":1,"dataType":"num","data":"0"},{"name":"W1","type":"uint16le","length":1,"dataType":"num","data":"0"},{"name":"W2","type":"uint16le","length":1,"dataType":"num","data":"0"},{"name":"W10","type":"uint16le","length":1,"dataType":"num","data":"0"},{"name":"W11","type":"uint16le","length":1,"dataType":"num","data":"0"},{"name":"W13","type":"uint16le","length":1,"dataType":"num","data":"0"},{"name":"W15","type":"uint16le","length":1,"dataType":"num","data":"0"},{"name":"W20","type":"uint16le","length":1,"dataType":"num","data":"0"},{"name":"W30","type":"uint16le","length":1,"dataType":"num","data":"0"},{"name":"W31","type":"uint16le","length":1,"dataType":"num","data":"0"},{"name":"W32","type":"uint16le","length":1,"dataType":"num","data":"0"},{"name":"W33","type":"uint16le","length":1,"dataType":"num","data":"0"},{"name":"W34","type":"uint16le","length":1,"dataType":"num","data":"0"},{"name":"W50","type":"uint16le","length":1,"dataType":"num","data":"0"},{"name":"W51","type":"int16le","length":1,"dataType":"num","data":"0"},{"name":"W52","type":"int16le","length":1,"dataType":"num","data":"0"},{"name":"W53","type":"int16le","length":1,"dataType":"num","data":"0"},{"name":"W54","type":"uint16le","length":1,"dataType":"num","data":"0"},{"name":"W56","type":"uint16le","length":1,"dataType":"num","data":"0"},{"name":"W70","type":"uint16le","length":1,"dataType":"num","data":"0"},{"name":"W100","type":"uint16le","length":1,"dataType":"num","data":"0"},{"name":"W105","type":"uint16le","length":1,"dataType":"num","data":"0"},{"name":"W110","type":"uint16le","length":1,"dataType":"num","data":"0"},{"name":"W150","type":"uint16le","length":1,"dataType":"num","data":"0"},{"name":"W152","type":"int16le","length":1,"dataType":"num","data":"0"},{"name":"W153","type":"int16le","length":1,"dataType":"num","data":"0"},{"name":"W160","type":"uint16le","length":1,"dataType":"num","data":"0"},{"name":"W163","type":"int16le","length":1,"dataType":"num","data":"0"},{"name":"W164","type":"int16le","length":1,"dataType":"num","data":"0"},{"name":"W170","type":"uint16le","length":1,"dataType":"num","data":"0"},{"name":"W206","type":"uint16le","length":1,"dataType":"num","data":"0"},{"name":"W208","type":"int16le","length":1,"dataType":"num","data":"0"},{"name":"W210","type":"int16le","length":1,"dataType":"num","data":"0"},{"name":"W212","type":"int16le","length":1,"dataType":"num","data":"0"},{"name":"W220","type":"int16le","length":1,"dataType":"num","data":"0"},{"name":"W230","type":"int16le","length":1,"dataType":"num","data":"0"},{"name":"W300","type":"uint16le","length":1,"dataType":"num","data":"0"},{"name":"W301","type":"uint16le","length":1,"dataType":"num","data":"0"},{"name":"W309","type":"int16le","length":1,"dataType":"num","data":"0"},{"name":"W310","type":"uint16le","length":1,"dataType":"num","data":"0"},{"name":"W311","type":"uint16le","length":1,"dataType":"num","data":"0"},{"name":"W312","type":"int16le","length":1,"dataType":"num","data":"0"},{"name":"W320","type":"uint16le","length":1,"dataType":"num","data":"0"}],"swap1":"","swap2":"","swap3":"","swap1Type":"swap","swap2Type":"swap","swap3Type":"swap","msgProperty":"payload","msgPropertyType":"str","x":180,"y":1980,"wires":[["0762ed07acf5923a"]]},{"id":"2d63effb880a4179","type":"change","z":"eeab6ec5a969349e","name":"","rules":[{"t":"set","p":"regW","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":440,"y":2080,"wires":[["7cd2e5ef86e859af"]]},{"id":"0762ed07acf5923a","type":"buffer-parser","z":"eeab6ec5a969349e","name":"Make it an Object","data":"payload","dataType":"msg","specification":"spec","specificationType":"ui","items":[{"type":"uint16le","name":"W0","offset":0,"length":1,"offsetbit":0,"scale":"1","mask":""},{"type":"uint16le","name":"W1","offset":2,"length":1,"offsetbit":0,"scale":"1","mask":""},{"type":"uint16le","name":"W2","offset":4,"length":1,"offsetbit":0,"scale":"1","mask":""},{"type":"uint16le","name":"W10","offset":6,"length":1,"offsetbit":0,"scale":"1","mask":""},{"type":"uint16le","name":"W11","offset":8,"length":1,"offsetbit":0,"scale":"1","mask":""},{"type":"uint16le","name":"W13","offset":10,"length":1,"offsetbit":0,"scale":"1","mask":""},{"type":"uint16le","name":"W15","offset":12,"length":1,"offsetbit":0,"scale":"1","mask":""},{"type":"uint16le","name":"W20","offset":14,"length":1,"offsetbit":0,"scale":"1","mask":""},{"type":"uint16le","name":"W30","offset":16,"length":1,"offsetbit":0,"scale":"1","mask":""},{"type":"uint16le","name":"W31","offset":18,"length":1,"offsetbit":0,"scale":"1","mask":""},{"type":"uint16le","name":"W32","offset":20,"length":1,"offsetbit":0,"scale":"1","mask":""},{"type":"uint16le","name":"W33","offset":22,"length":1,"offsetbit":0,"scale":"1","mask":""},{"type":"uint16le","name":"W34","offset":24,"length":1,"offsetbit":0,"scale":"1","mask":""},{"type":"uint16le","name":"W50","offset":26,"length":1,"offsetbit":0,"scale":"1","mask":""},{"type":"int16le","name":"W51","offset":28,"length":1,"offsetbit":0,"scale":"1","mask":""},{"type":"int16le","name":"W52","offset":30,"length":1,"offsetbit":0,"scale":"1","mask":""},{"type":"int16le","name":"W53","offset":32,"length":1,"offsetbit":0,"scale":"1","mask":""},{"type":"uint16le","name":"W54","offset":34,"length":1,"offsetbit":0,"scale":"1","mask":""},{"type":"uint16le","name":"W56","offset":36,"length":1,"offsetbit":0,"scale":"1","mask":""},{"type":"uint16le","name":"W70","offset":38,"length":1,"offsetbit":0,"scale":"1","mask":""},{"type":"uint16le","name":"W100","offset":40,"length":1,"offsetbit":0,"scale":"1","mask":""},{"type":"uint16le","name":"W105","offset":42,"length":1,"offsetbit":0,"scale":"1","mask":""},{"type":"uint16le","name":"W110","offset":44,"length":1,"offsetbit":0,"scale":"1","mask":""},{"type":"uint16le","name":"W150","offset":46,"length":1,"offsetbit":0,"scale":"1","mask":""},{"type":"int16le","name":"W152","offset":48,"length":1,"offsetbit":0,"scale":"1","mask":""},{"type":"int16le","name":"W153","offset":50,"length":1,"offsetbit":0,"scale":"1","mask":""},{"type":"uint16le","name":"W160","offset":52,"length":1,"offsetbit":0,"scale":"1","mask":""},{"type":"int16le","name":"W163","offset":54,"length":1,"offsetbit":0,"scale":"1","mask":""},{"type":"int16le","name":"W164","offset":56,"length":1,"offsetbit":0,"scale":"1","mask":""},{"type":"uint16le","name":"W170","offset":58,"length":1,"offsetbit":0,"scale":"1","mask":""},{"type":"uint16le","name":"W206","offset":60,"length":1,"offsetbit":0,"scale":"1","mask":""},{"type":"int16le","name":"W208","offset":62,"length":1,"offsetbit":0,"scale":"1","mask":""},{"type":"int16le","name":"W210","offset":64,"length":1,"offsetbit":0,"scale":"1","mask":""},{"type":"int16le","name":"W212","offset":66,"length":1,"offsetbit":0,"scale":"1","mask":""},{"type":"int16le","name":"W220","offset":68,"length":1,"offsetbit":0,"scale":"1","mask":""},{"type":"int16le","name":"W230","offset":70,"length":1,"offsetbit":0,"scale":"1","mask":""},{"type":"uint16le","name":"W300","offset":72,"length":1,"offsetbit":0,"scale":"1","mask":""},{"type":"uint16le","name":"W301","offset":74,"length":1,"offsetbit":0,"scale":"1","mask":""},{"type":"int16le","name":"W309","offset":76,"length":1,"offsetbit":0,"scale":"1","mask":""},{"type":"uint16le","name":"W310","offset":78,"length":1,"offsetbit":0,"scale":"1","mask":""},{"type":"uint16le","name":"W311","offset":80,"length":1,"offsetbit":0,"scale":"1","mask":""},{"type":"int16le","name":"W312","offset":82,"length":1,"offsetbit":0,"scale":"1","mask":""},{"type":"uint16le","name":"W320","offset":84,"length":1,"offsetbit":0,"scale":"1","mask":""}],"swap1":"","swap2":"","swap3":"","swap1Type":"swap","swap2Type":"swap","swap3Type":"swap","msgProperty":"payload","msgPropertyType":"str","resultType":"keyvalue","resultTypeType":"return","multipleResult":false,"fanOutMultipleResult":false,"setTopic":false,"outputs":1,"x":230,"y":2080,"wires":[["2d63effb880a4179"]]},{"id":"1a12b33d8d45ae45","type":"change","z":"eeab6ec5a969349e","name":"","rules":[{"t":"set","p":"myVerticalInitValue","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":580,"y":1580,"wires":[[]]},{"id":"a35eca6eadc7f777","type":"link in","z":"eeab6ec5a969349e","name":"link in VerticalInitValue","links":[],"x":405,"y":1620,"wires":[["0926366ebfed5b09"]]},{"id":"f5dd364ac2c894ed","type":"change","z":"eeab6ec5a969349e","name":"","rules":[{"t":"set","p":"myHorizontalInitValue","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":630,"y":1300,"wires":[[]]},{"id":"3d17e03e0afe7721","type":"link in","z":"eeab6ec5a969349e","name":"link in HorizontalInitValue","links":[],"x":445,"y":1340,"wires":[["0758c82c3263d621"]]},{"id":"4daabf9e9cc7ccdc","type":"change","z":"eeab6ec5a969349e","name":"","rules":[{"t":"set","p":"myR60HorizLookup","pt":"global","to":"{\"table\":[29,29,37,44,52,60,68,76,84,92,100]}","tot":"json"}],"action":"","property":"","from":"","to":"","reg":false,"x":410,"y":740,"wires":[[]]},{"id":"8dce26a7330f3f06","type":"change","z":"eeab6ec5a969349e","name":"","rules":[{"t":"set","p":"myR60VertLookup","pt":"global","to":"{\"table\":[29,29,37,44,52,60,68,76,84,92,100]}","tot":"json"}],"action":"","property":"","from":"","to":"","reg":false,"x":400,"y":820,"wires":[[]]},{"id":"1c5ae00957eed15e","type":"function","z":"eeab6ec5a969349e","name":"Command = 0x8000","func":"global.set(\"Command\", 0x8000);\nreturn msg;\n","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":620,"y":2820,"wires":[["0a96a9bab2209496","13c2e2e55affc4b6"]]},{"id":"2a4621b8e6dc84b9","type":"function","z":"eeab6ec5a969349e","name":"Value=0","func":"let setVerticalCounter = 0 * global.get(\"myVertRatio\");\nglobal.set(\"setVerticalCounter\", setVerticalCounter);\nreturn { payload: Math.round(setVerticalCounter) };","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":420,"y":2740,"wires":[["dee9a61129167db0"]]},{"id":"13c2e2e55affc4b6","type":"link out","z":"eeab6ec5a969349e","name":"link out 1","mode":"link","links":["767f8aaf1be33f76"],"x":775,"y":2820,"wires":[]},{"id":"73cb411a85d9ce44","type":"delay","z":"eeab6ec5a969349e","name":"","pauseType":"delay","timeout":"250","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":410,"y":2820,"wires":[["1c5ae00957eed15e"]]},{"id":"66341b0f53eaf9bc","type":"function","z":"eeab6ec5a969349e","name":"Command = 0x4000","func":"global.set(\"Command\", 0x4000);\n\nreturn msg;","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":620,"y":2440,"wires":[["3df13bf78ac11a5a","34fcb78df7365632"]]},{"id":"0a77f1b6efbf31ce","type":"function","z":"eeab6ec5a969349e","name":"Value=0","func":"let setHorizontalCounter = 0 * global.get(\"myHorizRatio\");\nglobal.set(\"setHorizontalCounter\", setHorizontalCounter);\nreturn { payload: Math.round(setHorizontalCounter)};","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":420,"y":2380,"wires":[["df2b9beb755ab7e6"]]},{"id":"34fcb78df7365632","type":"link out","z":"eeab6ec5a969349e","name":"link out 2","mode":"link","links":["767f8aaf1be33f76"],"x":775,"y":2440,"wires":[]},{"id":"4a364ab544a091a0","type":"delay","z":"eeab6ec5a969349e","name":"","pauseType":"delay","timeout":"250","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":410,"y":2440,"wires":[["66341b0f53eaf9bc"]]},{"id":"3df13bf78ac11a5a","type":"delay","z":"eeab6ec5a969349e","name":"","pauseType":"delay","timeout":"250","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":410,"y":2500,"wires":[["100ad830514ca889"]]},{"id":"100ad830514ca889","type":"function","z":"eeab6ec5a969349e","name":"Calibrate Heading","func":"let Ratio = global.get(\"myHorizRatio\");\nlet setHorizontalCounter = global.get(\"setHorizontalCounter\");\nlet result = 0;\n\nresult = setHorizontalCounter / Ratio;\n\nif (!Number.isNaN(result)) {\n\n    global.set(\"Horizontal_pos_act\",result);\n\n}\n\nnode.status({ text: \"Horizontal Pos.: 0x\" + (setHorizontalCounter & 0xFFFF).toString(16) + \"/\" + result });\n\nreturn {payload: result}","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":630,"y":2500,"wires":[["fc99014ac21b4d0e"]]},{"id":"fc99014ac21b4d0e","type":"link out","z":"eeab6ec5a969349e","name":"link out 3","mode":"link","links":["32885a0d66a25f9d"],"x":775,"y":2500,"wires":[]},{"id":"0a96a9bab2209496","type":"delay","z":"eeab6ec5a969349e","name":"","pauseType":"delay","timeout":"250","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":410,"y":2880,"wires":[["d4fca0d3f048a925"]]},{"id":"d4fca0d3f048a925","type":"function","z":"eeab6ec5a969349e","name":"Calibrate Heading","func":"let Ratio = global.get(\"myVertRatio\");\nlet setVerticalCounter = global.get(\"setVerticalCounter\");\nlet result = 0;\n\nresult = setVerticalCounter / Ratio;\n\nif (!Number.isNaN(result)) {\n\n    global.set(\"Vertical_pos_act\",result);\n\n}\n\nnode.status({ text: \"Vertical Pos.: 0x\" + (setVerticalCounter & 0xFFFF).toString(16) + \"/\" + result });\n\nreturn {payload: result}","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":630,"y":2880,"wires":[["f178dad56127a194"]]},{"id":"f178dad56127a194","type":"link out","z":"eeab6ec5a969349e","name":"link out 4","mode":"link","links":["34d601203a1fb526"],"x":775,"y":2880,"wires":[]},{"id":"45eca6e60f83750f","type":"comment","z":"eeab6ec5a969349e","name":"Reset/Init Heading Calibration","info":"","x":180,"y":2180,"wires":[]},{"id":"d236bc5ade70f5e1","type":"comment","z":"eeab6ec5a969349e","name":"Ignition Time","info":"","x":130,"y":3020,"wires":[]},{"id":"b108a398543f4075","type":"link out","z":"eeab6ec5a969349e","name":"link out IgnitionTime","mode":"link","links":["f14df927c1afee42"],"x":435,"y":3080,"wires":[]},{"id":"df2b9beb755ab7e6","type":"link out","z":"eeab6ec5a969349e","name":"link out HorizPosCounter","mode":"link","links":["83f1cc1bdff22594"],"x":535,"y":2380,"wires":[]},{"id":"dee9a61129167db0","type":"link out","z":"eeab6ec5a969349e","name":"link out VertPosCounter","mode":"link","links":["21ef1f1dabe04bb2"],"x":535,"y":2740,"wires":[]},{"id":"6dd76de2ca27ba90","type":"file in","z":"eeab6ec5a969349e","name":"","filename":"SL_Version.txt","filenameType":"str","format":"utf8","chunk":false,"sendError":false,"encoding":"none","allProps":false,"x":360,"y":860,"wires":[["b215c19d8f94f42b"]]},{"id":"b215c19d8f94f42b","type":"function","z":"eeab6ec5a969349e","name":"Add 50","func":"return { payload: 50 + Number(msg.payload) }\n","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":540,"y":860,"wires":[["0e2483499375c704"]]},{"id":"3aaae2c12757f1eb","type":"catch","z":"eeab6ec5a969349e","name":"","scope":null,"uncaught":false,"x":340,"y":920,"wires":[["b192a041abd89f1d"]]},{"id":"6b357f5927818de8","type":"file","z":"eeab6ec5a969349e","name":"","filename":"filename","filenameType":"msg","appendNewline":false,"createDir":false,"overwriteFile":"true","encoding":"none","x":700,"y":920,"wires":[["6dd76de2ca27ba90"]]},{"id":"b192a041abd89f1d","type":"function","z":"eeab6ec5a969349e","name":"Add SL Version","func":"msg.payload = '3';\nreturn msg;","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":520,"y":920,"wires":[["6b357f5927818de8"]]},{"id":"21204ca1514425b7","type":"change","z":"eeab6ec5a969349e","name":"","rules":[{"t":"set","p":"H150","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":280,"y":1040,"wires":[["fda518c345efa07b"]]},{"id":"fda518c345efa07b","type":"link out","z":"eeab6ec5a969349e","name":"link out H150","mode":"link","links":["04c6319b546b47a8"],"x":415,"y":1040,"wires":[]},{"id":"08f49e1564b8a652","type":"change","z":"eeab6ec5a969349e","name":"","rules":[{"t":"set","p":"SystemMaxPowerHoriz","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":720,"y":240,"wires":[["0d9205f85b1731c5"]]},{"id":"43ab67af8dbf5331","type":"change","z":"eeab6ec5a969349e","name":"","rules":[{"t":"set","p":"SystemMaxPowerVert","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":710,"y":340,"wires":[["46477dab55044d2c"]]},{"id":"0d9205f85b1731c5","type":"trigger","z":"eeab6ec5a969349e","name":"","op1":"","op2":"true","op1type":"nul","op2type":"bool","duration":"5","extend":true,"overrideDelay":false,"units":"s","reset":"","bytopic":"all","topic":"topic","outputs":1,"x":960,"y":240,"wires":[["17aa85718a1f7bc9"]]},{"id":"46477dab55044d2c","type":"trigger","z":"eeab6ec5a969349e","name":"","op1":"","op2":"true","op1type":"nul","op2type":"bool","duration":"6","extend":true,"overrideDelay":false,"units":"s","reset":"","bytopic":"all","topic":"topic","outputs":1,"x":960,"y":340,"wires":[["e84a45a961ac4cc1"]]},{"id":"17aa85718a1f7bc9","type":"link out","z":"eeab6ec5a969349e","name":"link out SMPH","mode":"link","links":["630fb9a5dc0d271b"],"x":1075,"y":240,"wires":[]},{"id":"e84a45a961ac4cc1","type":"link out","z":"eeab6ec5a969349e","name":"link out SMPV","mode":"link","links":["687871e70fb28bfc"],"x":1075,"y":340,"wires":[]},{"id":"f1d6c2da03e99c11","type":"change","z":"eeab6ec5a969349e","name":"","rules":[{"t":"set","p":"SystemMaxPowerFocus","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":720,"y":440,"wires":[["012a4655fb5fca12"]]},{"id":"012a4655fb5fca12","type":"trigger","z":"eeab6ec5a969349e","name":"","op1":"","op2":"true","op1type":"nul","op2type":"bool","duration":"7","extend":true,"overrideDelay":false,"units":"s","reset":"","bytopic":"all","topic":"topic","outputs":1,"x":960,"y":440,"wires":[["341334563f2e68f4","242f73e2dffdb456"]]},{"id":"341334563f2e68f4","type":"link out","z":"eeab6ec5a969349e","name":"link out SMPF","mode":"link","links":["8f90c587c769e839"],"x":1075,"y":440,"wires":[]},{"id":"1e7610d930229253","type":"delay","z":"eeab6ec5a969349e","name":"","pauseType":"delay","timeout":"4","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":700,"y":140,"wires":[["aafd75875cad01d4"]]},{"id":"73fd99befb804207","type":"function","z":"eeab6ec5a969349e","name":"Log","func":"return {topic: \"info\", payload: \"System Started\"};","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":550,"y":620,"wires":[["043fcf304dd8b03c"]]},{"id":"043fcf304dd8b03c","type":"subflow:190714efd60a5f96","z":"eeab6ec5a969349e","name":"","x":830,"y":620,"wires":[]},{"id":"ab7c009cccb32ec6","type":"function","z":"eeab6ec5a969349e","name":"Set stored value","func":"let setHorizontalCounter = Math.round(msg.payload * global.get(\"myHorizRatio\"));\nglobal.set(\"setHorizontalCounter\", setHorizontalCounter);\n\nif (setHorizontalCounter < 0) {\n    setHorizontalCounter = (65535 + setHorizontalCounter + 1) & 0xFFFF;\n}\n\n\nnode.status({ text: \"New counter: 0x\" + setHorizontalCounter.toString(16) + \"/\" + setHorizontalCounter.toString() });\n\nreturn { payload: setHorizontalCounter};","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":400,"y":2320,"wires":[["df2b9beb755ab7e6","4a364ab544a091a0"]]},{"id":"5467ec32edca6b6f","type":"function","z":"eeab6ec5a969349e","name":"Set stored value","func":"let setVerticalCounter = Math.round(msg.payload * global.get(\"myVertRatio\"));\nglobal.set(\"setVerticalCounter\", setVerticalCounter);\n\nif (setVerticalCounter < 0) {\n    setVerticalCounter = (65535 + setVerticalCounter + 1) & 0xFFFF;\n}\n\nnode.status({ text: \"New counter: 0x\" + setVerticalCounter.toString(16) });\n\nreturn { payload: setVerticalCounter };","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":400,"y":2680,"wires":[["dee9a61129167db0"]]},{"id":"3290cf2d195b0384","type":"delay","z":"eeab6ec5a969349e","name":"","pauseType":"delay","timeout":"500","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":350,"y":2240,"wires":[["ab7c009cccb32ec6","4a364ab544a091a0","1ad9ef410dc29826","8bd81e5165f0d363"]]},{"id":"cd8fcbf2894926e6","type":"delay","z":"eeab6ec5a969349e","name":"","pauseType":"delay","timeout":"1","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":320,"y":2600,"wires":[["5467ec32edca6b6f","73cb411a85d9ce44","8c68bf380d06683d","0ed12898b4a62e9b"]]},{"id":"b804e0cf05f38930","type":"subflow:190714efd60a5f96","z":"eeab6ec5a969349e","name":"","x":750,"y":2220,"wires":[]},{"id":"1ad9ef410dc29826","type":"function","z":"eeab6ec5a969349e","name":"function 1","func":"msg.topic = \"Init value Horizontal\";\nreturn msg;","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":580,"y":2220,"wires":[["b804e0cf05f38930"]]},{"id":"8bd81e5165f0d363","type":"link out","z":"eeab6ec5a969349e","name":"link out 58","mode":"link","links":["32885a0d66a25f9d"],"x":535,"y":2260,"wires":[]},{"id":"8c68bf380d06683d","type":"link out","z":"eeab6ec5a969349e","name":"link out 59","mode":"link","links":["34d601203a1fb526"],"x":535,"y":2620,"wires":[]},{"id":"4a093b6904a900da","type":"subflow:190714efd60a5f96","z":"eeab6ec5a969349e","name":"","x":750,"y":2580,"wires":[]},{"id":"0ed12898b4a62e9b","type":"function","z":"eeab6ec5a969349e","name":"function 2","func":"msg.topic = \"Init value Vertical\";\nreturn msg;","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":580,"y":2580,"wires":[["4a093b6904a900da"]]},{"id":"2c4836bd0a117105","type":"link in","z":"eeab6ec5a969349e","name":"link in HorizontalCounter","links":["bff88ad848deea61"],"x":265,"y":2320,"wires":[["ab7c009cccb32ec6"]]},{"id":"53b94b916ad3cf36","type":"link out","z":"eeab6ec5a969349e","name":"link out 60","mode":"link","links":["2f8b2234c48a3d18"],"x":435,"y":980,"wires":[]},{"id":"f5e5f87d824f368b","type":"function","z":"eeab6ec5a969349e","name":"false","func":"\nreturn {payload: false };","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":330,"y":980,"wires":[["53b94b916ad3cf36"]]},{"id":"242f73e2dffdb456","type":"link out","z":"eeab6ec5a969349e","name":"link out 61","mode":"link","links":["2f8b2234c48a3d18"],"x":1075,"y":500,"wires":[]},{"id":"090766d1192e9249","type":"ui_button","z":"eeab6ec5a969349e","name":"","group":"5ff70e0f4e7a65cc","order":8,"width":0,"height":0,"passthru":true,"label":"Reset Vertical counter","tooltip":"","color":"","bgcolor":"","className":"","icon":"","payload":"1","payloadType":"num","topic":"topic","topicType":"msg","x":180,"y":2740,"wires":[["2a4621b8e6dc84b9","73cb411a85d9ce44"]]},{"id":"9e7187064996487b","type":"ui_button","z":"eeab6ec5a969349e","name":"","group":"5ff70e0f4e7a65cc","order":4,"width":0,"height":0,"passthru":false,"label":"Reset Horizontal counter","tooltip":"","color":"","bgcolor":"","className":"","icon":"","payload":"1","payloadType":"num","topic":"topic","topicType":"msg","x":170,"y":2380,"wires":[["0a77f1b6efbf31ce","4a364ab544a091a0"]]},{"id":"a0adc39e22ed9bf4","type":"ui_dropdown","z":"eeab6ec5a969349e","name":"","label":"","tooltip":"","place":"Select option","group":"dd3193ee6af1f484","order":1,"width":0,"height":0,"passthru":true,"multiple":false,"options":[{"label":"R5","value":"R5","type":"str"},{"label":"R50","value":"R50","type":"str"},{"label":"R60","value":"R60","type":"str"}],"payload":"","topic":"topic","topicType":"msg","className":"","x":300,"y":140,"wires":[["3d0fd555d3af6ec3","4789fa369f7d43fd"]]},{"id":"58b44e17bb77fa97","type":"ui_numeric","z":"eeab6ec5a969349e","name":"","label":"Ignition Time","tooltip":"","group":"41aa664489ca8367","order":7,"width":0,"height":0,"wrap":false,"passthru":true,"topic":"topic","topicType":"msg","format":"{{value}}","min":"300","max":"1000","step":"50","className":"","x":310,"y":3080,"wires":[["766eb78b45dcf20a","b108a398543f4075"]]},{"id":"0934afbfe99019b1","type":"ui_numeric","z":"eeab6ec5a969349e","name":"HorizontalMaxCurrent","label":"Horizontal max. current [A]","tooltip":"Adjust current according to 2,5A powersupply (default: 2,6A Max. limit), and for 6,5A powersupply (default: 3,5A Max. limit)","group":"dd3193ee6af1f484","order":3,"width":0,"height":0,"wrap":false,"passthru":true,"topic":"topic","topicType":"msg","format":"{{value}}","min":"1","max":"5","step":"0.1","className":"","x":420,"y":240,"wires":[["ca432d0d324f74bb","08f49e1564b8a652"]]},{"id":"fe0ab215b421d8d9","type":"ui_numeric","z":"eeab6ec5a969349e","name":"VerticalMaxCurrent","label":"Vertical max. current [A]","tooltip":"Adjust current according to 2,5A powersupply (default: 2,6A Max. limit), and for 6,5A powersupply (default: 3,5A Max. limit)","group":"dd3193ee6af1f484","order":6,"width":0,"height":0,"wrap":false,"passthru":true,"topic":"topic","topicType":"msg","format":"{{value}}","min":"1","max":"5","step":"0.1","className":"","x":410,"y":340,"wires":[["ca6d94b0a18855c0","43ab67af8dbf5331"]]},{"id":"ed2b73dbb7512cd3","type":"ui_numeric","z":"eeab6ec5a969349e","name":"FocusMaxCurrent","label":"Focus max. current [A]","tooltip":"Adjust maximum current for Focus engine (default: 0,6A max. limit)","group":"dd3193ee6af1f484","order":6,"width":0,"height":0,"wrap":false,"passthru":true,"topic":"topic","topicType":"msg","format":"{{value}}","min":"0.1","max":"2","step":"0.1","className":"","x":410,"y":440,"wires":[["d7ad822c79c095d3","f1d6c2da03e99c11"]]},{"id":"0f5a54bcf98f66e2","type":"ui_text_input","z":"eeab6ec5a969349e","name":"HorizRatio","label":"Horizontal Ratio","tooltip":"Default: R50=1 and R60=18,56111145 ","group":"41aa664489ca8367","order":1,"width":0,"height":0,"passthru":true,"mode":"number","delay":"1000","topic":"topic","sendOnBlur":true,"className":"","topicType":"msg","x":390,"y":1200,"wires":[["9eea56372c3f2781","c3b06118ece6abaf"]]},{"id":"78b8f39030315e4a","type":"ui_text_input","z":"eeab6ec5a969349e","name":"VertRatio","label":"Vertical Ratio","tooltip":"Default: R50=1 (N/A) and R60=36,07495117 ","group":"41aa664489ca8367","order":1,"width":0,"height":0,"passthru":true,"mode":"number","delay":"1000","topic":"topic","sendOnBlur":true,"className":"","topicType":"msg","x":360,"y":1460,"wires":[["340c60d2b1c6fd8f","cd5a8375230e96b1"]]},{"id":"6602179eeb684726","type":"ui_text_input","z":"eeab6ec5a969349e","name":"VertInitValue","label":"Vertical Init Value","tooltip":"","group":"c663dac55eb75a60","order":4,"width":0,"height":0,"passthru":true,"mode":"number","delay":"1000","topic":"topic","sendOnBlur":true,"className":"","topicType":"msg","x":350,"y":1580,"wires":[["0926366ebfed5b09","1a12b33d8d45ae45"]]},{"id":"26e04c884b68cdef","type":"ui_text_input","z":"eeab6ec5a969349e","name":"HorizontalInitValue","label":"Horizontal Init Value","tooltip":"","group":"c663dac55eb75a60","order":4,"width":0,"height":0,"passthru":true,"mode":"number","delay":"1000","topic":"topic","sendOnBlur":true,"className":"","topicType":"msg","x":370,"y":1300,"wires":[["0758c82c3263d621","f5dd364ac2c894ed"]]},{"id":"d33b28debe0ffcea","type":"ui_template","z":"eeab6ec5a969349e","group":"3c410cd6cbd2d8fc","name":"Dashboard Style","order":1,"width":0,"height":0,"format":"<style>\n    /* Styling for all the groups */\n    ui-card-panel {\n        box-shadow: rgba(0,0,0,0.35) 0px 5px 15px;\n        border-radius: 5px;\n    }\n\n    /* Styling for all elements in Groups */\n    ui-card-panel * {\n        border-radius: 2.5px;\n    }\n\n    /* Styling of the Group Title */\n        .nr-dashboard-cardtitle {\n        font-weight: bold !important;\n    }\n</style>","storeOutMessages":true,"fwdInMessages":true,"resendOnRefresh":true,"templateScope":"global","className":"","x":150,"y":1740,"wires":[[]]},{"id":"a0826312040379ff","type":"bit-decode","z":"eeab6ec5a969349e","name":"","bits":"58278f54b45791c3","x":370,"y":660,"wires":[["3b8e6fda523ac133"]]},{"id":"b5e64bda691121ee","type":"get-shared-state","z":"eeab6ec5a969349e","state":"93669d6727d608a6","name":"SystemType","triggerOnInit":true,"triggerOnChange":true,"x":130,"y":140,"wires":[["a0adc39e22ed9bf4"]]},{"id":"a737d1149bdc49b3","type":"get-shared-state","z":"eeab6ec5a969349e","state":"2262c0a1fce38a3c","name":"Horizontal_pos_puls_ratio","triggerOnInit":true,"triggerOnChange":true,"x":170,"y":1200,"wires":[["0f5a54bcf98f66e2"]]},{"id":"8d6c24ef2f31bef8","type":"get-shared-state","z":"eeab6ec5a969349e","state":"0eb6076645abaa5e","name":"Vertical_pos_puls_ratio","triggerOnInit":true,"triggerOnChange":true,"x":160,"y":1460,"wires":[["78b8f39030315e4a"]]},{"id":"033ac1d6aef1a5dd","type":"get-shared-state","z":"eeab6ec5a969349e","state":"888cbf8448978e81","name":"VerticalInitValue","triggerOnInit":true,"triggerOnChange":true,"x":140,"y":1580,"wires":[["6602179eeb684726"]]},{"id":"560677357747df54","type":"get-shared-state","z":"eeab6ec5a969349e","state":"b88b589938e6439e","name":"HorizontalInitValue","triggerOnInit":true,"triggerOnChange":true,"x":150,"y":1300,"wires":[["26e04c884b68cdef"]]},{"id":"f1a33428927c8289","type":"get-shared-state","z":"eeab6ec5a969349e","state":"8402cd05901ab1ef","name":"IgnitionTime","triggerOnInit":true,"triggerOnChange":true,"x":130,"y":3080,"wires":[["58b44e17bb77fa97"]]},{"id":"380f9c7d256cb1a9","type":"get-shared-state","z":"eeab6ec5a969349e","state":"20566e8d2d01e4d9","name":"H150","triggerOnInit":true,"triggerOnChange":false,"x":110,"y":1040,"wires":[["21204ca1514425b7"]]},{"id":"05557754f167e380","type":"get-shared-state","z":"eeab6ec5a969349e","state":"cf9864b7fc29b5db","name":"SystemMaxPowerHoriz","triggerOnInit":true,"triggerOnChange":true,"x":160,"y":240,"wires":[["0934afbfe99019b1"]]},{"id":"25ad69260d3b9a4d","type":"get-shared-state","z":"eeab6ec5a969349e","state":"95a7e0ce700f209f","name":"SystemMaxPowerVert","triggerOnInit":true,"triggerOnChange":true,"x":160,"y":340,"wires":[["fe0ab215b421d8d9"]]},{"id":"dee724dc869b4c94","type":"get-shared-state","z":"eeab6ec5a969349e","state":"775ba31a9c185aa4","name":"SystemMaxPowerFocus","triggerOnInit":true,"triggerOnChange":true,"x":170,"y":440,"wires":[["ed2b73dbb7512cd3"]]},{"id":"dabfba5dfa64068b","type":"get-shared-state","z":"eeab6ec5a969349e","state":"8e3f0b650d98dc09","name":"Horizontal_pos_act","triggerOnInit":true,"triggerOnChange":false,"x":150,"y":2240,"wires":[["3290cf2d195b0384"]]},{"id":"51a6537a8cf0a9c9","type":"get-shared-state","z":"eeab6ec5a969349e","state":"3c9cf2f8bc9a8795","name":"Vertical_pos_act","triggerOnInit":true,"triggerOnChange":false,"x":140,"y":2600,"wires":[["cd8fcbf2894926e6"]]},{"id":"3d0fd555d3af6ec3","type":"set-shared-state","z":"eeab6ec5a969349e","state":"93669d6727d608a6","name":"SystemType","triggerOnInit":true,"triggerOnChange":true,"provideOutput":false,"outputs":0,"x":470,"y":180,"wires":[]},{"id":"c3b06118ece6abaf","type":"set-shared-state","z":"eeab6ec5a969349e","state":"2262c0a1fce38a3c","name":"Horizontal_pos_puls_ratio","triggerOnInit":true,"triggerOnChange":true,"provideOutput":false,"outputs":0,"x":610,"y":1240,"wires":[]},{"id":"340c60d2b1c6fd8f","type":"set-shared-state","z":"eeab6ec5a969349e","state":"0eb6076645abaa5e","name":"Vertical_pos_puls_ratio","triggerOnInit":true,"triggerOnChange":true,"provideOutput":false,"outputs":0,"x":570,"y":1500,"wires":[]},{"id":"0926366ebfed5b09","type":"set-shared-state","z":"eeab6ec5a969349e","state":"888cbf8448978e81","name":"VerticalInitValue","triggerOnInit":true,"triggerOnChange":true,"provideOutput":false,"outputs":0,"x":540,"y":1620,"wires":[]},{"id":"0758c82c3263d621","type":"set-shared-state","z":"eeab6ec5a969349e","state":"b88b589938e6439e","name":"HorizontalInitValue","triggerOnInit":true,"triggerOnChange":true,"provideOutput":false,"outputs":0,"x":590,"y":1340,"wires":[]},{"id":"766eb78b45dcf20a","type":"set-shared-state","z":"eeab6ec5a969349e","state":"8402cd05901ab1ef","name":"IgnitionTime","triggerOnInit":true,"triggerOnChange":true,"provideOutput":false,"outputs":0,"x":490,"y":3140,"wires":[]},{"id":"0e2483499375c704","type":"set-shared-state","z":"eeab6ec5a969349e","state":"1db7bf75d46ca85f","name":"H100","triggerOnInit":true,"triggerOnChange":true,"provideOutput":false,"outputs":0,"x":730,"y":840,"wires":[]},{"id":"ca432d0d324f74bb","type":"set-shared-state","z":"eeab6ec5a969349e","state":"cf9864b7fc29b5db","name":"SystemMaxPowerHoriz","triggerOnInit":true,"triggerOnChange":true,"provideOutput":false,"outputs":0,"x":690,"y":280,"wires":[]},{"id":"ca6d94b0a18855c0","type":"set-shared-state","z":"eeab6ec5a969349e","state":"95a7e0ce700f209f","name":"SystemMaxPowerVert","triggerOnInit":true,"triggerOnChange":true,"provideOutput":false,"outputs":0,"x":680,"y":380,"wires":[]},{"id":"d7ad822c79c095d3","type":"set-shared-state","z":"eeab6ec5a969349e","state":"775ba31a9c185aa4","name":"SystemMaxPowerFocus","triggerOnInit":true,"triggerOnChange":true,"provideOutput":false,"outputs":0,"x":690,"y":480,"wires":[]},{"id":"fd97b5a1b8cfa1e1","type":"function","z":"ee1ffeb6c3e4a06e","g":"0a9403866feacaca","name":"Fan out Port A","func":"\nreturn [\n    { payload: msg.payload.JS_Down },\n    { payload: msg.payload.MDFocusFault },\n    { payload: msg.payload.LampOnBtn },\n    { payload: msg.payload.RlyLampOn },\n    { payload: msg.payload.JS_Up },\n    { payload: msg.payload.RlyStep },\n    { payload: msg.payload.FocusEndOut },\n    { payload: msg.payload.FocusEndIn },\n    { payload: msg.payload.JS_Right },\n    { payload: msg.payload.VertSpeedNeg }\n];","outputs":10,"noerr":0,"initialize":"","finalize":"","libs":[],"x":320,"y":340,"wires":[["58dac0c2e808168a"],["e052d0da63ec402c"],["05bd292adf536853"],["c749f9c6967f9523"],["60dc0bb92b1a30fa"],["a57db0b72bcd176f"],["5a5fe4f5f6008c60","e49d1d8afa6fa4af"],["b9ecfdc10ebc12f3","f01635e9896c5a0c"],["60382c05bdd26059"],["28dce1198fca87d1"]]},{"id":"5e0393418181d200","type":"link in","z":"ee1ffeb6c3e4a06e","g":"0a9403866feacaca","name":"link in Port A","links":["dc2c9fee1f3d0484"],"x":185,"y":380,"wires":[["fd97b5a1b8cfa1e1"]]},{"id":"a67b16c0618f3cfe","type":"function","z":"ee1ffeb6c3e4a06e","g":"2bb4587f3c31e083","name":"Fan out Port B","func":"\nreturn [\n    { payload: msg.payload.MD_FocusDir },\n    { payload: msg.payload.MD_HorizEn },\n    { payload: msg.payload.FocusInBtn },\n    { payload: msg.payload.SS_Vert_A },\n    { payload: msg.payload.PowerOKLed },\n    { payload: msg.payload.U1DERE }\n];","outputs":6,"noerr":0,"initialize":"","finalize":"","libs":[],"x":320,"y":740,"wires":[["9280d41783147667"],["1b58438f3dd3522e"],["24a1fc03bb527e8e"],["c9132ebe1b8b00f5"],["a11dce8131d4b638"],["0f41177995615e44"]]},{"id":"5a359a9a51ae0d39","type":"link in","z":"ee1ffeb6c3e4a06e","g":"2bb4587f3c31e083","name":"link in Port B","links":["4284fc4805df2e9e"],"x":185,"y":740,"wires":[["a67b16c0618f3cfe"]]},{"id":"12b2d6367b182885","type":"link in","z":"ee1ffeb6c3e4a06e","g":"4c5adf699c5575c8","name":"link in PortC","links":["a1d12c10ef725438"],"x":185,"y":1100,"wires":[["d3aeaef2f3d50940"]]},{"id":"d3aeaef2f3d50940","type":"function","z":"ee1ffeb6c3e4a06e","g":"4c5adf699c5575c8","name":"Fan out Port C","func":"global.set(\"PORTC\", msg.payload);\nreturn [\n    { payload: msg.payload.SW1 },\n    { payload: msg.payload.SS_VERT_B },\n    { payload: msg.payload.HorizSpeedNeg },\n    { payload: msg.payload.MD_VERT_EN },\n    { payload: msg.payload.MD_VERT_SF },\n    { payload: msg.payload.MD_HORIZ_SF },\n    { payload: msg.payload.FocusPlusBtn },\n    { payload: msg.payload.JS_Left },\n    { payload: msg.payload.HighTemp },\n    { payload: msg.payload.VertSpeedPlusBtn }\n];","outputs":10,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":320,"y":1100,"wires":[["fcdef0359761460d"],["345619635c192b29"],["9970c7127a8ca108"],["258b1d2c1275987d"],["64cb4ff2fd3b3f6f"],["39b29c18ac8ef748"],["1b12363157bd52bf"],["23e89fea9ffa3098"],["8dd009e6b3ecae80"],["8f0861a6aef06add"]]},{"id":"1e4af69e2c40f316","type":"link in","z":"ee1ffeb6c3e4a06e","g":"d47e39f7ccb00e26","name":"link in Port D","links":["8d03f44a3521f057"],"x":185,"y":1540,"wires":[["f35d4963c364b593"]]},{"id":"f35d4963c364b593","type":"function","z":"ee1ffeb6c3e4a06e","g":"d47e39f7ccb00e26","name":"Fan out Port D","func":"           \nreturn [\n    { payload: msg.payload.RlyIgniteOn },\n    { payload: msg.payload.SS_HORIZ_A },\n    { payload: msg.payload.HorizSpeedPlusBtn },\n    { payload: msg.payload.SS_HORIZ_B }\n];","outputs":4,"noerr":0,"initialize":"","finalize":"","libs":[],"x":320,"y":1540,"wires":[["444b80d2759e8722"],["16d9f8c68251bc23"],["fb34a0c4cac8b70d"],["e49229445362b7e1"]]},{"id":"e49d1d8afa6fa4af","type":"link out","z":"ee1ffeb6c3e4a06e","g":"0a9403866feacaca","name":"link out Focus End Out","mode":"link","links":[],"x":635,"y":460,"wires":[]},{"id":"f01635e9896c5a0c","type":"link out","z":"ee1ffeb6c3e4a06e","g":"0a9403866feacaca","name":"link out Focus End In","mode":"link","links":[],"x":595,"y":500,"wires":[]},{"id":"66e4ebba84a41765","type":"inject","z":"ee1ffeb6c3e4a06e","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":true,"onceDelay":0.1,"topic":"","payload":"false","payloadType":"bool","x":210,"y":80,"wires":[["150e59afefd468b9"]]},{"id":"fdfd15896600f9ec","type":"change","z":"ee1ffeb6c3e4a06e","name":"","rules":[{"t":"set","p":"debugMode","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":580,"y":100,"wires":[[]]},{"id":"7a0975a161c2bfc2","type":"inject","z":"ee1ffeb6c3e4a06e","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"true","payloadType":"bool","x":210,"y":120,"wires":[["150e59afefd468b9"]]},{"id":"9f8c4a0d0ab1b1b9","type":"inject","z":"ee1ffeb6c3e4a06e","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"60","crontab":"","once":true,"onceDelay":"1","topic":"","payload":"","payloadType":"date","x":250,"y":1700,"wires":[["6245656fbe775faa"]]},{"id":"6245656fbe775faa","type":"exec","z":"ee1ffeb6c3e4a06e","command":"/usr/bin/vcgencmd measure_temp","addpay":false,"append":"","useSpawn":"","timer":"","winHide":false,"name":"","x":500,"y":1700,"wires":[["ed6f96668d389158"],[],[]]},{"id":"ed6f96668d389158","type":"function","z":"ee1ffeb6c3e4a06e","name":"Temperature => W34","func":"let temp = Math.floor(parseFloat(msg.payload.slice(5)) + 0.5);\nlet regW = global.get(\"regW\");\nregW.W34 = temp;\nglobal.set(\"regW\",regW);\n\nnode.status({ fill: \"green\", shape: \"ring\", text: regW.W34 });\n\nreturn {payload: parseFloat(msg.payload.slice(5))};","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":780,"y":1680,"wires":[["a60561897b024707"]]},{"id":"f248bd6cc7627f35","type":"inject","z":"ee1ffeb6c3e4a06e","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":true,"onceDelay":"15","topic":"","payload":"SWinfo","payloadType":"global","x":260,"y":1780,"wires":[["d97f6e620e9edd52"]]},{"id":"2f8b2234c48a3d18","type":"link in","z":"ee1ffeb6c3e4a06e","name":"link in Pos Safe","links":["53b94b916ad3cf36","242f73e2dffdb456","a3fbf7a3ba4ff7f7"],"x":325,"y":1860,"wires":[["45ffb31e217e4dcc"]]},{"id":"150e59afefd468b9","type":"ui_switch","z":"ee1ffeb6c3e4a06e","name":"","label":"Debug mode","tooltip":"","group":"04e42a9e17402047","order":4,"width":0,"height":0,"passthru":true,"decouple":"false","topic":"topic","topicType":"msg","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","animate":false,"className":"","x":370,"y":100,"wires":[["fdfd15896600f9ec"]]},{"id":"fcdef0359761460d","type":"ui_text","z":"ee1ffeb6c3e4a06e","g":"4c5adf699c5575c8","group":"064bb7e05824a058","order":1,"width":0,"height":0,"name":"SW1","label":"SW1","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":"","color":"#000000","x":550,"y":960,"wires":[]},{"id":"d97f6e620e9edd52","type":"ui_text","z":"ee1ffeb6c3e4a06e","group":"04e42a9e17402047","order":1,"width":0,"height":0,"name":"","label":"SW info.:","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#000000","x":440,"y":1780,"wires":[]},{"id":"a60561897b024707","type":"ui_gauge","z":"ee1ffeb6c3e4a06e","name":"","group":"6f03721c41f2c6d6","order":6,"width":"3","height":"3","gtype":"gage","title":"System Temp.","label":"°C","format":"{{value}}","min":"-10","max":"100","colors":["#00b500","#e6e600","#ca3838"],"seg1":"70","seg2":"85","diff":false,"className":"","x":1000,"y":1680,"wires":[]},{"id":"58dac0c2e808168a","type":"ui_led","z":"ee1ffeb6c3e4a06e","g":"0a9403866feacaca","order":1,"group":"ef8e4c8ea11dd5c5","width":0,"height":0,"label":"R5 Joystick Down","labelPlacement":"right","labelAlignment":"left","colorForValue":[{"color":"#646464","value":"true","valueType":"bool"},{"color":"#008000","value":"false","valueType":"bool"}],"allowColorForValueInMessage":false,"shape":"square","showGlow":true,"name":"R5 Joystick Down","x":770,"y":220,"wires":[]},{"id":"e052d0da63ec402c","type":"ui_led","z":"ee1ffeb6c3e4a06e","g":"0a9403866feacaca","order":2,"group":"ef8e4c8ea11dd5c5","width":0,"height":0,"label":"MD Focus Fault","labelPlacement":"right","labelAlignment":"left","colorForValue":[{"color":"#646464","value":"true","valueType":"bool"},{"color":"#ff0000","value":"false","valueType":"bool"}],"allowColorForValueInMessage":false,"shape":"square","showGlow":true,"name":"MD Focus Fault","x":760,"y":260,"wires":[]},{"id":"05bd292adf536853","type":"ui_led","z":"ee1ffeb6c3e4a06e","g":"0a9403866feacaca","order":3,"group":"ef8e4c8ea11dd5c5","width":0,"height":0,"label":"Lamp On Button","labelPlacement":"right","labelAlignment":"left","colorForValue":[{"color":"#646464","value":"true","valueType":"bool"},{"color":"#008000","value":"false","valueType":"bool"}],"allowColorForValueInMessage":false,"shape":"square","showGlow":true,"name":"Lamp On Button","x":760,"y":300,"wires":[]},{"id":"c749f9c6967f9523","type":"ui_led","z":"ee1ffeb6c3e4a06e","g":"0a9403866feacaca","order":4,"group":"ef8e4c8ea11dd5c5","width":0,"height":0,"label":"Lamp Relay On","labelPlacement":"right","labelAlignment":"left","colorForValue":[{"color":"#646464","value":"false","valueType":"bool"},{"color":"#ffff00","value":"true","valueType":"bool"}],"allowColorForValueInMessage":false,"shape":"square","showGlow":true,"name":"Lamp Relay On","x":760,"y":340,"wires":[]},{"id":"60dc0bb92b1a30fa","type":"ui_led","z":"ee1ffeb6c3e4a06e","g":"0a9403866feacaca","order":5,"group":"ef8e4c8ea11dd5c5","width":0,"height":0,"label":"R5 Joystick Up","labelPlacement":"right","labelAlignment":"left","colorForValue":[{"color":"#646464","value":"true","valueType":"bool"},{"color":"#008000","value":"false","valueType":"bool"}],"allowColorForValueInMessage":false,"shape":"square","showGlow":true,"name":"R5 Joystick Up","x":760,"y":380,"wires":[]},{"id":"a57db0b72bcd176f","type":"ui_led","z":"ee1ffeb6c3e4a06e","g":"0a9403866feacaca","order":6,"group":"ef8e4c8ea11dd5c5","width":0,"height":0,"label":"Relay Step On","labelPlacement":"right","labelAlignment":"left","colorForValue":[{"color":"#646464","value":"false","valueType":"bool"},{"color":"#008000","value":"true","valueType":"bool"}],"allowColorForValueInMessage":false,"shape":"square","showGlow":true,"name":"Relay Step On","x":760,"y":420,"wires":[]},{"id":"5a5fe4f5f6008c60","type":"ui_led","z":"ee1ffeb6c3e4a06e","g":"0a9403866feacaca","order":7,"group":"ef8e4c8ea11dd5c5","width":0,"height":0,"label":"Focus End Out","labelPlacement":"right","labelAlignment":"left","colorForValue":[{"color":"#646464","value":"false","valueType":"bool"},{"color":"#ffff00","value":"true","valueType":"bool"}],"allowColorForValueInMessage":false,"shape":"square","showGlow":true,"name":"Focus End Out","x":760,"y":460,"wires":[]},{"id":"60382c05bdd26059","type":"ui_led","z":"ee1ffeb6c3e4a06e","g":"0a9403866feacaca","order":9,"group":"ef8e4c8ea11dd5c5","width":0,"height":0,"label":"R5 Joystick Right","labelPlacement":"right","labelAlignment":"left","colorForValue":[{"color":"#646464","value":"true","valueType":"bool"},{"color":"#008000","value":"false","valueType":"bool"}],"allowColorForValueInMessage":false,"shape":"square","showGlow":true,"name":"R5 Joystick Right","x":330,"y":520,"wires":[]},{"id":"28dce1198fca87d1","type":"ui_led","z":"ee1ffeb6c3e4a06e","g":"0a9403866feacaca","order":10,"group":"ef8e4c8ea11dd5c5","width":0,"height":0,"label":"R5 Vertical Speed Btn. Neg.","labelPlacement":"right","labelAlignment":"left","colorForValue":[{"color":"#646464","value":"true","valueType":"bool"},{"color":"#008000","value":"false","valueType":"bool"}],"allowColorForValueInMessage":false,"shape":"square","showGlow":true,"name":"R5 Vertical Speed Btn. Neg.","x":360,"y":480,"wires":[]},{"id":"b9ecfdc10ebc12f3","type":"ui_led","z":"ee1ffeb6c3e4a06e","g":"0a9403866feacaca","order":8,"group":"ef8e4c8ea11dd5c5","width":0,"height":0,"label":"Focus End In","labelPlacement":"right","labelAlignment":"left","colorForValue":[{"color":"#646464","value":"false","valueType":"bool"},{"color":"#ffff00","value":"true","valueType":"bool"}],"allowColorForValueInMessage":false,"shape":"square","showGlow":true,"name":"Focus End In","x":750,"y":500,"wires":[]},{"id":"9280d41783147667","type":"ui_led","z":"ee1ffeb6c3e4a06e","g":"2bb4587f3c31e083","order":1,"group":"19a069cf519cda5d","width":0,"height":0,"label":"MD Focus Dir","labelPlacement":"right","labelAlignment":"left","colorForValue":[{"color":"#646464","value":"true","valueType":"bool"},{"color":"#0000ff","value":"false","valueType":"bool"}],"allowColorForValueInMessage":false,"shape":"square","showGlow":true,"name":"MD Focus Dir","x":580,"y":640,"wires":[]},{"id":"1b58438f3dd3522e","type":"ui_led","z":"ee1ffeb6c3e4a06e","g":"2bb4587f3c31e083","order":2,"group":"19a069cf519cda5d","width":0,"height":0,"label":"MD Horiz Enabled","labelPlacement":"right","labelAlignment":"left","colorForValue":[{"color":"#646464","value":"false","valueType":"bool"},{"color":"#008000","value":"true","valueType":"bool"}],"allowColorForValueInMessage":false,"shape":"square","showGlow":true,"name":"MD Horiz Enabled","x":591.1999816894531,"y":673.3333333333333,"wires":[]},{"id":"24a1fc03bb527e8e","type":"ui_led","z":"ee1ffeb6c3e4a06e","g":"2bb4587f3c31e083","order":3,"group":"19a069cf519cda5d","width":0,"height":0,"label":"R5 Focus In Btn.","labelPlacement":"right","labelAlignment":"left","colorForValue":[{"color":"#646464","value":"true","valueType":"bool"},{"color":"#008000","value":"false","valueType":"bool"}],"allowColorForValueInMessage":false,"shape":"square","showGlow":true,"name":"R5 Focus In Btn.","x":591.1999816894531,"y":706.6666666666666,"wires":[]},{"id":"c9132ebe1b8b00f5","type":"ui_led","z":"ee1ffeb6c3e4a06e","g":"2bb4587f3c31e083","order":5,"group":"19a069cf519cda5d","width":0,"height":0,"label":"SS Vert A","labelPlacement":"right","labelAlignment":"left","colorForValue":[{"color":"#646464","value":"false","valueType":"bool"},{"color":"#008000","value":"true","valueType":"bool"}],"allowColorForValueInMessage":false,"shape":"square","showGlow":true,"name":"SS Vert A","x":560,"y":740,"wires":[]},{"id":"a11dce8131d4b638","type":"ui_led","z":"ee1ffeb6c3e4a06e","g":"2bb4587f3c31e083","order":6,"group":"19a069cf519cda5d","width":0,"height":0,"label":"Power OK LED","labelPlacement":"right","labelAlignment":"left","colorForValue":[{"color":"#646464","value":"false","valueType":"bool"},{"color":"#008000","value":"true","valueType":"bool"}],"allowColorForValueInMessage":false,"shape":"square","showGlow":true,"name":"Power OK LED","x":580,"y":780,"wires":[]},{"id":"0f41177995615e44","type":"ui_led","z":"ee1ffeb6c3e4a06e","g":"2bb4587f3c31e083","order":7,"group":"19a069cf519cda5d","width":0,"height":0,"label":"U1 DE/!RE","labelPlacement":"right","labelAlignment":"left","colorForValue":[{"color":"#646464","value":"false","valueType":"bool"},{"color":"#ffa500","value":"true","valueType":"bool"}],"allowColorForValueInMessage":false,"shape":"square","showGlow":true,"name":"U1 DE/!RE","x":570,"y":820,"wires":[]},{"id":"345619635c192b29","type":"ui_led","z":"ee1ffeb6c3e4a06e","g":"4c5adf699c5575c8","order":2,"group":"064bb7e05824a058","width":0,"height":0,"label":"SS Vert B","labelPlacement":"right","labelAlignment":"left","colorForValue":[{"color":"#646464","value":"false","valueType":"bool"},{"color":"#ffff00","value":"true","valueType":"bool"}],"allowColorForValueInMessage":false,"shape":"square","showGlow":true,"name":"SS Vert B","x":560,"y":1000,"wires":[]},{"id":"9970c7127a8ca108","type":"ui_led","z":"ee1ffeb6c3e4a06e","g":"4c5adf699c5575c8","order":3,"group":"064bb7e05824a058","width":0,"height":0,"label":"R5 Horiz. Speed Btn. Neg.","labelPlacement":"right","labelAlignment":"left","colorForValue":[{"color":"#646464","value":"true","valueType":"bool"},{"color":"#008000","value":"false","valueType":"bool"}],"allowColorForValueInMessage":false,"shape":"square","showGlow":true,"name":"R5 Horiz. Speed Btn. Neg.","x":620,"y":1040,"wires":[]},{"id":"258b1d2c1275987d","type":"ui_led","z":"ee1ffeb6c3e4a06e","g":"4c5adf699c5575c8","order":4,"group":"064bb7e05824a058","width":0,"height":0,"label":"MD Vert. Enabled","labelPlacement":"right","labelAlignment":"left","colorForValue":[{"color":"#646464","value":"false","valueType":"bool"},{"color":"#008000","value":"true","valueType":"bool"}],"allowColorForValueInMessage":false,"shape":"square","showGlow":true,"name":"MD Vert. Enabled","x":590,"y":1080,"wires":[]},{"id":"64cb4ff2fd3b3f6f","type":"ui_led","z":"ee1ffeb6c3e4a06e","g":"4c5adf699c5575c8","order":5,"group":"064bb7e05824a058","width":0,"height":0,"label":"MD Vert. System Fault","labelPlacement":"right","labelAlignment":"left","colorForValue":[{"color":"#646464","value":"true","valueType":"bool"},{"color":"#ff0000","value":"false","valueType":"bool"}],"allowColorForValueInMessage":false,"shape":"square","showGlow":true,"name":"MD Vert. System Fault","x":600,"y":1120,"wires":[]},{"id":"39b29c18ac8ef748","type":"ui_led","z":"ee1ffeb6c3e4a06e","g":"4c5adf699c5575c8","order":6,"group":"064bb7e05824a058","width":0,"height":0,"label":"MD Horiz. System Fault","labelPlacement":"right","labelAlignment":"left","colorForValue":[{"color":"#646464","value":"true","valueType":"bool"},{"color":"#ff0000","value":"false","valueType":"bool"}],"allowColorForValueInMessage":false,"shape":"square","showGlow":true,"name":"MD Horiz. System Fault","x":610,"y":1160,"wires":[]},{"id":"23e89fea9ffa3098","type":"ui_led","z":"ee1ffeb6c3e4a06e","g":"4c5adf699c5575c8","order":7,"group":"064bb7e05824a058","width":0,"height":0,"label":"R5 Joystick Left","labelPlacement":"right","labelAlignment":"left","colorForValue":[{"color":"#646464","value":"true","valueType":"bool"},{"color":"#008000","value":"false","valueType":"bool"}],"allowColorForValueInMessage":false,"shape":"square","showGlow":true,"name":"R5 Joystick Left","x":580,"y":1240,"wires":[]},{"id":"8dd009e6b3ecae80","type":"ui_led","z":"ee1ffeb6c3e4a06e","g":"4c5adf699c5575c8","order":8,"group":"064bb7e05824a058","width":0,"height":0,"label":"High Temp. in Drum","labelPlacement":"right","labelAlignment":"left","colorForValue":[{"color":"#ff0000","value":"false","valueType":"bool"},{"color":"#008000","value":"true","valueType":"bool"}],"allowColorForValueInMessage":false,"shape":"square","showGlow":true,"name":"High Temp. in Drum","x":590,"y":1280,"wires":[]},{"id":"1b12363157bd52bf","type":"ui_led","z":"ee1ffeb6c3e4a06e","g":"4c5adf699c5575c8","order":3,"group":"064bb7e05824a058","width":0,"height":0,"label":"R5 Focus Out Btn.","labelPlacement":"right","labelAlignment":"left","colorForValue":[{"color":"#646464","value":"true","valueType":"bool"},{"color":"#008000","value":"false","valueType":"bool"}],"allowColorForValueInMessage":false,"shape":"square","showGlow":true,"name":"R5 Focus Out Btn.","x":590,"y":1200,"wires":[]},{"id":"8f0861a6aef06add","type":"ui_led","z":"ee1ffeb6c3e4a06e","g":"4c5adf699c5575c8","order":10,"group":"064bb7e05824a058","width":0,"height":0,"label":"R5 Vertical Speed Btn. Plus","labelPlacement":"right","labelAlignment":"left","colorForValue":[{"color":"#646464","value":"true","valueType":"bool"},{"color":"#008000","value":"false","valueType":"bool"}],"allowColorForValueInMessage":false,"shape":"square","showGlow":true,"name":"R5 Vertical Speed Btn. Plus","x":620,"y":1320,"wires":[]},{"id":"16d9f8c68251bc23","type":"ui_led","z":"ee1ffeb6c3e4a06e","g":"d47e39f7ccb00e26","order":5,"group":"9e6176b8a64d7c2b","width":0,"height":0,"label":"SS Horiz. A","labelPlacement":"right","labelAlignment":"left","colorForValue":[{"color":"#646464","value":"false","valueType":"bool"},{"color":"#008000","value":"true","valueType":"bool"}],"allowColorForValueInMessage":false,"shape":"square","showGlow":true,"name":"SS Horiz. A","x":570,"y":1520,"wires":[]},{"id":"e49229445362b7e1","type":"ui_led","z":"ee1ffeb6c3e4a06e","g":"d47e39f7ccb00e26","order":5,"group":"9e6176b8a64d7c2b","width":0,"height":0,"label":"SS Horiz. B","labelPlacement":"right","labelAlignment":"left","colorForValue":[{"color":"#646464","value":"false","valueType":"bool"},{"color":"#ffff00","value":"true","valueType":"bool"}],"allowColorForValueInMessage":false,"shape":"square","showGlow":true,"name":"SS Horiz. B","x":570,"y":1600,"wires":[]},{"id":"444b80d2759e8722","type":"ui_led","z":"ee1ffeb6c3e4a06e","g":"d47e39f7ccb00e26","order":6,"group":"9e6176b8a64d7c2b","width":0,"height":0,"label":"Relay Ignite On","labelPlacement":"right","labelAlignment":"left","colorForValue":[{"color":"#646464","value":"false","valueType":"bool"},{"color":"#0000ff","value":"true","valueType":"bool"}],"allowColorForValueInMessage":false,"shape":"square","showGlow":true,"name":"Relay Ignite On","x":580,"y":1480,"wires":[]},{"id":"fb34a0c4cac8b70d","type":"ui_led","z":"ee1ffeb6c3e4a06e","g":"d47e39f7ccb00e26","order":3,"group":"9e6176b8a64d7c2b","width":0,"height":0,"label":"R5 Horiz. Speed Btn. Plus","labelPlacement":"right","labelAlignment":"left","colorForValue":[{"color":"#646464","value":"true","valueType":"bool"},{"color":"#008000","value":"false","valueType":"bool"}],"allowColorForValueInMessage":false,"shape":"square","showGlow":true,"name":"R5 Horiz. Speed Btn. Plus","x":610,"y":1560,"wires":[]},{"id":"45ffb31e217e4dcc","type":"ui_led","z":"ee1ffeb6c3e4a06e","order":1,"group":"5ff70e0f4e7a65cc","width":0,"height":0,"label":"Position safe","labelPlacement":"right","labelAlignment":"left","colorForValue":[{"color":"#7a7a7a","value":"false","valueType":"bool"},{"color":"#04ff00","value":"true","valueType":"bool"}],"allowColorForValueInMessage":false,"shape":"square","showGlow":true,"name":"Position safe","x":450,"y":1860,"wires":[]},{"id":"d2872236216a76a2","type":"udp in","z":"a23961c3c7ee5cb0","name":"FINS in","iface":"","port":"9600","ipv":"udp4","multicast":"false","group":"","datatype":"buffer","x":110,"y":120,"wires":[["1c3a5a042c7df2fd"]]},{"id":"8d31d5b37f642ef0","type":"comment","z":"a23961c3c7ee5cb0","name":"Incomming FINS request","info":"","x":170,"y":80,"wires":[]},{"id":"68ec345b2deb3698","type":"comment","z":"a23961c3c7ee5cb0","name":"Respond FINS request","info":"","x":1000,"y":460,"wires":[]},{"id":"6f5283ee76592b5c","type":"switch","z":"a23961c3c7ee5cb0","name":"Split on Telegram Type","property":"payload[0]","propertyType":"msg","rules":[{"t":"eq","v":"0x0101","vt":"num"},{"t":"eq","v":"0x0102","vt":"num"},{"t":"eq","v":"0x0104","vt":"num"},{"t":"eq","v":"0x2301","vt":"num"}],"checkall":"false","repair":false,"outputs":4,"x":340,"y":420,"wires":[["cfde7cda742b2f86"],["a9233f33cb1bbabb"],["b63746d9b5d13e82"],["994842e814108544"]]},{"id":"b63746d9b5d13e82","type":"function","z":"a23961c3c7ee5cb0","name":"0x0104 - Multiple Memory Area Read","func":"// Start with Response \"Normal completion\" \nvar myDataType = Buffer.from([0,0]);\nlet myList = [];\nlet inData = msg.payload[1];\n\n//var Header = flow.get(\"replyHeader\");\n//var Code = flow.get(\"dataCode\");\n\n//myList.push(Header, Code);\n\nmyList.push(myDataType);\n\n// Cycle trough 0x0104 Request Message\nlet i = 0;\nfor (i = 0; i < inData.byteLength;i+=4) {\n\n    // msg.payload[1][i]\n    //var myData = Buffer.from([0, 0, 0]);\n    let myData = Buffer.allocUnsafe(3);\n    myData[0] = inData[i];\n    let addr = inData.readInt16BE(i+1);\n\n    // Look up data\n    if ( (inData[i] == 128) || (inData[i] == 176) ) {  // CIO 0x80/0xB0\n\n        if (addr == 0) {            // Physical Input\n            myData.writeInt16BE(global.get(\"Physical_input\"), 1);\n        } else if (addr == 100) {   // Physical Output\n            myData.writeInt16BE(global.get(\"Physical_output\"), 1);\n        } else {\n            //Debug\n            myData.writeUInt16BE(0, 1);\n        }\n\n    } else if (inData[i] == 130) {  // DM 0x82\n\n        if (addr == 100) {          // D100 - Hor_pos_act[-180,180]\n            myData.writeInt16BE(Math.round(global.get(\"Horizontal_pos_act\")), 1);\n        } else if (addr == 200) {   // D200 - Vert_pos_act[-30,30]\n            myData.writeInt16BE(Math.round(global.get(\"Vertical_pos_act\")), 1);\n        } else if (addr == 402) {   // D402 \n            let myFocusPos = Buffer.allocUnsafe(4);  // Placeholder for the Float value [HiWord,LoWord]\n            let myFocus_Position = 0.0;\n            myFocus_Position = global.get(\"Focus_Position_Raw\");\n            myFocusPos.writeFloatBE(myFocus_Position, 0);\n            let myFocusPosLo = myFocusPos.readUInt16BE(2);\n            myData.writeUInt16BE(myFocusPosLo, 1);\n        } else if (addr == 403) {   // D403 \n            let myFocusPos = Buffer.allocUnsafe(4);  // Placeholder for the Float value [HiWord,LoWord]\n            let myFocus_Position = 0.0;\n            myFocus_Position = global.get(\"Focus_Position_Raw\");\n            myFocusPos.writeFloatBE(myFocus_Position, 0);\n            let myFocusPosHi = myFocusPos.readUInt16BE(0);\n            myData.writeUInt16BE(myFocusPosHi, 1);\n        } else if (addr == 404) {   // D404 \n            let myFocusPos = Buffer.allocUnsafe(4);  // Placeholder for the Float value [HiWord,LoWord]\n            let myFocus_Position = 0.0;\n            myFocus_Position = global.get(\"Focus_Position\");\n            myFocusPos.writeFloatBE(myFocus_Position, 0);\n            let myFocusPosLo = myFocusPos.readUInt16BE(2);\n            myData.writeUInt16BE(myFocusPosLo, 1);\n        } else if (addr == 405) {   // D405 \n            let myFocusPos = Buffer.allocUnsafe(4);  // Placeholder for the Float value [HiWord,LoWord]\n            let myFocus_Position = 0.0;\n            myFocus_Position = global.get(\"Focus_Position\");\n            myFocusPos.writeFloatBE(myFocus_Position, 0);\n            let myFocusPosHi = myFocusPos.readUInt16BE(0);\n            myData.writeUInt16BE(myFocusPosHi, 1);\n        } else if (addr == 3100) {   // DM3100\n            myData.writeUInt16BE(Math.floor(global.get(\"myHoursOfUseLamp\")) & 0xFFFF, 1);\n        } else if (addr == 3102) {   // DM3102\n            myData.writeUInt16BE(Math.abs(global.get(\"myTimesOfStrikesLamp\")) & 0xFFFF, 1);\n        } else if (addr == 3104) {   // DM3104\n            myData.writeUInt16BE(Math.abs(global.get(\"myAlarmLimitLamp\"))&0xFFFF, 1);\n            //myData.writeUInt16BE(3000, 1);\n        } else if (addr == 5000) {   // D5000 - Horizontal Raw Position \n            let myRawHorizPos = Buffer.allocUnsafe(4);  // Placeholder for the Float value [HiWord,LoWord]\n            myRawHorizPos.writeFloatBE(global.get(\"Horizontal_pos_last_raw\"), 0);\n            let myRawHorizPosLo = myRawHorizPos.readUInt16BE(2);\n            myData.writeUInt16BE(myRawHorizPosLo, 1);\n        } else if (addr == 5001) {   // D5001 \n            let myRawHorizPos = Buffer.allocUnsafe(4);  // Placeholder for the Float value [HiWord,LoWord]\n            myRawHorizPos.writeFloatBE(global.get(\"Horizontal_pos_last_raw\"), 0);\n            let myRawHorizPosHi = myRawHorizPos.readUInt16BE(0);\n            myData.writeUInt16BE(myRawHorizPosHi, 1);\n        } else if (addr == 5010) {   // D5010 - Vertical Raw Position \n            let myRawVertPos = Buffer.allocUnsafe(4);  // Placeholder for the Float value [HiWord,LoWord]\n            myRawVertPos.writeFloatBE(global.get(\"Vertical_pos_last_raw\"), 0);\n            let myRawVertPosLo = myRawVertPos.readUInt16BE(2);\n            myData.writeUInt16BE(myRawVertPosLo, 1);\n        } else if (addr == 5011) {   // D5011 \n            let myRawVertPos = Buffer.allocUnsafe(4);  // Placeholder for the Float value [HiWord,LoWord]\n            myRawVertPos.writeFloatBE(global.get(\"Vertical_pos_last_raw\"), 0);\n            let myRawVertPosHi = myRawVertPos.readUInt16BE(0);\n            myData.writeUInt16BE(myRawVertPosHi, 1);\n        } else {\n            myData.writeUInt16BE(0, 1);\n        }\n\n    } else if (inData[i] == 177) {  // W 0xB1\n\n        let regW = global.get(\"regW\");\n\n        if (addr == 0) {            // W0\n            myData.writeInt16BE(regW.W0, 1);\n        } else if (addr == 1) {            // W1 - (W1.0 Blocked_Hor)\n                myData.writeInt16BE(regW.W1, 1);\n        } else if (addr == 2) {     // W2 - (W2.5 Reset_Init_Error)\n            myData.writeInt16BE(regW.W2, 1);\n        } else if (addr == 10) {     // W10\n            myData.writeInt16BE(regW.W10, 1);\n        } else if (addr == 11) {    // W11 - (W11.0 Blocked_Vert)\n            myData.writeInt16BE(regW.W11, 1);\n        } else if (addr == 15) {    // W15\n            myData.writeInt16BE(regW.W15, 1);\n        } else if (addr == 20) {    // W20\n            myData.writeInt16BE(regW.W20, 1);\n        } else if (addr == 21) {    // W21\n            myData.writeInt16BE(regW.W21, 1);\n        } else if (addr == 30) {    // W30 - Alarm_A\n            myData.writeInt16BE(regW.W30, 1);\n        } else if (addr == 31) {    // W31 - Alarm_B\n            myData.writeInt16BE(regW.W31, 1);\n        } else if (addr == 32) {    // W32 - Alarm_C\n            myData.writeInt16BE(regW.W32, 1);\n        } else if (addr == 33) {    // W33 - Alarm_Active\n            myData.writeInt16BE(regW.W33, 1);\n        } else if (addr == 34) {    // W34 - System Temp.\n            myData.writeInt16BE(regW.W33, 1);\n        } else if (addr == 70) {    // W70\n            myData.writeInt16BE(regW.W70, 1);\n        } else if (addr == 100) {    // W100\n            myData.writeInt16BE(regW.W100, 1);\n        } else if (addr == 105) {    // W105\n            myData.writeInt16BE(regW.W105, 1);\n        } else if (addr == 110) {    // W110\n            myData.writeInt16BE(regW.W110, 1);\n        } else {\n            myData.writeUInt16BE(0, 1);\n        }\n\n    } else if (inData[i] == 178) {  // H 0xB2\n\n        if (addr == 100) {          // H100 - SL_Version\n            myData.writeInt16BE(global.get(\"SL_Version\"), 1);\n        } else if (addr == 101) {          // H101 - SL_Version_hi?\n            myData.writeInt16BE(global.get(\"SL_Version\")>>16, 1);\n        } else if (addr == 104) {   // H104\n            myData.writeInt16BE(global.get(\"H104\"), 1);\n        } else if (addr == 105) {   // H105\n            myData.writeInt16BE(global.get(\"H105\"), 1);\n        } else if (addr == 106) {   // H106\n            myData.writeInt16BE(global.get(\"H106\"), 1);\n        } else if (addr == 107) {   // H107\n            myData.writeInt16BE(global.get(\"H107\"), 1);\n        } else if (addr == 110) {   // H110 - myVertRatio\n            let myVertRatio = Buffer.allocUnsafe(4);  // Placeholder for the Float value [HiWord,LoWord]\n            myVertRatio.writeFloatBE(global.get(\"myVertRatio\"), 0);\n            let myVertRatioLo = myVertRatio.readUInt16BE(2);\n            myData.writeUInt16BE(myVertRatioLo, 1);\n        } else if (addr == 111) {   // H111 \n            let myVertRatio = Buffer.allocUnsafe(4);  // Placeholder for the Float value [HiWord,LoWord]\n            myVertRatio.writeFloatBE(global.get(\"myVertRatio\"), 0);\n            let myVertRatioHi = myVertRatio.readUInt16BE(0);\n            myData.writeUInt16BE(myVertRatioHi, 1);\n        } else if (addr == 112) {   // H112 - myHorizRatio\n            let myHorizRatio = Buffer.allocUnsafe(4);  // Placeholder for the Float value [HiWord,LoWord]\n            myHorizRatio.writeFloatBE(global.get(\"myHorizRatio\"), 0);\n            let myHorizRatioLo = myHorizRatio.readUInt16BE(2);\n            myData.writeUInt16BE(myHorizRatioLo, 1);\n        } else if (addr == 113) {   // H113 \n            let myHorizRatio = Buffer.allocUnsafe(4);  // Placeholder for the Float value [HiWord,LoWord]\n            myHorizRatio.writeFloatBE(global.get(\"myHorizRatio\"), 0);\n            let myHorizRatioHi = myHorizRatio.readUInt16BE(0);\n            myData.writeUInt16BE(myHorizRatioHi, 1);\n        } else if (addr == 114) {   // H114 - Init Value Horizontal LSB\n            myData.writeInt16BE(global.get(\"myHorizontalInitValue\"), 1);\n        } else if (addr == 115) {   // H115 - Init Value Horizontal MSB\n            if (global.get(\"myHorizontalInitValue\") < 0) {\n                myData.writeUInt16BE(0xFFFF, 1);\n            } else {\n                myData.writeUInt16BE(0, 1);\n            }\n        } else if (addr == 116) {   // H116 - Init Value Vertical LSB\n            myData.writeInt16BE(global.get(\"myVerticalInitValue\"), 1);\n        } else if (addr == 117) {   // H117 - Init Value Vertical MSB\n            if (global.get(\"myVerticalInitValue\") < 0) {\n                myData.writeUInt16BE(0xFFFF, 1);\n            } else {\n                myData.writeUInt16BE(0, 1);\n            }\n        } else if (addr == 118) {   // H118\n            let myHorizRatio = Buffer.allocUnsafe(4);  // Placeholder for the Float value [HiWord,LoWord]\n            myHorizRatio.writeFloatBE(global.get(\"H118\")/10.0, 0);\n            let myHorizRatioLo = myHorizRatio.readUInt16BE(2);\n            myData.writeUInt16BE(myHorizRatioLo, 1);\n        } else if (addr == 119) {   // H119 \n            let myHorizRatio = Buffer.allocUnsafe(4);  // Placeholder for the Float value [HiWord,LoWord]\n            myHorizRatio.writeFloatBE(global.get(\"H118\")/10.0, 0);\n            let myHorizRatioHi = myHorizRatio.readUInt16BE(0);\n            myData.writeUInt16BE(myHorizRatioHi, 1);\n        } else if (addr == 120) {   // H120\n            let myHorizRatio = Buffer.allocUnsafe(4);  // Placeholder for the Float value [HiWord,LoWord]\n            myHorizRatio.writeFloatBE(global.get(\"H120\")/10.0, 0);\n            let myHorizRatioLo = myHorizRatio.readUInt16BE(2);\n            myData.writeUInt16BE(myHorizRatioLo, 1);\n        } else if (addr == 121) {   // H121 \n            let myHorizRatio = Buffer.allocUnsafe(4);  // Placeholder for the Float value [HiWord,LoWord]\n            myHorizRatio.writeFloatBE(global.get(\"H120\")/10.0, 0);\n            let myHorizRatioHi = myHorizRatio.readUInt16BE(0);\n            myData.writeUInt16BE(myHorizRatioHi, 1);\n        } else if (addr == 122) {   // H122\n            myData.writeUInt16BE(100, 1);\n        } else if (addr == 124) {   // H124\n            myData.writeUInt16BE(100, 1);\n        } else if (addr == 150) {   // H150\n            myData.writeUInt16BE(global.get(\"H150\"), 1);\n        } else if (addr == 151) {   // H151\n            myData.writeUInt16BE(global.get(\"H151\"), 1);\n        } else if ((addr >= 200) && ((addr <= 206))) {   // H200   \n            let sH200 = global.get(\"H200\");\n            let A = sH200.charCodeAt((addr - 200) * 2);\n            let B = sH200.charCodeAt(((addr - 200) * 2)+1);\n            myData.writeInt16BE((A<<8) | B, 1);\n        } else if ((addr >= 210) && ((addr <= 216))) {   // H210   \n            let sH210 = global.get(\"H210\");\n            let A = sH210.charCodeAt((addr - 210) * 2);\n            let B = sH210.charCodeAt(((addr - 210) * 2)+1);\n            myData.writeInt16BE((A<<8) | B, 1);\n        } else if ((addr >= 220) && ((addr <= 227))) {   // H220   \n            let sH220 = global.get(\"H220\");\n            let A = sH220.charCodeAt((addr - 220) * 2);\n            let B = sH220.charCodeAt(((addr - 220) * 2)+1);\n            myData.writeInt16BE((A<<8) | B, 1);\n        } else if (addr == 254) {   // H254 - Horizontal_speed\n            myData.writeUInt16BE(global.get(\"Horizontal_speed\"), 1);\n        } else if (addr == 256) {   // H256 - Vertical_speed\n            myData.writeUInt16BE(global.get(\"Vertical_speed\"), 1);\n        } else if (addr == 260) {   // H260 - Slave_Speed_Hor\n            myData.writeUInt16BE(global.get(\"H260\"), 1);\n        } else if (addr == 261) {   // H261 - Slave_Speed_Vert\n            myData.writeUInt16BE(global.get(\"H261\"), 1);\n        } else if (addr == 302) {   // H302 - Hor_Sweep_Limit_Neg\n            myData.writeInt16BE(global.get(\"H302\"), 1);\n        } else if (addr == 303) {   // H302 - Hor_Sweep_Limit_Neg hi\n            if(global.get(\"H302\")<0) {\n                myData.writeUInt16BE(0xFFFF, 1);\n            } else {\n                myData.writeUInt16BE(0x0000, 1);\n            }\n        } else if (addr == 304) {   // H304 - Hor_Sweep_Limit_Pos\n            myData.writeInt16BE(global.get(\"H304\"), 1);\n        } else if (addr == 305) {   // H304 - Hor_Sweep_Limit_Pos hi\n            if(global.get(\"H304\")<0) {\n                myData.writeUInt16BE(0xFFFF, 1);\n            } else {\n                myData.writeUInt16BE(0x0000, 1);\n            }\n        } else if (addr == 306) {   // H306 - Vert_Sweep_Limit_Neg\n            myData.writeInt16BE(global.get(\"H306\"), 1);\n        } else if (addr == 307) {   // H306 - Vert_Sweep_Limit_Neg hi\n            if(global.get(\"H306\")<0) {\n                myData.writeUInt16BE(0xFFFF, 1);\n            } else {\n                myData.writeUInt16BE(0x0000, 1);\n            }\n        } else if (addr == 308) {   // H308 - Vert_Sweep_Limit_Pos\n            myData.writeInt16BE(global.get(\"H308\"), 1);\n        } else if (addr == 309) {   // H308 - Vert_Sweep_Limit_Pos hi\n            if(global.get(\"H308\")<0) {\n                myData.writeUInt16BE(0xFFFF, 1);\n            } else {\n                myData.writeUInt16BE(0x0000, 1);\n            }\n        } else if (addr == 310) {   // H310 - Hor_Home1\n            myData.writeInt16BE(global.get(\"H310\"), 1);\n        } else if (addr == 311) {   // H311 - Hor_Home1 hi\n            if (global.get(\"H310\")<0) {\n                myData.writeUInt16BE(0xFFFF, 1);\n            } else {\n                myData.writeUInt16BE(0x0000, 1);\n            }\n        } else if (addr == 312) {   // H312 - Vert_Home1\n            myData.writeInt16BE(global.get(\"H312\"), 1);\n        } else if (addr == 313) {   // H313 - Vert_Home1 hi\n            if (global.get(\"H312\") < 0) {\n                myData.writeUInt16BE(0xFFFF, 1);\n            } else {\n                myData.writeUInt16BE(0x0000, 1);\n            }\n        } else if (addr == 314) {   // H314 - Hor_Home2\n            myData.writeInt16BE(global.get(\"H314\"), 1);\n        } else if (addr == 315) {   // H314 - Hor_Home2 hi\n            if(global.get(\"H314\")<0) {\n                myData.writeUInt16BE(0xFFFF, 1);\n            } else {\n                myData.writeUInt16BE(0x0000, 1);\n            }\n        } else if (addr == 316) {   // H316 - Vert_Home2\n            myData.writeInt16BE(global.get(\"H316\"), 1);\n        } else if (addr == 317) {   // H316 - Vert_Home2 hi\n            if(global.get(\"H316\")<0) {\n                myData.writeUInt16BE(0xFFFF, 1);\n            } else {\n                myData.writeUInt16BE(0x0000, 1);\n            }\n        } else if (addr == 318) {   // H318 - Hor_User_Limit_Neg\n            myData.writeInt16BE(global.get(\"H318\"), 1);\n        } else if (addr == 319) {   // H318 - Hor_User_Limit_Neg hi\n            if(global.get(\"H318\")<0) {\n                myData.writeUInt16BE(0xFFFF, 1);\n            } else {\n                myData.writeUInt16BE(0x0000, 1);\n            }\n        } else if (addr == 320) {   // H320 - Hor_User_Limit_Pos\n            myData.writeInt16BE(global.get(\"H320\"), 1);\n        } else if (addr == 321) {   // H320 - Hor_User_Limit_Pos hi\n            if(global.get(\"H320\")<0) {\n                myData.writeUInt16BE(0xFFFF, 1);\n            } else {\n                myData.writeUInt16BE(0x0000, 1);\n            }\n        } else if (addr == 322) {   // H322 - Vert_User_Limit_Neg\n            myData.writeInt16BE(global.get(\"H322\"), 1);\n        } else if (addr == 323) {   // H322 - Vert_User_Limit_Neg hi\n            if(global.get(\"H322\")<0) {\n                myData.writeUInt16BE(0xFFFF, 1);\n            } else {\n                myData.writeUInt16BE(0x0000, 1);\n            }\n        } else if (addr == 324) {   // H324 - Vert_User_Limit_Pos\n            myData.writeInt16BE(global.get(\"H324\"), 1);\n        } else if (addr == 325) {   // H324 - Vert_User_Limit_Pos hi\n            if(global.get(\"H324\")<0) {\n                myData.writeUInt16BE(0xFFFF, 1);\n            } else {\n                myData.writeUInt16BE(0x0000, 1);\n            }\n        } else if (addr == 326) {   // H326 - PWM_Frekv_Hort\n            myData.writeUInt16BE(global.get(\"H326\"), 1);\n        } else if (addr == 328) {   // H328 - PWM_Frekv_Vert\n            myData.writeUInt16BE(global.get(\"H328\"), 1);\n        } else {\n            myData.writeUInt16BE(0, 1);\n        }\n\n    }\n\n    myList.push(myData);\n\n}  //..for (i = 0;...\n\nvar telegram = Buffer.concat(myList);\n\nreturn { payload: telegram, replyHeader: msg.replyHeader, ip: msg.ip, port: msg.port };","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":650,"y":440,"wires":[["3cf8dd852c6eb7c3"]]},{"id":"994842e814108544","type":"function","z":"a23961c3c7ee5cb0","name":"0x2301 - Forced Set/Reset","func":"// Start with Response \"Normal completion\" \nvar myDataType = Buffer.from([0, 0]);\n// Padding \nvar myPadding = Buffer.from([0, 0, 0, 0]);\nlet myList = [];\nlet inData = msg.payload[1];\nlet noOfBits = inData.readUInt16BE(0);\n\nmyList.push(myDataType, myPadding);\n\nlet regW = global.get(\"regW\");\n\n\n// Cycle trough 0x2301 Forced Set/Reset Message\nlet i = 2;\n//for (; i < inData.byteLength;i+=6) {\n\n    let setResetSpes = inData.readUInt16BE(i);\n    let memAreaCode = inData.readUInt8(i + 2);\n    let addr = inData.readUInt16BE(i + 3);\n    let bitFlag = inData.readUInt8(i + 5);\n\n    // Look up data\n    if (memAreaCode == 49) {          // CS1 0x31\n\n        if (addr == 0) {              // W0\n\n            // W0.0 - SoftJS_Hor_CCW_input (JS Left)\n            // W0.1 - SoftJS_Hor_CW_Input (JS Right)\n            // W0.7 - Hor_Sweep_Panel\n            if (setResetSpes & 0x0001) {\n                regW.W0 |= (0x0001 << bitFlag);  // Set W0.bitFlag\n            } else {\n                regW.W0 &= ~(0x0001 << bitFlag);  // Clear W0.bitFlag\n            }\n            msg.topic = 1;\n\n        } else if (addr == 1) {       // W01\n\n            if (setResetSpes & 0x0001) {\n                regW.W1 |= (0x0001 << bitFlag);  // Set W2.bitFlag\n            } else {\n                regW.W1 &= ~(0x0001 << bitFlag);  // Clear W2.bitFlag\n            }\n            msg.topic = 2;\n\n        } else if (addr == 2) {       // W02\n\n            if (setResetSpes & 0x0001) {\n                regW.W2 |= (0x0001 << bitFlag);  // Set W2.bitFlag\n            } else {\n                regW.W2 &= ~(0x0001 << bitFlag);  // Clear W2.bitFlag\n            }\n            msg.topic = 2;\n\n        } else if (addr == 10) {       // W10\n\n            // W10.0 - SoftJS_Vert_CCW_input (JS Down)\n            // W10.1 - SoftJS_Vert_CW_input (JS Up)\n            if (setResetSpes & 0x0001) {\n                regW.W10 |= (0x0001 << bitFlag);  // Set W10.bitFlag\n            } else {\n                regW.W10 &= ~(0x0001 << bitFlag);  // Clear W10.bitFlag\n            }\n            msg.topic = 10;\n\n        } else if (addr == 11) {       // W11\n\n            if (setResetSpes & 0x0001) {\n                regW.W11 |= (0x0001 << bitFlag);  // Set W10.bitFlag\n            } else {\n                regW.W11 &= ~(0x0001 << bitFlag);  // Clear W10.bitFlag\n            }\n            msg.topic = 11;\n\n        } else if (addr == 15) {       // W15\n\n            if (setResetSpes & 0x0001) {\n                regW.W15 |= (0x0001 << bitFlag);  // Set W15.bitFlag\n            } else {\n                regW.W15 &= ~(0x0001 << bitFlag);  // Clear W15.bitFlag\n            }\n            //regW.W15 = inData.readUInt16BE(i);\n            if(regW.W15&0b111100) {\n                let H150 = global.get(\"H150\");\n                H150 &= ~(0b1111);\n                if(regW.W15 & 0b000100) {\n                    H150 |= 0b0001;\n                }\n                if(regW.W15 & 0b001000) {\n                    H150 |= 0b0010;\n                }\n                if(regW.W15 & 0b010000) {\n                    H150 |= 0b0100;\n                }\n                if(regW.W15 & 0b100000) {\n                    H150 |= 0b1000;\n                }\n                global.set(\"H150\",H150);\n                msg.topic = 150;\n            }\n\n        } else if (addr == 20) {       // W20\n\n            // W20.0 - Focus_Pos_Panel\n            // W20.1 - Focus_Neg_Panel\n            if (setResetSpes & 0x0001) {\n                regW.W20 |= (0x0001 << bitFlag);  // Set W20.bitFlag\n            } else {\n                regW.W20 &= ~(0x0001 << bitFlag);  // Clear W20.bitFlag\n            }\n            msg.topic = 20;\n\n        } else if (addr == 50) {       // W50\n\n            if (setResetSpes & 0x0001) {\n                regW.W50 |= (0x0001 << bitFlag);  // Set W50.bitFlag\n            } else {\n                regW.W50 &= ~(0x0001 << bitFlag);  // Clear W50.bitFlag\n            }\n            msg.topic = 50;\n\n        } else if (addr == 70) {      // W70\n\n            // W70.6 - Ignite_from_Panel\n            if (setResetSpes & 0x0001) {\n                regW.W70 |= (0x0001 << bitFlag);  // Set W70.bitFlag\n            } else {\n                regW.W70 &= ~(0x0001 << bitFlag);  // Clear W70.bitFlag\n            }\n            msg.topic = 70;\n\n        } else if (addr == 110) {      // W110\n\n            // W110.0 - Home1_Order\n            if (setResetSpes & 0x0001) {\n                regW.W110 |= (0x0001 << bitFlag);  // Set W110.bitFlag\n            } else {\n                regW.W110 &= ~(0x0001 << bitFlag);  // Clear W110.bitFlag\n            }\n            msg.topic = 110;\n\n        }\n\n        global.set(\"regW\", regW);\n\n    } else if (memAreaCode == 0x32) {          0x32\n\n        if (addr == 151) {      // H151\n\n            // H151.00 - Enable Temp. Alarm\n            if (bitFlag==0) {\n                let H151 = global.get(\"H151\") & 0xFFFE;\n                if (setResetSpes & 0x0001) {\n                    H151 |= 1;  // Set H151.00\n                }\n                global.set(\"H151\",H151);\n                msg.topic = 151;\n            }\n        } else if (addr == 150) {          // H150\n            if (bitFlag==4) {\n                let H150 = global.get(\"H150\") & 0b1111111111101111;\n                if (setResetSpes & 0x0001) {\n                    H150 |= 0b10000;  // Set H150.04\n                }\n                global.set(\"H150\", H150);\n                msg.topic = 150;\n            } else if (bitFlag==5) {\n                let H150 = global.get(\"H150\") & 0b1111111111011111;\n                if (setResetSpes & 0x0001) {\n                    H150 |= 0b100000;  // Set H150.05\n                }\n                global.set(\"H150\", H150);\n                msg.topic = 150;\n            } else if (bitFlag==6) {\n                let H150 = global.get(\"H150\") & 0b1111111110111111;\n                if (setResetSpes & 0x0001) {\n                    H150 |= 0b1000000;  // Set H150.06\n                }\n                global.set(\"H150\", H150);\n                msg.topic = 150;\n            } else if (bitFlag==7) {\n                let H150 = global.get(\"H150\") & 0b1111111101111111;\n                if (setResetSpes & 0x0001) {\n                    H150 |= 0b10000000;  // Set H150.07\n                }\n                global.set(\"H150\", H150);\n                msg.topic = 150;\n            } else if (bitFlag==8) {\n                let H150 = global.get(\"H150\") & 0b1111111011111111;\n                if (setResetSpes & 0x0001) {\n                    H150 |= 0b100000000;  // Set H150.08\n                }\n                global.set(\"H150\", H150);\n                msg.topic = 150;\n            } else if (bitFlag==9) {\n                let H150 = global.get(\"H150\") & 0b1111110111111111;\n                if (setResetSpes & 0x0001) {\n                    H150 |= 0b1000000000;  // Set H150.09\n                }\n                global.set(\"H150\", H150);\n                msg.topic = 150;\n            } else if (bitFlag==10) {\n                let H150 = global.get(\"H150\") & 0b1111101111111111;\n                if (setResetSpes & 0x0001) {\n                    H150 |= 0b10000000000;  // Set H150.10\n                }\n                global.set(\"H150\", H150);\n                msg.topic = 150;\n            }\n        }\n    }\n\n//}  //..for (i = 2;...\n\nlet telegram = Buffer.concat(myList);\n\nreturn [\n    { payload: telegram, replyHeader: msg.replyHeader, ip: msg.ip, port: msg.port },\n    { payload: regW, topic: msg.topic }\n];","outputs":2,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":680,"y":540,"wires":[["3cf8dd852c6eb7c3"],["13de19daf454dd9d"]]},{"id":"a9233f33cb1bbabb","type":"function","z":"a23961c3c7ee5cb0","name":"0x0102 - Memory Area Write","func":"// Start with Response \"Normal completion\" \nvar myDataType = Buffer.from([0, 0]);\n// Padding \nvar myPadding = Buffer.from([0, 0, 0, 0]);\nlet myList = [];\nlet inData = msg.payload[1];\n\nmyList.push(myDataType, myPadding);\n\nlet memAreaCode = inData.readUInt8(0);\nlet addr = inData.readUInt16BE(1);\nlet bitFlag = inData.readUInt8(3);\nlet numOfItems = inData.readUInt16BE(4);\n\nlet regW = global.get(\"regW\");\n\n\n//let myResponse = [];\n\n\n// Cycle trough 0x0102 Memory Area Write Data\nlet i = 6;\n\n// Look up data\nif (memAreaCode == 0x31) {          // W 0x31 (Bit wise)\n\n    if (addr == 20) {       // W20\n\n        // W20.0 - Focus_Pos_Panel\n        // W20.1 - Focus_Neg_Panel\n        if (inData.readUInt8(i)) {\n            regW.W20 |= (0x0001 << bitFlag);  // Set W20.bitFlag\n        } else {\n            regW.W20 &= ~(0x0001 << bitFlag);  // Clear W20.bitFlag\n        }\n        msg.topic = 20;\n\n    } else if (addr == 50) {       // W50\n\n        // W50.00 (down)\n        // W50.01 (up)\n        // W50.02 (left)\n        // W50.03 (right)\n        if (inData.readUInt8(i)) {\n            regW.W50 |= (0x0001 << bitFlag);  // Set W50.bitFlag\n        } else {\n            regW.W50 &= ~(0x0001 << bitFlag);  // Clear W50.bitFlag\n        }\n        msg.topic = 50;\n\n    } else if (addr == 70) {      // W70\n\n        // W70.6 - Ignite_from_Panel\n        if (inData.readUInt8(i)) {\n            regW.W70 |= (0x0001 << bitFlag);  // Set W70.bitFlag\n        } else {\n            regW.W70 &= ~(0x0001 << bitFlag);  // Clear W70.bitFlag\n        }\n        msg.topic = 70;\n\n    } else if (addr == 110) {      // W110\n\n            // W110.00 - Home1_Order\n            // W110.03 - Home2_Order\n            if (inData.readUInt8(i)) {\n                regW.W110 |= (0x0001 << bitFlag);  // Set W110.bitFlag\n            } else {\n                regW.W110 &= ~(0x0001 << bitFlag);  // Clear W110.bitFlag\n            }\n            msg.topic = 110;\n        }\n\n    global.set(\"regW\", regW);\n\n} else if(memAreaCode == 0x82) {          // DM 0x82\n\n    if (addr == 3104) {          // DM3104 - Alarm-Limit Lamp (Hours) \n        let ALL = inData.readUInt16BE(i);\n        global.set(\"myAlarmLimitLamp\", ALL);\n        msg.topic = 3104;\n        // } else {\n        //    myResponse.push(memAreaCode, addr, inData.readInt16BE(i));\n    }\n\n} else if (memAreaCode == 0xB1) {          // W 0xB1\n\n    if (addr == 0) {          // W0 - Joystick .00-03, \n        regW.W0 = inData.readUInt16BE(i);\n        msg.topic = 1;\n    } else if (addr == 1) {          // W1 \n        regW.W2 = inData.readUInt16BE(i);\n        msg.topic = 2;\n    } else if (addr == 2) {          // W2 \n        regW.W2 = inData.readUInt16BE(i);\n        msg.topic = 2;\n    } else if (addr == 10) {          // W10 - Joystick .00-03 \n        regW.W10 = inData.readUInt16BE(i);\n        msg.topic = 10;\n    } else if (addr == 11) {          // W11 \n        regW.W11 = inData.readUInt16BE(i);\n        msg.topic = 11;\n    } else if (addr == 15) {          // W15 - Installation Angle\n\n        regW.W15 = inData.readUInt16BE(i);\n        if(regW.W15&0b111100) {\n            let H150 = global.get(\"H150\");\n            H150 &= ~(0b1111);\n            if(regW.W15 & 0b000100) {\n                H150 |= 0b0001;\n            }\n            if(regW.W15 & 0b001000) {\n                H150 |= 0b0010;\n            }\n            if(regW.W15 & 0b010000) {\n                H150 |= 0b0100;\n            }\n            if(regW.W15 & 0b100000) {\n                H150 |= 0b1000;\n            }\n            global.set(\"H150\",H150);\n            msg.topic = 150;\n        }\n\n    } else if (addr == 20) {       // W20\n        regW.W20 = inData.readUInt16BE(i);\n        msg.topic = 20;\n    } else if (addr == 50) {          // W50 - Joystick .00-03, \n        regW.W50 = inData.readInt16BE(i);\n        msg.topic = 50;\n    } else if (addr == 70) {          // W70 \n        regW.W70 = inData.readUInt16BE(i);\n        msg.topic = 70;\n    } else if (addr == 110) {          // W110 \n        regW.W110 = inData.readInt16BE(i);\n        msg.topic = 110;\n    // } else {\n    //    myResponse.push(memAreaCode, addr, inData.readInt16BE(i));\n    }\n\n    global.set(\"regW\", regW);\n\n} else if (memAreaCode == 0xB2) {          // H 0xB2\n\n    msg.topic = 12345;\n\n    if (addr == 104) {          // H104 - Hor_Speed_Level1\n        global.set(\"H104\", inData.readInt16BE(i));\n    } else if (addr == 105) {          // H105 - Hor_Speed_Level2\n        global.set(\"H105\", inData.readInt16BE(i));\n    } else if (addr == 106) {          // H106 - Vert_Speed_Level1\n        global.set(\"H106\", inData.readInt16BE(i));\n    } else if (addr == 107) {          // H107 - Vert_Speed_Level2\n        global.set(\"H107\", inData.readInt16BE(i));\n    } else if (addr == 114) {          // H114 - Init Value Horizontal\n            global.set(\"myHorizontalInitValue\", inData.readInt16BE(i));\n    } else if (addr == 116) {          // H116 - Init Value Vertical\n        global.set(\"myVerticalInitValue\", inData.readInt16BE(i));\n    } else if (addr == 150) {          // H150\n        global.set(\"H150\", inData.readInt16BE(i));\n        msg.topic = 150;\n    } else if (addr == 151) {          // H151\n        global.set(\"H151\", inData.readInt16BE(i));\n        msg.topic = 151;\n    } else if (addr == 200) {          // H200 - Go To Pos name\n        let mySLName = inData.toString('utf-8', i, i + (numOfItems * 2));\n        global.set(\"H200\", mySLName.replace(/^[\\s\\uFEFF\\xA0\\0]+|[\\s\\uFEFF\\xA0\\0]+$/g, \"\"));\n    } else if (addr == 210) {          // H210 - Park Name\n        let mySLName = inData.toString('utf-8', i, i + (numOfItems * 2));\n        global.set(\"H210\", mySLName.replace(/^[\\s\\uFEFF\\xA0\\0]+|[\\s\\uFEFF\\xA0\\0]+$/g, \"\"));\n    } else if (addr == 220) {          // H220 - Searchlight Name\n        let mySLName = inData.toString('utf-8', i, i + (numOfItems * 2));\n        global.set(\"H220\", mySLName.replace(/^[\\s\\uFEFF\\xA0\\0]+|[\\s\\uFEFF\\xA0\\0]+$/g, \"\"));\n    } else if (addr == 0x00FE) {          // H254 - Horizontal_speed\n        global.set(\"Horizontal_speed\", inData.readUInt16BE(i));\n    } else if (addr == 0x0100) {   // H256 - Vertical_speed\n        global.set(\"Vertical_speed\", inData.readUInt16BE(i));\n    } else if (addr == 260) {          // H260 - Slave Speed Hor.\n        global.set(\"H260\", inData.readInt16BE(i));\n    } else if (addr == 261) {          // H261 - Slave Speed Vert.\n        global.set(\"H261\", inData.readInt16BE(i));\n    } else if (addr == 302) {          // H302 - Hor. Sweep limit neg.\n        global.set(\"H302\", inData.readInt16BE(i));\n    } else if (addr == 304) {          // H304 - Hor. Sweep limit pos.\n        global.set(\"H304\", inData.readInt16BE(i));\n    } else if (addr == 306) {          // H306 - Vert. Sweep limit neg.\n        global.set(\"H306\", inData.readInt16BE(i));\n    } else if (addr == 308) {          // H308 - Vert. Sweep limit pos.\n        global.set(\"H308\", inData.readInt16BE(i));\n    } else if (addr == 310) {          // H310 - Hor. Position Home1\n        global.set(\"H310\", inData.readInt16BE(i));\n    } else if (addr == 312) {          // H312 - Vert. Position Home1\n        global.set(\"H312\", inData.readInt16BE(i));\n    } else if (addr == 314) {          // H314 - Hor. Position Home2\n        global.set(\"H314\", inData.readInt16BE(i));\n    } else if (addr == 316) {          // H316 - Vert. Position Home2\n        global.set(\"H316\", inData.readInt16BE(i));\n    } else if (addr == 318) {          // H318 - Hor. Sector Limit Neg.\n        global.set(\"H318\", inData.readInt16BE(i));\n    } else if (addr == 320) {          // H320 - Hor. Sector Limit Pos.\n        global.set(\"H320\", inData.readInt16BE(i));\n    } else if (addr == 322) {          // H322 - Vert. Sector Limit Neg.\n        global.set(\"H322\", inData.readInt16BE(i));\n    } else if (addr == 324) {          // H324 - Vert. Sector Limit Pos.\n        global.set(\"H324\", inData.readInt16BE(i));\n    // } else {\n    //    myResponse.push(memAreaCode, addr, numOfItems, inData.readInt16BE(i));\n    }\n\n// } else {\n//    myResponse.push(memAreaCode, addr, numOfItems, inData.readInt16BE(i));\n}\n\nlet telegram = Buffer.concat(myList);\n\nreturn [\n    { payload: telegram, replyHeader: msg.replyHeader, ip: msg.ip, port: msg.port },\n    { payload: regW, topic: msg.topic }    \n];","outputs":2,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":680,"y":360,"wires":[["3cf8dd852c6eb7c3"],["e986980a98b2f28f"]]},{"id":"cfde7cda742b2f86","type":"function","z":"a23961c3c7ee5cb0","name":"0x0101 - Memory Area Read","func":"// Start with Response \"Normal completion\" \nvar myDataType = Buffer.from([0,0]);\nlet myList = [];\nlet inData = msg.payload[1];\n\nmyList.push(myDataType);\n\n// Cycle trough 0x0101 Request Message\nlet i = 0;\n//for (i = 0; i < inData.byteLength;i+=4) {\n\n    // msg.payload[1][i]\n    //var myData = Buffer.from([0, 0]);\n    let myData = Buffer.allocUnsafe(2);\n    //myData[0] = inData[i];\n    let addr = inData.readInt16BE(i+1);\n\n    // Look up data\n    if  ( (inData[i] == 128) || (inData[i] == 176) ) { // CI0 0x80/0xB0\n\n        if (addr == 0) {            // Physical Input\n            myData.writeInt16BE(global.get(\"Physical_input\"), 0);\n        } else if (addr == 100) {   // Physical Output\n            myData.writeInt16BE(global.get(\"Physical_output\"), 0);\n        } else {\n            //Debug\n            myData.writeUInt16BE(0, 0);\n        }\n\n    } else if (inData[i] == 130) {  // DM 0x82\n\n        if (addr == 100) {          // D100 - Hor_pos_act[-180,180]\n            myData.writeInt16BE(Math.round(global.get(\"Horizontal_pos_act\")), 0);\n        } else if (addr == 200) {   // D200 - Vert_pos_act[-30,30]\n            myData.writeInt16BE(Math.round(global.get(\"Vertical_pos_act\")), 0);\n        } else if (addr == 402) {   // D402 \n            let myFocusPos = Buffer.allocUnsafe(4);  // Placeholder for the Float value [HiWord,LoWord]\n            let myFocus_Position = 0.0;\n            myFocus_Position = global.get(\"Focus_Position_Raw\");\n            myFocusPos.writeFloatBE(myFocus_Position, 0);\n            let myFocusPosLo = myFocusPos.readUInt16BE(2);\n            myData.writeUInt16BE(myFocusPosLo, 0);\n        } else if (addr == 403) {   // D403 \n            let myFocusPos = Buffer.allocUnsafe(4);  // Placeholder for the Float value [HiWord,LoWord]\n            let myFocus_Position = 0.0;\n            myFocus_Position = global.get(\"Focus_Position_Raw\");\n            myFocusPos.writeFloatBE(myFocus_Position, 0);\n            let myFocusPosHi = myFocusPos.readUInt16BE(0);\n            myData.writeUInt16BE(myFocusPosHi, 0);\n        } else if (addr == 404) {   // D404 \n            let myFocusPos = Buffer.allocUnsafe(4);  // Placeholder for the Float value [HiWord,LoWord]\n            let myFocus_Position = 0.0;\n            myFocus_Position = global.get(\"Focus_Position\");\n            myFocusPos.writeFloatBE(myFocus_Position, 0);\n            let myFocusPosLo = myFocusPos.readUInt16BE(2);\n            myData.writeUInt16BE(myFocusPosLo, 0);\n        } else if (addr == 405) {   // D405 \n            let myFocusPos = Buffer.allocUnsafe(4);  // Placeholder for the Float value [HiWord,LoWord]\n            let myFocus_Position = 0.0;\n            myFocus_Position = global.get(\"Focus_Position\");\n            myFocusPos.writeFloatBE(myFocus_Position, 0);\n            let myFocusPosHi = myFocusPos.readUInt16BE(0);\n            myData.writeUInt16BE(myFocusPosHi, 0);\n        } else if (addr == 3100) {   // DM3100\n            let DM3100 = 1234;\n            myData.writeInt16BE(DM3100, 0);\n        } else if (addr == 3102) {   // DM3102\n            let DM3102 = 567;\n            myData.writeInt16BE(DM3102, 0);\n        } else if (addr == 3104) {   // DM3104\n            let DM3104 = global.get(\"myAlarmLimitLamp\");\n            myData.writeInt16BE(DM3104, 0);\n        } else {\n            //Debug\n            myData.writeUInt16BE(0, 0);\n        }\n\n    } else if (inData[i] == 177) {  // W 0xB1\n\n        let regW = global.get(\"regW\");\n\n        if (addr == 0) {            // W0\n            myData.writeInt16BE(regW.W0, 0);\n        } else if (addr == 1) {            // W1 - (W1.0 Blocked_Hor)\n                myData.writeInt16BE(regW.W1, 0);\n        } else if (addr == 2) {     // W2 - (W2.5 Reset_Init_Error)\n            myData.writeInt16BE(regW.W2, 0);\n        } else if (addr == 10) {     // W10\n            myData.writeInt16BE(regW.W10, 0);\n        } else if (addr == 11) {    // W11 - (W11.0 Blocked_Vert)\n            myData.writeInt16BE(regW.W11, 0);\n        } else if (addr == 15) {    // W15\n            myData.writeInt16BE(regW.W15, 0);\n        } else if (addr == 20) {    // W20\n            myData.writeInt16BE(regW.W20, 0);\n        } else if (addr == 21) {    // W21\n            myData.writeInt16BE(regW.W21, 0);\n        } else if (addr == 30) {    // W30 - Alarm_A\n            myData.writeInt16BE(regW.W30, 0);\n        } else if (addr == 31) {    // W31 - Alarm_B\n            myData.writeInt16BE(regW.W31, 0);\n        } else if (addr == 32) {    // W32 - Alarm_C\n            myData.writeInt16BE(regW.W32, 0);\n        } else if (addr == 33) {    // W33 - Alarm_Active\n            myData.writeInt16BE(regW.W33, 0);\n        } else if (addr == 70) {    // W70\n            myData.writeInt16BE(regW.W70, 0);\n        } else if (addr == 100) {    // W100\n            myData.writeInt16BE(regW.W100, 0);\n        } else if (addr == 105) {    // W105\n            myData.writeInt16BE(regW.W105, 0);\n        } else if (addr == 110) {    // W110\n            myData.writeInt16BE(regW.W110, 0);\n        } else {\n            //Debug\n            myData.writeUInt16BE(0, 0);\n        }\n\n    } else if (inData[i] == 178) {  // H 0xB2\n\n        if (addr == 100) {          // H100 - SL_Version\n            myData.writeInt16BE(global.get(\"SL_Version\"), 0);\n        } else if (addr == 101) {          // H101 - SL_Version_hi?\n            myData.writeInt16BE(global.get(\"SL_Version\")>>16, 0);\n        } else if (addr == 104) {   // H104\n            myData.writeInt16BE(global.get(\"H104\"), 0);\n        } else if (addr == 105) {   // H105\n            myData.writeInt16BE(global.get(\"H105\"), 0);\n        } else if (addr == 106) {   // H106\n            myData.writeInt16BE(global.get(\"H106\"), 0);\n        } else if (addr == 107) {   // H107\n            myData.writeInt16BE(global.get(\"H107\"), 0);\n        } else if (addr == 110) {   // H110 - myVertRatio\n            let myVertRatio = Buffer.allocUnsafe(4);  // Placeholder for the Float value [HiWord,LoWord]\n            myVertRatio.writeFloatBE(global.get(\"myVertRatio\"), 0);\n            let myVertRatioLo = myVertRatio.readUInt16BE(2);\n            myData.writeUInt16BE(myVertRatioLo, 0);\n        } else if (addr == 111) {   // H111 \n            let myVertRatio = Buffer.allocUnsafe(4);  // Placeholder for the Float value [HiWord,LoWord]\n            myVertRatio.writeFloatBE(global.get(\"myVertRatio\"), 0);\n            let myVertRatioHi = myVertRatio.readUInt16BE(0);\n            myData.writeUInt16BE(myVertRatioHi, 0);\n        } else if (addr == 112) {   // H112 - myHorizRatio\n            let myHorizRatio = Buffer.allocUnsafe(4);  // Placeholder for the Float value [HiWord,LoWord]\n            myHorizRatio.writeFloatBE(global.get(\"myHorizRatio\"), 0);\n            let myHorizRatioLo = myHorizRatio.readUInt16BE(2);\n            myData.writeUInt16BE(myHorizRatioLo, 0);\n        } else if (addr == 113) {   // H113 \n            let myHorizRatio = Buffer.allocUnsafe(4);  // Placeholder for the Float value [HiWord,LoWord]\n            myHorizRatio.writeFloatBE(global.get(\"myHorizRatio\"), 0);\n            let myHorizRatioHi = myHorizRatio.readUInt16BE(0);\n            myData.writeUInt16BE(myHorizRatioHi, 0);\n        } else if (addr == 114) {   // H114 - Init Value Horizontal LSB\n            myData.writeInt16BE(global.get(\"myHorizontalInitValue\"), 0);\n        } else if (addr == 115) {   // H115 - Init Value Horizontal MSB\n            if (global.get(\"myHorizontalInitValue\") < 0) {\n                myData.writeUInt16BE(0xFFFF, 0);\n            } else {\n                myData.writeUInt16BE(0, 0);\n            }\n        } else if (addr == 116) {   // H116 - Init Value Vertical LSB\n            myData.writeInt16BE(global.get(\"myVerticalInitValue\"), 0);\n        } else if (addr == 117) {   // H117 - Init Value Vertical MSB\n            if (global.get(\"myVerticalInitValue\") < 0) {\n                myData.writeUInt16BE(0xFFFF, 0);\n            } else {\n                myData.writeUInt16BE(0, 0);\n            }\n        } else if (addr == 118) {   // H118\n            let myHorizRatio = Buffer.allocUnsafe(4);  // Placeholder for the Float value [HiWord,LoWord]\n            myHorizRatio.writeFloatBE(global.get(\"H118\")/10.0, 0);\n            let myHorizRatioLo = myHorizRatio.readUInt16BE(2);\n            myData.writeUInt16BE(myHorizRatioLo, 0);\n        } else if (addr == 119) {   // H119 \n            let myHorizRatio = Buffer.allocUnsafe(4);  // Placeholder for the Float value [HiWord,LoWord]\n            myHorizRatio.writeFloatBE(global.get(\"H118\")/10.0, 0);\n            let myHorizRatioHi = myHorizRatio.readUInt16BE(0);\n            myData.writeUInt16BE(myHorizRatioHi, 0);\n        } else if (addr == 120) {   // H120\n            let myHorizRatio = Buffer.allocUnsafe(4);  // Placeholder for the Float value [HiWord,LoWord]\n            myHorizRatio.writeFloatBE(global.get(\"H120\")/10.0, 0);\n            let myHorizRatioLo = myHorizRatio.readUInt16BE(2);\n            myData.writeUInt16BE(myHorizRatioLo, 0);\n        } else if (addr == 121) {   // H121 \n            let myHorizRatio = Buffer.allocUnsafe(4);  // Placeholder for the Float value [HiWord,LoWord]\n            myHorizRatio.writeFloatBE(global.get(\"H120\")/10.0, 0);\n            let myHorizRatioHi = myHorizRatio.readUInt16BE(0);\n            myData.writeUInt16BE(myHorizRatioHi, 0);\n        } else if (addr == 122) {   // H122\n            myData.writeUInt16BE(100, 0);\n        } else if (addr == 124) {   // H124\n            myData.writeUInt16BE(100, 0);\n        } else if (addr == 150) {   // H150\n            myData.writeUInt16BE(global.get(\"H150\"), 0);\n        } else if (addr == 151) {   // H151\n            myData.writeUInt16BE(global.get(\"H151\"), 0);\n        } else if (addr == 254) {   // H254 - Horizontal_speed\n            myData.writeUInt16BE(global.get(\"Horizontal_speed\"), 0);\n        } else if (addr == 256) {   // H256 - Vertical_speed\n            myData.writeUInt16BE(global.get(\"Vertical_speed\"), 0);\n        } else if (addr == 260) {   // H260 - Slave_Speed_Hor\n            myData.writeUInt16BE(global.get(\"H260\"), 0);\n        } else if (addr == 261) {   // H261 - Slave_Speed_Vert\n            myData.writeUInt16BE(global.get(\"H261\"), 0);\n        } else if (addr == 302) {   // H302 - Hor_Sweep_Limit_Neg\n            myData.writeInt16BE(global.get(\"H302\"), 0);\n        } else if (addr == 303) {   // H302 - Hor_Sweep_Limit_Neg hi\n            if(global.get(\"H302\")<0) {\n                myData.writeUInt16BE(0xFFFF, 0);\n            } else {\n                myData.writeUInt16BE(0x0000, 0);\n            }\n        } else if (addr == 304) {   // H304 - Hor_Sweep_Limit_Pos\n            myData.writeInt16BE(global.get(\"H304\"), 0);\n        } else if (addr == 305) {   // H304 - Hor_Sweep_Limit_Pos hi\n            if(global.get(\"H304\")<0) {\n                myData.writeUInt16BE(0xFFFF, 0);\n            } else {\n                myData.writeUInt16BE(0x0000, 0);\n            }\n        } else if (addr == 306) {   // H306 - Vert_Sweep_Limit_Neg\n            myData.writeInt16BE(global.get(\"H306\"), 0);\n        } else if (addr == 307) {   // H306 - Vert_Sweep_Limit_Neg hi\n            if(global.get(\"H306\")<0) {\n                myData.writeUInt16BE(0xFFFF, 0);\n            } else {\n                myData.writeUInt16BE(0x0000, 0);\n            }\n        } else if (addr == 308) {   // H308 - Vert_Sweep_Limit_Pos\n            myData.writeInt16BE(global.get(\"H308\"), 0);\n        } else if (addr == 309) {   // H308 - Vert_Sweep_Limit_Pos hi\n            if(global.get(\"H308\")<0) {\n                myData.writeUInt16BE(0xFFFF, 0);\n            } else {\n                myData.writeUInt16BE(0x0000, 0);\n            }\n        } else if (addr == 310) {   // H310 - Hor_Home1\n            myData.writeInt16BE(global.get(\"H310\"), 0);\n        } else if (addr == 311) {   // H311 - Hor_Home1 hi\n            if (global.get(\"H310\")<0) {\n                myData.writeUInt16BE(0xFFFF, 0);\n            } else {\n                myData.writeUInt16BE(0x0000, 0);\n            }\n        } else if (addr == 312) {   // H312 - Vert_Home1\n            myData.writeInt16BE(global.get(\"H312\"), 0);\n        } else if (addr == 313) {   // H313 - Vert_Home1 hi\n            if (global.get(\"H312\") < 0) {\n                myData.writeUInt16BE(0xFFFF, 0);\n            } else {\n                myData.writeUInt16BE(0x0000, 0);\n            }\n        } else if (addr == 314) {   // H314 - Hor_Home2\n            myData.writeInt16BE(global.get(\"H314\"), 0);\n        } else if (addr == 315) {   // H314 - Hor_Home2 hi\n            if(global.get(\"H314\")<0) {\n                myData.writeUInt16BE(0xFFFF, 0);\n            } else {\n                myData.writeUInt16BE(0x0000, 0);\n            }\n        } else if (addr == 316) {   // H316 - Vert_Home2\n            myData.writeInt16BE(global.get(\"H316\"), 0);\n        } else if (addr == 317) {   // H316 - Vert_Home2 hi\n            if(global.get(\"H316\")<0) {\n                myData.writeUInt16BE(0xFFFF, 0);\n            } else {\n                myData.writeUInt16BE(0x0000, 0);\n            }\n        } else if (addr == 318) {   // H318 - Hor_User_Limit_Neg\n            myData.writeInt16BE(global.get(\"H318\"), 0);\n        } else if (addr == 319) {   // H318 - Hor_User_Limit_Neg hi\n            if(global.get(\"H318\")<0) {\n                myData.writeUInt16BE(0xFFFF, 0);\n            } else {\n                myData.writeUInt16BE(0x0000, 0);\n            }\n        } else if (addr == 320) {   // H320 - Hor_User_Limit_Pos\n            myData.writeInt16BE(global.get(\"H320\"), 0);\n        } else if (addr == 321) {   // H320 - Hor_User_Limit_Pos hi\n            if(global.get(\"H320\")<0) {\n                myData.writeUInt16BE(0xFFFF, 0);\n            } else {\n                myData.writeUInt16BE(0x0000, 0);\n            }\n        } else if (addr == 322) {   // H322 - Vert_User_Limit_Neg\n            myData.writeInt16BE(global.get(\"H322\"), 0);\n        } else if (addr == 323) {   // H322 - Vert_User_Limit_Neg hi\n            if(global.get(\"H322\")<0) {\n                myData.writeUInt16BE(0xFFFF, 0);\n            } else {\n                myData.writeUInt16BE(0x0000, 0);\n            }\n        } else if (addr == 324) {   // H324 - Vert_User_Limit_Pos\n            myData.writeInt16BE(global.get(\"H324\"), 0);\n        } else if (addr == 325) {   // H324 - Vert_User_Limit_Pos hi\n            if(global.get(\"H324\")<0) {\n                myData.writeUInt16BE(0xFFFF, 0);\n            } else {\n                myData.writeUInt16BE(0x0000, 0);\n            }\n        } else if (addr == 326) {   // H326 - PWM_Frekv_Hort\n            myData.writeUInt16BE(global.get(\"H326\"), 0);\n        } else if (addr == 328) {   // H328 - PWM_Frekv_Vert\n            myData.writeUInt16BE(global.get(\"H328\"), 0);\n        } else {\n            //Debug\n            myData.writeUInt16BE(0, 0);\n        }\n\n    }\n\n    myList.push(myData);\n\n// }  //..for (i = 0;...\n\n//myList.push(msg.replyHeader, myData);\nmyList.push(myData);\nlet telegram = Buffer.concat(myList);\n\nreturn { payload: telegram, replyHeader: msg.replyHeader, ip: msg.ip, port: msg.port };","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":680,"y":240,"wires":[["3cf8dd852c6eb7c3"]]},{"id":"e986980a98b2f28f","type":"switch","z":"a23961c3c7ee5cb0","name":"Pipe Commands and updates of Registers","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"num"},{"t":"eq","v":"2","vt":"num"},{"t":"eq","v":"10","vt":"num"},{"t":"eq","v":"11","vt":"num"},{"t":"eq","v":"20","vt":"num"},{"t":"eq","v":"50","vt":"num"},{"t":"eq","v":"70","vt":"num"},{"t":"eq","v":"110","vt":"num"},{"t":"eq","v":"150","vt":"num"},{"t":"eq","v":"151","vt":"num"},{"t":"eq","v":"3104","vt":"num"},{"t":"eq","v":"12345","vt":"num"}],"checkall":"false","repair":false,"outputs":12,"x":1060,"y":300,"wires":[["dad6ae5a5e3c02b6"],["1b638c333689942f"],["1e5c542df7d5f74c"],["73b6e0ee26568836"],["3da72faeb7ceb257"],["8e0bcf34161274c3"],["45e379f0d58df983"],["4a69f5f6705b8811"],["bb5eab514520a53f"],["9a5d762b76c2d7fe"],["ec5046c8a21596b7"],["c4f33c3d8036c17f"]]},{"id":"ec5046c8a21596b7","type":"link out","z":"a23961c3c7ee5cb0","name":"link out DM3104","mode":"link","links":["d20f576c56d73961"],"x":1345,"y":480,"wires":[]},{"id":"13de19daf454dd9d","type":"switch","z":"a23961c3c7ee5cb0","name":"Pipe Commands and updates of Registers","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"num"},{"t":"eq","v":"2","vt":"num"},{"t":"eq","v":"10","vt":"num"},{"t":"eq","v":"11","vt":"num"},{"t":"eq","v":"15","vt":"num"},{"t":"eq","v":"20","vt":"num"},{"t":"eq","v":"50","vt":"num"},{"t":"eq","v":"70","vt":"num"},{"t":"eq","v":"110","vt":"num"},{"t":"eq","v":"150","vt":"num"},{"t":"eq","v":"151","vt":"num"}],"checkall":"false","repair":false,"outputs":11,"x":1060,"y":700,"wires":[["746ef7b1ae1e0694"],["8cdf16d9ea1ec93e"],["995668ecda51dba8"],["84f5354c9073d9c7"],[],["3e206dd584d65b95"],["82e8f08a6bc1fc36"],["711be67a5edb59a9"],["6cedf5db63706aab"],["238edb405c34ceee"],["4d99c6ac606f80a9"]]},{"id":"746ef7b1ae1e0694","type":"link out","z":"a23961c3c7ee5cb0","name":"link out regW (W0)","mode":"link","links":["bc5f4f98a9be74cd"],"x":1345,"y":560,"wires":[]},{"id":"4d99c6ac606f80a9","type":"link out","z":"a23961c3c7ee5cb0","name":"link out H151.00","mode":"link","links":["aa3b0caf03c37d88"],"x":1345,"y":920,"wires":[]},{"id":"dad6ae5a5e3c02b6","type":"link out","z":"a23961c3c7ee5cb0","name":"link out regW (W0)","mode":"link","links":["bc5f4f98a9be74cd"],"x":1345,"y":80,"wires":[]},{"id":"1b638c333689942f","type":"link out","z":"a23961c3c7ee5cb0","name":"link out regW (W1 + W2)","mode":"link","links":["acc134011d47ea00"],"x":1345,"y":120,"wires":[]},{"id":"8cdf16d9ea1ec93e","type":"link out","z":"a23961c3c7ee5cb0","name":"link out regW (W1 + W2)","mode":"link","links":["acc134011d47ea00"],"x":1345,"y":600,"wires":[]},{"id":"bb5eab514520a53f","type":"link out","z":"a23961c3c7ee5cb0","name":"link out H150","mode":"link","links":["04c6319b546b47a8"],"x":1345,"y":400,"wires":[]},{"id":"73b6e0ee26568836","type":"link out","z":"a23961c3c7ee5cb0","name":"link out regW (W11)","mode":"link","links":["a9b710a86e336a5e"],"x":1345,"y":200,"wires":[]},{"id":"84f5354c9073d9c7","type":"link out","z":"a23961c3c7ee5cb0","name":"link out regW (W11)","mode":"link","links":["a9b710a86e336a5e"],"x":1345,"y":680,"wires":[]},{"id":"3da72faeb7ceb257","type":"link out","z":"a23961c3c7ee5cb0","name":"link out regW (W20)","mode":"link","links":["ee36df1fb5550ce5"],"x":1345,"y":240,"wires":[]},{"id":"8e0bcf34161274c3","type":"link out","z":"a23961c3c7ee5cb0","name":"link out regW (W50)","mode":"link","links":["af26ee9f479d0c3f"],"x":1345,"y":280,"wires":[]},{"id":"45e379f0d58df983","type":"link out","z":"a23961c3c7ee5cb0","name":"link out regW (W70)","mode":"link","links":["6e82e4b667b6eb64"],"x":1345,"y":320,"wires":[]},{"id":"4a69f5f6705b8811","type":"link out","z":"a23961c3c7ee5cb0","name":"link out regW (W110)","mode":"link","links":["a39bf4ddd548c3a2"],"x":1345,"y":360,"wires":[]},{"id":"3e206dd584d65b95","type":"link out","z":"a23961c3c7ee5cb0","name":"link out regW (W20)","mode":"link","links":["ee36df1fb5550ce5"],"x":1345,"y":720,"wires":[]},{"id":"82e8f08a6bc1fc36","type":"link out","z":"a23961c3c7ee5cb0","name":"link out regW (W50)","mode":"link","links":["af26ee9f479d0c3f"],"x":1345,"y":760,"wires":[]},{"id":"711be67a5edb59a9","type":"link out","z":"a23961c3c7ee5cb0","name":"link out regW (W70)","mode":"link","links":["6e82e4b667b6eb64"],"x":1345,"y":800,"wires":[]},{"id":"6cedf5db63706aab","type":"link out","z":"a23961c3c7ee5cb0","name":"link out regW (W110)","mode":"link","links":["a39bf4ddd548c3a2"],"x":1345,"y":840,"wires":[]},{"id":"c4f33c3d8036c17f","type":"link out","z":"a23961c3c7ee5cb0","name":"link out H","mode":"link","links":["08e7aed3485bb1db","14a5bf97e0adc3f3","14fc0125d22a3750","27f0fb3d593c65fb","2b760def2957906c","3aae959fa6d5b7b4","3b03541b5a169046","4126827b9b24ca54","47ee7a3716316517","4f537cfd21d20ea3","6707dc108c555187","6d048aee67f335c9","8834eea23e602273","8f1504cd9327d307","933e6c7a9e6ba0e0","976c79f33b36b93d","a55bc3842ccf8d65","b149a51db8a61bca","d5bf3771870f7425","e691ea8464165aa4","e7e54e4c2d3151b9","0e358aa1c6532b33","9e15d3b384f1b88d","829b52d4ddcc76f6","1d3907b7366f35de"],"x":1345,"y":520,"wires":[]},{"id":"9a5d762b76c2d7fe","type":"link out","z":"a23961c3c7ee5cb0","name":"link out H151.00","mode":"link","links":["aa3b0caf03c37d88"],"x":1345,"y":440,"wires":[]},{"id":"238edb405c34ceee","type":"link out","z":"a23961c3c7ee5cb0","name":"link out H150","mode":"link","links":["04c6319b546b47a8"],"x":1345,"y":880,"wires":[]},{"id":"1e5c542df7d5f74c","type":"link out","z":"a23961c3c7ee5cb0","name":"link out regW (W10)","mode":"link","links":["cbd8b52239d294d9"],"x":1345,"y":160,"wires":[]},{"id":"1c3a5a042c7df2fd","type":"function","z":"a23961c3c7ee5cb0","name":"Parse FINS in telegram","func":"//                             ICF  RSV             GCT             DNA             DA1             DA2             SNA             SA1             SA2             SID         CODE_HI           CODE_LO\n//let myReplayHeader = Buffer.from([192,  0, msg.payload[2], msg.payload[6], msg.payload[7], msg.payload[8], msg.payload[3], msg.payload[4], msg.payload[5], msg.payload[9], msg.payload[10], msg.payload[11]]);\nlet myReplayHeader = Buffer.from([192,  0, 2, msg.payload[6], msg.payload[7], msg.payload[8], msg.payload[3], msg.payload[4], msg.payload[5], msg.payload[9], msg.payload[10], msg.payload[11]]);\nlet myCode = msg.payload.readUInt16BE(10);\nlet myPayload = [];\nmyPayload.push(myCode, msg.payload.slice(12));\n\n//node.status({ text: myReplayHeader[9].toString() });\nreturn {payload: myPayload, ip: msg.ip, port: msg.port, replyHeader: myReplayHeader};","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":310,"y":120,"wires":[["6f5283ee76592b5c"]]},{"id":"c665634688a80b82","type":"udp out","z":"a23961c3c7ee5cb0","name":"FINS out","addr":"","iface":"","port":"","ipv":"udp4","outport":"9600","base64":false,"multicast":"false","x":1160,"y":500,"wires":[]},{"id":"3cf8dd852c6eb7c3","type":"function","z":"a23961c3c7ee5cb0","name":"Build response","func":"var myList = [];\n\nmyList.push(msg.replyHeader, msg.payload);\n\nvar telegram = Buffer.concat(myList);\n\nreturn { payload: telegram, ip: msg.ip, port: msg.port };","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":980,"y":500,"wires":[["c665634688a80b82","f0c0ecb1f63900c0"]]},{"id":"995668ecda51dba8","type":"link out","z":"a23961c3c7ee5cb0","name":"link out regW (W10)","mode":"link","links":["cbd8b52239d294d9"],"x":1345,"y":640,"wires":[]},{"id":"f0c0ecb1f63900c0","type":"link out","z":"a23961c3c7ee5cb0","name":"link out kick Watchdog","mode":"link","links":["2eb517afeb6b1164"],"x":1145,"y":560,"wires":[]},{"id":"d1c336ea3bd69280","type":"comment","z":"ed93ec1675e6852c","name":"W-Registers","info":"","x":130,"y":80,"wires":[]},{"id":"965171c7bce75499","type":"function","z":"ed93ec1675e6852c","name":"get W1.0","func":"let regW = msg.payload;\n\nreturn [ \n    { payload: (((regW.W1 & 0b000001) !== 0) ? true : false) },\n    { payload: (((regW.W1 & 0b010000) !== 0) ? true : false) },\n    { payload: (((regW.W1 & 0b100000) !== 0) ? true : false) }\n];","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":440,"y":320,"wires":[["b0fb16d301b1f7b3"]]},{"id":"13a43e121be8adee","type":"link in","z":"ed93ec1675e6852c","name":"link in Update W-Registers","links":["7cd2e5ef86e859af","73b3cb15e4523091","b3958cfd49f8d02a","bb7c0559b85b161d","17efd02ec64b80ce","145941c497d66030","0e6588c5448b8a10","5d9c02fd2fbaf5c6"],"x":225,"y":940,"wires":[["eee5521582538820"]]},{"id":"3fec6fe99e23cf60","type":"function","z":"ed93ec1675e6852c","name":"get W2.5 and Clear Init Errors","func":"let regW = global.get(\"regW\");\n\nif ((regW.W2 & 0x0020) != 0) {\n    if((regW.W31&0b01111100) != 0) {\n        regW.W31 &= ~(0b01111100);\n        global.set(\"regW\", regW);\n    }\n}\n\nreturn [\n    { payload: ((regW.W2 & 0x0020) ? true : false) },\n    { payload: regW }\n];","outputs":2,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":510,"y":440,"wires":[["441591e4744a0b2e"],["8ecb11986763f445"]]},{"id":"a8b9583927beabf4","type":"function","z":"ed93ec1675e6852c","name":"get W11.0","func":"let regW = msg.payload;\n\nreturn { payload: ((regW.W11&0x0001)?true:false)};","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":440,"y":560,"wires":[["deb2822a893d12c1"]]},{"id":"32b46dd3952b4aa6","type":"function","z":"ed93ec1675e6852c","name":"get W20.0-.3 & Control Focus Motor","func":"let regW = msg.payload;\n\n// Set Physical Focus\nif (regW.W20 & 0x0001) {\n    global.set(\"focusInput\", 1);\n} else if (regW.W20 & 0x0002) {\n    global.set(\"focusInput\", 0xFFFF);\n} else {\n    global.set(\"focusInput\", 0);\n}\n\nreturn [\n    { payload: ((regW.W20 & 0b0100) ? true : false) },\n    { payload: ((regW.W20 & 0b1000) ? true : false) }\n];","outputs":2,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":530,"y":680,"wires":[["4ffbc186da46aecc"],["a7b1a9cba31ca8db"]]},{"id":"ed05d4a06a8a8f6f","type":"function","z":"ed93ec1675e6852c","name":"get W30","func":"let regW = global.get(\"regW\");\nreturn [\n    { payload: ((regW.W30 & 0x0001) ? true : false) },\n    { payload: ((regW.W30 & 0x0002) ? true : false) },\n    { payload: ((regW.W30 & 0x0004) ? true : false) }\n];","outputs":3,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":440,"y":880,"wires":[["94eb8b51f00a9d01"],["2e130db36d028b99"],["c49c8b5d4e53f5ce"]]},{"id":"f3c89aaad8aef2b0","type":"function","z":"ed93ec1675e6852c","name":"get W31","func":"let regW = msg.payload;\n\nreturn {payload: regW.W31};","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":440,"y":1100,"wires":[["9c047015863c89f1"]]},{"id":"b2c2aa16a6dd975c","type":"function","z":"ed93ec1675e6852c","name":"get W32","func":"let regW = msg.payload;\n\nreturn {payload: regW.W32};","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":440,"y":1460,"wires":[["29b20f853477ee99"]]},{"id":"60fa3ee9f509e598","type":"function","z":"ed93ec1675e6852c","name":"get W70.0-.3 og .6","func":"let regW = msg.payload;\n\nreturn [\n    { payload: ((regW.W70 & 0x0001) ? true : false) },\n    { payload: ((regW.W70 & 0x0002) ? true : false) },\n    { payload: ((regW.W70 & 0x0004) ? true : false) },\n    { payload: ((regW.W70 & 0x0008) ? true : false) },\n    { payload: ((regW.W70 & 0x0040) ? true : false) }\n];","outputs":5,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":470,"y":2120,"wires":[["71ee5a2c1304ad45"],["6ba1021fe90f68bf"],["c2d0495a0a415c0e"],["88dd157024303b1e"],["79e2b816d0a360a6","dd4a01705b3ece7a"]]},{"id":"e58e7e2a5cac06e0","type":"function","z":"ed93ec1675e6852c","name":"get W110.0 og .3","func":"let regW = msg.payload;\nlet LMH = global.get(\"LimpModeHor\");\nlet LMV = global.get(\"LimpModeVert\");\n\nif( !LMH && !LMV ) {\n    return [\n        {payload: ((regW.W110 & 0x0001) ? 1 : 0)},\n        {payload: ((regW.W110 & 0x0008) ? 2 : 0)}\n    ];\n} else if( !LMH && LMV ) {\n    return [\n        {payload: ((regW.W110 & 0x0001) ? 1 : 0)},\n        null\n    ];\n} else if( LMH && !LMV ) {\n    return [\n        null,\n        {payload: ((regW.W110 & 0x0008) ? 2 : 0)}\n    ];\n} else {\n    return [\n        null,\n        null\n    ];\n}","outputs":2,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":470,"y":2300,"wires":[["d74de7e633756485"],["d74de7e633756485"]]},{"id":"432faea1c437916c","type":"function","z":"ed93ec1675e6852c","name":"get W0.0-1 & SL Left/Right","func":"let regW = msg.payload;\nlet myHorInput = 0;\nlet HSpeedIndex = Math.round(global.get(\"Horizontal_speed\") / 10);\nlet myR60HorizLookup = global.get(\"myR60HorizLookup\");\nlet respons = {};\n\n// Left?\nif (((regW.W0 & 0x0001) !== 0) ) {\n    //myInput = (~(Math.round((myR60HorizLookup.table[HSpeedIndex] * 0x7FFF / 100))) + 1) & 0xFFFF;\n    myHorInput = -Math.round(myR60HorizLookup.table[HSpeedIndex] * 0x7FFF / 100);\n}\n\n// Right?\nif ((regW.W0 & 0x0002) !== 0) {\n    myHorInput = Math.round(myR60HorizLookup.table[HSpeedIndex] * 0x7FFF / 100);\n}\n\n//if ((regW.W50 & 0x000C) === 0) {\n//    global.set(\"HorInput\", myInput);\n//}\n\nrespons[\"myHorInput\"] = myHorInput; \n\nnode.status({ fill: \"green\", shape: \"ring\", text: \"Respons: \" + JSON.stringify(respons) });\n\nreturn { payload: respons, topic: \"W50\" };","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":500,"y":140,"wires":[["dd093eb333f77323"]]},{"id":"74eafc1da488c0d7","type":"function","z":"ed93ec1675e6852c","name":"get W10.0-1 & SL Down/Up","func":"let regW = msg.payload;\nlet VSpeedIndex = Math.round(global.get(\"Vertical_speed\") / 10);\nlet myR60VertLookup = global.get(\"myR60VertLookup\");\nlet myVertInput = 0;\nlet respons = {};\n\n// Down?\nif (regW.W10 & 0x0001) {\n    //myInput = (~(Math.round((myR60VertLookup.table[VSpeedIndex] * 0x7FFF / 100))) + 1) & 0xFFFF;\n        myVertInput = -Math.round(myR60VertLookup.table[VSpeedIndex] * 0x7FFF / 100);\n}\n\n// Up?\nif (regW.W10 & 0x0002) {\n    myVertInput = Math.round(myR60VertLookup.table[VSpeedIndex] * 0x7FFF / 100);\n}\n\n//if ((regW.W50 & 0x0003) === 0) {\n//    global.set(\"VertInput\", myVertInput);\n//}\n\nrespons[\"myVertInput\"] = myVertInput; \n\nnode.status({ fill: \"green\", shape: \"ring\", text: \"Respons: \" + JSON.stringify(respons) });\n\nreturn { payload: respons, topic: \"W50\" };","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":500,"y":220,"wires":[["99926cfd8602b64b"]]},{"id":"a7b1a9cba31ca8db","type":"link out","z":"ed93ec1675e6852c","name":"link out Reset","mode":"link","links":["44a748f2a0c6f48a"],"x":755,"y":740,"wires":[]},{"id":"c7bb718764c1a54f","type":"function","z":"ed93ec1675e6852c","name":"get W50.0-3 & SL Left/Right/Up/Down","func":"let regW = global.get(\"regW\");\nlet myVertInput = 0\nlet myHorInput = 0\nlet HSpeedIndex = Math.round(global.get(\"Horizontal_speed\")/10);\nlet myR60HorizLookup = global.get(\"myR60HorizLookup\");\nlet VSpeedIndex = Math.round(global.get(\"Vertical_speed\") / 10);\nlet myR60VertLookup = global.get(\"myR60VertLookup\");\nlet respons = {};\n\n// Up?\nif ((regW.W50 & 0x0001) !== 0) {\n    //myVertInput = (~(Math.round((myR60VertLookup.table[VSpeedIndex] * 0x7FFF / 100))) + 1) & 0xFFFF;\n    myVertInput = -Math.round(myR60VertLookup.table[VSpeedIndex] * 0x7FFF / 100);\n}\n\n// Down?\nif ((regW.W50 & 0x0002) !== 0) {\n    myVertInput = Math.round(myR60VertLookup.table[VSpeedIndex] * 0x7FFF / 100);\n}\n\n// Left?\nif ((regW.W50 & 0x0004) !== 0) {\n    //myHorInput = (~(Math.round((myR60HorizLookup.table[HSpeedIndex] * 0x7FFF / 100))) + 1) & 0xFFFF;\n    myHorInput = -Math.round(myR60HorizLookup.table[HSpeedIndex] * 0x7FFF / 100);\n}\n\n// Right?\nif ((regW.W50 & 0x0008) !== 0) {\n    myHorInput = Math.round(myR60HorizLookup.table[HSpeedIndex] * 0x7FFF / 100);\n}\n\n//global.set(\"HorInput\", myHorInput); \n//global.set(\"VertInput\", myVertInput);\nrespons[\"myHorInput\"] = myHorInput; \nrespons[\"myVertInput\"] = myVertInput;\n\nnode.status({ fill: \"green\", shape: \"ring\", text: \"Respons: \" + JSON.stringify(respons) });\n\nreturn { payload: respons, topic: \"W50\" };","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":530,"y":1940,"wires":[["ed8b8e34dea834f9"]]},{"id":"ed8b8e34dea834f9","type":"link out","z":"ed93ec1675e6852c","name":"link out 34","mode":"link","links":["767f8aaf1be33f76"],"x":735,"y":1940,"wires":[]},{"id":"dd093eb333f77323","type":"link out","z":"ed93ec1675e6852c","name":"link out 35","mode":"link","links":["767f8aaf1be33f76"],"x":675,"y":140,"wires":[]},{"id":"af26ee9f479d0c3f","type":"link in","z":"ed93ec1675e6852c","name":"link in regW (W50)","links":["8e0bcf34161274c3","82e8f08a6bc1fc36","94e0efdcd8f05459","df4637d91d408ee3"],"x":325,"y":1940,"wires":[["c7bb718764c1a54f"]]},{"id":"dd4a01705b3ece7a","type":"subflow:9e702f4d4b057300","z":"ed93ec1675e6852c","name":"Lamp handler","x":620,"y":2200,"wires":[]},{"id":"4ffbc186da46aecc","type":"switch","z":"ed93ec1675e6852c","name":"Reset Lamp Counters","property":"payload","propertyType":"msg","rules":[{"t":"true"}],"checkall":"true","repair":false,"outputs":1,"x":920,"y":660,"wires":[["0114a770882a8445"]]},{"id":"0114a770882a8445","type":"link out","z":"ed93ec1675e6852c","name":"link out Reset Lamp Counters","mode":"link","links":["2999d147db3d7334"],"x":1075,"y":660,"wires":[]},{"id":"d74de7e633756485","type":"function","z":"ed93ec1675e6852c","name":"Order Home x","func":"if (msg.payload != 0) {\n    let regW = global.get(\"regW\");\n    if((regW.W0 & 0b00110000000) === 0) {\n        return msg;\n    }\n}","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":680,"y":2300,"wires":[["c1c433f75bb3084e"]]},{"id":"c1c433f75bb3084e","type":"link out","z":"ed93ec1675e6852c","name":"link out Home1","mode":"link","links":["b0fc30a2f928cd7a"],"x":815,"y":2300,"wires":[]},{"id":"eee5521582538820","type":"subflow:56baf3adbae499b7","z":"ed93ec1675e6852c","name":"","x":170,"y":1120,"wires":[["ed05d4a06a8a8f6f","f3c89aaad8aef2b0","b2c2aa16a6dd975c","f681c961f8983093"]]},{"id":"8ecb11986763f445","type":"subflow:56baf3adbae499b7","z":"ed93ec1675e6852c","name":"","x":930,"y":460,"wires":[[]]},{"id":"bc5f4f98a9be74cd","type":"link in","z":"ed93ec1675e6852c","name":"link in W0","links":["dad6ae5a5e3c02b6","746ef7b1ae1e0694"],"x":205,"y":140,"wires":[["432faea1c437916c"]]},{"id":"f681c961f8983093","type":"function","z":"ed93ec1675e6852c","name":"get W33","func":"let regW = global.get(\"regW\");\nreturn [\n    { payload: ((regW.W33 & 0x0001) ? true : false) },\n    { payload: ((regW.W33 & 0x0002) ? true : false) },\n    { payload: ((regW.W33 & 0x0004) ? true : false) },\n    { payload: ((regW.W33 & 0x0008) ? true : false) }\n];","outputs":4,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":440,"y":1780,"wires":[["20046b3a67c21807"],["59f660d5694eeb32"],["77af7238ef3ec841"],["9aae6d8ae73537a4"]]},{"id":"acc134011d47ea00","type":"link in","z":"ed93ec1675e6852c","name":"link in regW (W1 + W2)","links":["1b638c333689942f","8cdf16d9ea1ec93e"],"x":195,"y":380,"wires":[["965171c7bce75499","3fec6fe99e23cf60"]]},{"id":"a9b710a86e336a5e","type":"link in","z":"ed93ec1675e6852c","name":"link in regW (W11)","links":["73b6e0ee26568836","84f5354c9073d9c7"],"x":195,"y":560,"wires":[["a8b9583927beabf4"]]},{"id":"ee36df1fb5550ce5","type":"link in","z":"ed93ec1675e6852c","name":"link in regW (W20)","links":["3da72faeb7ceb257","3e206dd584d65b95"],"x":195,"y":680,"wires":[["32b46dd3952b4aa6"]]},{"id":"6e82e4b667b6eb64","type":"link in","z":"ed93ec1675e6852c","name":"link in regW (W70)","links":["45e379f0d58df983","711be67a5edb59a9"],"x":325,"y":2120,"wires":[["60fa3ee9f509e598"]]},{"id":"a39bf4ddd548c3a2","type":"link in","z":"ed93ec1675e6852c","name":"link in regW (W110)","links":["4a69f5f6705b8811","6cedf5db63706aab"],"x":325,"y":2300,"wires":[["e58e7e2a5cac06e0"]]},{"id":"99926cfd8602b64b","type":"link out","z":"ed93ec1675e6852c","name":"link out 56","mode":"link","links":["767f8aaf1be33f76"],"x":675,"y":220,"wires":[]},{"id":"cbd8b52239d294d9","type":"link in","z":"ed93ec1675e6852c","name":"link in W10","links":["1e5c542df7d5f74c","995668ecda51dba8"],"x":205,"y":220,"wires":[["74eafc1da488c0d7"]]},{"id":"b0fb16d301b1f7b3","type":"ui_led","z":"ed93ec1675e6852c","order":1,"group":"c55a857ecd1e4471","width":0,"height":0,"label":"Blocked_Hor","labelPlacement":"left","labelAlignment":"left","colorForValue":[{"color":"#808080","value":"false","valueType":"bool"},{"color":"#ff0000","value":"true","valueType":"bool"}],"allowColorForValueInMessage":false,"shape":"circle","showGlow":true,"name":"Blocked_Hor","x":890,"y":320,"wires":[]},{"id":"441591e4744a0b2e","type":"ui_led","z":"ed93ec1675e6852c","order":2,"group":"c55a857ecd1e4471","width":0,"height":0,"label":"Reset_Init_Error","labelPlacement":"left","labelAlignment":"left","colorForValue":[{"color":"#808080","value":"false","valueType":"bool"},{"color":"#ff0000","value":"true","valueType":"bool"}],"allowColorForValueInMessage":false,"shape":"circle","showGlow":true,"name":"Reset_Init_Error","x":900,"y":420,"wires":[]},{"id":"deb2822a893d12c1","type":"ui_led","z":"ed93ec1675e6852c","order":3,"group":"c55a857ecd1e4471","width":0,"height":0,"label":"Blocked_Vert","labelPlacement":"left","labelAlignment":"left","colorForValue":[{"color":"#808080","value":"false","valueType":"bool"},{"color":"#ff0000","value":"true","valueType":"bool"}],"allowColorForValueInMessage":false,"shape":"circle","showGlow":true,"name":"Blocked_Vert","x":890,"y":560,"wires":[]},{"id":"94eb8b51f00a9d01","type":"ui_led","z":"ed93ec1675e6852c","order":12,"group":"c55a857ecd1e4471","width":0,"height":0,"label":"High Temp In Drum","labelPlacement":"left","labelAlignment":"left","colorForValue":[{"color":"#808080","value":"false","valueType":"bool"},{"color":"#ff0000","value":"true","valueType":"bool"}],"allowColorForValueInMessage":false,"shape":"circle","showGlow":true,"name":"HighTempInDrum","x":910,"y":840,"wires":[]},{"id":"2e130db36d028b99","type":"ui_led","z":"ed93ec1675e6852c","order":13,"group":"c55a857ecd1e4471","width":0,"height":0,"label":"SL Need Reset","labelPlacement":"left","labelAlignment":"left","colorForValue":[{"color":"#808080","value":"false","valueType":"bool"},{"color":"#ff0000","value":"true","valueType":"bool"}],"allowColorForValueInMessage":false,"shape":"circle","showGlow":true,"name":"SLNeedReset","x":900,"y":880,"wires":[]},{"id":"c49c8b5d4e53f5ce","type":"ui_led","z":"ed93ec1675e6852c","order":14,"group":"c55a857ecd1e4471","width":0,"height":0,"label":"Battery error in PLC","labelPlacement":"left","labelAlignment":"left","colorForValue":[{"color":"#808080","value":"false","valueType":"bool"},{"color":"#ff0000","value":"true","valueType":"bool"}],"allowColorForValueInMessage":false,"shape":"circle","showGlow":true,"name":"BatteryErrorInPLC","x":910,"y":920,"wires":[]},{"id":"2696926f9e1e6e19","type":"ui_led","z":"ed93ec1675e6852c","order":15,"group":"c55a857ecd1e4471","width":0,"height":0,"label":"Blocked Horizontal","labelPlacement":"left","labelAlignment":"left","colorForValue":[{"color":"#808080","value":"false","valueType":"bool"},{"color":"#ff0000","value":"true","valueType":"bool"}],"allowColorForValueInMessage":false,"shape":"circle","showGlow":true,"name":"BlockedHorizontal","x":910,"y":960,"wires":[]},{"id":"f3cb794ae478f66e","type":"ui_led","z":"ed93ec1675e6852c","order":16,"group":"c55a857ecd1e4471","width":0,"height":0,"label":"Blocked Vertical","labelPlacement":"left","labelAlignment":"left","colorForValue":[{"color":"#808080","value":"false","valueType":"bool"},{"color":"#ff0000","value":"true","valueType":"bool"}],"allowColorForValueInMessage":false,"shape":"circle","showGlow":true,"name":"BlockedVertical","x":900,"y":1000,"wires":[]},{"id":"885d2df82815b2a2","type":"ui_led","z":"ed93ec1675e6852c","order":17,"group":"c55a857ecd1e4471","width":0,"height":0,"label":"Init Error","labelPlacement":"left","labelAlignment":"left","colorForValue":[{"color":"#808080","value":"false","valueType":"bool"},{"color":"#ff0000","value":"true","valueType":"bool"}],"allowColorForValueInMessage":false,"shape":"circle","showGlow":true,"name":"InitError","x":880,"y":1040,"wires":[]},{"id":"2b984ca02f243564","type":"ui_led","z":"ed93ec1675e6852c","order":18,"group":"c55a857ecd1e4471","width":0,"height":0,"label":"Init Error Vertical","labelPlacement":"left","labelAlignment":"left","colorForValue":[{"color":"#808080","value":"false","valueType":"bool"},{"color":"#ff0000","value":"true","valueType":"bool"}],"allowColorForValueInMessage":false,"shape":"circle","showGlow":true,"name":"InitErrorVertical","x":900,"y":1080,"wires":[]},{"id":"75c02bbde30f4132","type":"ui_led","z":"ed93ec1675e6852c","order":19,"group":"c55a857ecd1e4471","width":0,"height":0,"label":"Init Error Horizontal","labelPlacement":"left","labelAlignment":"left","colorForValue":[{"color":"#808080","value":"false","valueType":"bool"},{"color":"#ff0000","value":"true","valueType":"bool"}],"allowColorForValueInMessage":false,"shape":"circle","showGlow":true,"name":"InitErrorHorizontal","x":910,"y":1120,"wires":[]},{"id":"86aff0b90f416b7b","type":"ui_led","z":"ed93ec1675e6852c","order":20,"group":"c55a857ecd1e4471","width":0,"height":0,"label":"Init Error Focus positiv","labelPlacement":"left","labelAlignment":"left","colorForValue":[{"color":"#808080","value":"false","valueType":"bool"},{"color":"#ff0000","value":"true","valueType":"bool"}],"allowColorForValueInMessage":false,"shape":"circle","showGlow":true,"name":"InitErrorFocusPositiv","x":920,"y":1160,"wires":[]},{"id":"a2895792a739de74","type":"ui_led","z":"ed93ec1675e6852c","order":21,"group":"c55a857ecd1e4471","width":0,"height":0,"label":"Init Error Focus negativ","labelPlacement":"left","labelAlignment":"left","colorForValue":[{"color":"#808080","value":"false","valueType":"bool"},{"color":"#ff0000","value":"true","valueType":"bool"}],"allowColorForValueInMessage":false,"shape":"circle","showGlow":true,"name":"InitErrorFocusNegativ","x":920,"y":1200,"wires":[]},{"id":"6e560c6dbd348d38","type":"ui_led","z":"ed93ec1675e6852c","order":22,"group":"c55a857ecd1e4471","width":0,"height":0,"label":"Max lamp-strike","labelPlacement":"left","labelAlignment":"left","colorForValue":[{"color":"#808080","value":"false","valueType":"bool"},{"color":"#ffff00","value":"true","valueType":"bool"}],"allowColorForValueInMessage":false,"shape":"circle","showGlow":true,"name":"MaxLampStrike","x":900,"y":1240,"wires":[]},{"id":"601d2fcfb0021ce2","type":"ui_led","z":"ed93ec1675e6852c","order":23,"group":"c55a857ecd1e4471","width":0,"height":0,"label":"Max lamp lifetime","labelPlacement":"left","labelAlignment":"left","colorForValue":[{"color":"#808080","value":"false","valueType":"bool"},{"color":"#ffff00","value":"true","valueType":"bool"}],"allowColorForValueInMessage":false,"shape":"circle","showGlow":true,"name":"MaxLampLifetime","x":910,"y":1280,"wires":[]},{"id":"916f5bd4e09586cb","type":"ui_led","z":"ed93ec1675e6852c","order":24,"group":"c55a857ecd1e4471","width":0,"height":0,"label":"Slave double command","labelPlacement":"left","labelAlignment":"left","colorForValue":[{"color":"#808080","value":"false","valueType":"bool"},{"color":"#ffff00","value":"true","valueType":"bool"}],"allowColorForValueInMessage":false,"shape":"circle","showGlow":true,"name":"SlaveDoubleCommand","x":930,"y":1320,"wires":[]},{"id":"e9a52e28171c49b4","type":"ui_led","z":"ed93ec1675e6852c","order":25,"group":"c55a857ecd1e4471","width":0,"height":0,"label":"Slave long time horizontal","labelPlacement":"left","labelAlignment":"left","colorForValue":[{"color":"#808080","value":"false","valueType":"bool"},{"color":"#ffff00","value":"true","valueType":"bool"}],"allowColorForValueInMessage":false,"shape":"circle","showGlow":true,"name":"SlaveLongTimeHorizontal","x":930,"y":1360,"wires":[]},{"id":"7fd292df5ea83cb6","type":"ui_led","z":"ed93ec1675e6852c","order":26,"group":"c55a857ecd1e4471","width":0,"height":0,"label":"Slave long time vertical","labelPlacement":"left","labelAlignment":"left","colorForValue":[{"color":"#808080","value":"false","valueType":"bool"},{"color":"#ffff00","value":"true","valueType":"bool"}],"allowColorForValueInMessage":false,"shape":"circle","showGlow":true,"name":"SlaveLongTimeVertical","x":920,"y":1400,"wires":[]},{"id":"b315dbf17307983a","type":"ui_led","z":"ed93ec1675e6852c","order":27,"group":"c55a857ecd1e4471","width":0,"height":0,"label":"Soft JS in panel double command","labelPlacement":"left","labelAlignment":"left","colorForValue":[{"color":"#808080","value":"false","valueType":"bool"},{"color":"#ffff00","value":"true","valueType":"bool"}],"allowColorForValueInMessage":false,"shape":"circle","showGlow":true,"name":"SoftJSInPanelDoubleCommand","x":950,"y":1440,"wires":[]},{"id":"6f9639b1772b0718","type":"ui_led","z":"ed93ec1675e6852c","order":28,"group":"c55a857ecd1e4471","width":0,"height":0,"label":"Soft JS long time horizontal","labelPlacement":"left","labelAlignment":"left","colorForValue":[{"color":"#808080","value":"false","valueType":"bool"},{"color":"#ffff00","value":"true","valueType":"bool"}],"allowColorForValueInMessage":false,"shape":"circle","showGlow":true,"name":"SoftJSLongTimeHorizontal","x":940,"y":1480,"wires":[]},{"id":"d33529ed3ec33077","type":"ui_led","z":"ed93ec1675e6852c","order":29,"group":"c55a857ecd1e4471","width":0,"height":0,"label":"Soft JS long time vertical","labelPlacement":"left","labelAlignment":"left","colorForValue":[{"color":"#808080","value":"false","valueType":"bool"},{"color":"#ffff00","value":"true","valueType":"bool"}],"allowColorForValueInMessage":false,"shape":"circle","showGlow":true,"name":"SoftJSLongTimeVertical","x":930,"y":1520,"wires":[]},{"id":"02e6477009dffee1","type":"ui_led","z":"ed93ec1675e6852c","order":30,"group":"c55a857ecd1e4471","width":0,"height":0,"label":"JS Panel double command","labelPlacement":"left","labelAlignment":"left","colorForValue":[{"color":"#808080","value":"false","valueType":"bool"},{"color":"#ffff00","value":"true","valueType":"bool"}],"allowColorForValueInMessage":false,"shape":"circle","showGlow":true,"name":"JSPanelDoubleCommand","x":930,"y":1560,"wires":[]},{"id":"c492190fbc4ea77e","type":"ui_led","z":"ed93ec1675e6852c","order":31,"group":"c55a857ecd1e4471","width":0,"height":0,"label":"JS Panel long time horizontal","labelPlacement":"left","labelAlignment":"left","colorForValue":[{"color":"#808080","value":"false","valueType":"bool"},{"color":"#ffff00","value":"true","valueType":"bool"}],"allowColorForValueInMessage":false,"shape":"circle","showGlow":true,"name":"JSPanelLongTimeHorizontal","x":940,"y":1600,"wires":[]},{"id":"5a10b8a5cc5db836","type":"ui_led","z":"ed93ec1675e6852c","order":32,"group":"c55a857ecd1e4471","width":0,"height":0,"label":"JS Panel long time vertical","labelPlacement":"left","labelAlignment":"left","colorForValue":[{"color":"#808080","value":"false","valueType":"bool"},{"color":"#ffff00","value":"true","valueType":"bool"}],"allowColorForValueInMessage":false,"shape":"circle","showGlow":true,"name":"JSPanelLongTimeVertical","x":930,"y":1640,"wires":[]},{"id":"9896cf02fd19b41b","type":"ui_led","z":"ed93ec1675e6852c","order":33,"group":"c55a857ecd1e4471","width":0,"height":0,"label":"Focus double command","labelPlacement":"left","labelAlignment":"left","colorForValue":[{"color":"#808080","value":"false","valueType":"bool"},{"color":"#ffff00","value":"true","valueType":"bool"}],"allowColorForValueInMessage":false,"shape":"circle","showGlow":true,"name":"FocusDoubleCommand","x":930,"y":1680,"wires":[]},{"id":"71ee5a2c1304ad45","type":"ui_led","z":"ed93ec1675e6852c","order":34,"group":"c55a857ecd1e4471","width":0,"height":0,"label":"Slave_Hor_CCW","labelPlacement":"left","labelAlignment":"left","colorForValue":[{"color":"#808080","value":"false","valueType":"bool"},{"color":"#90ee90","value":"true","valueType":"bool"}],"allowColorForValueInMessage":false,"shape":"circle","showGlow":true,"name":"Slave_Hor_CCW","x":910,"y":2040,"wires":[]},{"id":"6ba1021fe90f68bf","type":"ui_led","z":"ed93ec1675e6852c","order":35,"group":"c55a857ecd1e4471","width":0,"height":0,"label":"Slave_Hor_CW","labelPlacement":"left","labelAlignment":"left","colorForValue":[{"color":"#808080","value":"false","valueType":"bool"},{"color":"#90ee90","value":"true","valueType":"bool"}],"allowColorForValueInMessage":false,"shape":"circle","showGlow":true,"name":"Slave_Hor_CW","x":900,"y":2080,"wires":[]},{"id":"88dd157024303b1e","type":"ui_led","z":"ed93ec1675e6852c","order":37,"group":"c55a857ecd1e4471","width":0,"height":0,"label":"Slave_Vert_CW","labelPlacement":"left","labelAlignment":"left","colorForValue":[{"color":"#808080","value":"false","valueType":"bool"},{"color":"#90ee90","value":"true","valueType":"bool"}],"allowColorForValueInMessage":false,"shape":"circle","showGlow":true,"name":"Slave_Vert_CW","x":900,"y":2160,"wires":[]},{"id":"c2d0495a0a415c0e","type":"ui_led","z":"ed93ec1675e6852c","order":36,"group":"c55a857ecd1e4471","width":0,"height":0,"label":"Slave_Vert_CCW","labelPlacement":"left","labelAlignment":"left","colorForValue":[{"color":"#808080","value":"false","valueType":"bool"},{"color":"#90ee90","value":"true","valueType":"bool"}],"allowColorForValueInMessage":false,"shape":"circle","showGlow":true,"name":"Slave_Vert_CCW","x":910,"y":2120,"wires":[]},{"id":"79e2b816d0a360a6","type":"ui_led","z":"ed93ec1675e6852c","order":38,"group":"c55a857ecd1e4471","width":0,"height":0,"label":"Ignite_from_Panel","labelPlacement":"left","labelAlignment":"left","colorForValue":[{"color":"#808080","value":"false","valueType":"bool"},{"color":"#90ee90","value":"true","valueType":"bool"}],"allowColorForValueInMessage":false,"shape":"circle","showGlow":true,"name":"Ignite_from_Panel","x":910,"y":2200,"wires":[]},{"id":"20046b3a67c21807","type":"ui_led","z":"ed93ec1675e6852c","order":33,"group":"c55a857ecd1e4471","width":0,"height":0,"label":"Alarm A","labelPlacement":"left","labelAlignment":"left","colorForValue":[{"color":"#808080","value":"false","valueType":"bool"},{"color":"#ff0000","value":"true","valueType":"bool"}],"allowColorForValueInMessage":false,"shape":"circle","showGlow":true,"name":"Alarm A","x":880,"y":1720,"wires":[]},{"id":"59f660d5694eeb32","type":"ui_led","z":"ed93ec1675e6852c","order":33,"group":"c55a857ecd1e4471","width":0,"height":0,"label":"Alarm B","labelPlacement":"left","labelAlignment":"left","colorForValue":[{"color":"#808080","value":"false","valueType":"bool"},{"color":"#ff0000","value":"true","valueType":"bool"}],"allowColorForValueInMessage":false,"shape":"circle","showGlow":true,"name":"Alarm B","x":880,"y":1760,"wires":[]},{"id":"77af7238ef3ec841","type":"ui_led","z":"ed93ec1675e6852c","order":33,"group":"c55a857ecd1e4471","width":0,"height":0,"label":"Alarm C","labelPlacement":"left","labelAlignment":"left","colorForValue":[{"color":"#808080","value":"false","valueType":"bool"},{"color":"#ff0000","value":"true","valueType":"bool"}],"allowColorForValueInMessage":false,"shape":"circle","showGlow":true,"name":"Alarm C","x":880,"y":1800,"wires":[]},{"id":"9aae6d8ae73537a4","type":"ui_led","z":"ed93ec1675e6852c","order":33,"group":"c55a857ecd1e4471","width":0,"height":0,"label":"Alarm","labelPlacement":"left","labelAlignment":"left","colorForValue":[{"color":"#808080","value":"false","valueType":"bool"},{"color":"#ff0000","value":"true","valueType":"bool"}],"allowColorForValueInMessage":false,"shape":"circle","showGlow":true,"name":"Alarm","x":870,"y":1840,"wires":[]},{"id":"9c047015863c89f1","type":"bit-sixteen","z":"ed93ec1675e6852c","name":"","x":600,"y":1100,"wires":[["2696926f9e1e6e19"],["f3cb794ae478f66e"],["885d2df82815b2a2"],["2b984ca02f243564"],["75c02bbde30f4132"],["86aff0b90f416b7b"],["a2895792a739de74"],[],[],[],[],[],[],[],[],[]]},{"id":"29b20f853477ee99","type":"bit-sixteen","z":"ed93ec1675e6852c","name":"","x":600,"y":1460,"wires":[["6e560c6dbd348d38"],["601d2fcfb0021ce2"],["916f5bd4e09586cb"],["e9a52e28171c49b4"],["7fd292df5ea83cb6"],["b315dbf17307983a"],["6f9639b1772b0718"],["d33529ed3ec33077"],["02e6477009dffee1"],["c492190fbc4ea77e"],["5a10b8a5cc5db836"],["9896cf02fd19b41b"],[],[],[],[]]},{"id":"f3213331847e67a1","type":"comment","z":"5a9ed8a4a215d867","name":"DM-Registers","info":"","x":130,"y":80,"wires":[]},{"id":"2c1f4a22f80a9e58","type":"comment","z":"5a9ed8a4a215d867","name":"H-Registers","info":"","x":130,"y":460,"wires":[]},{"id":"65e51e7219809009","type":"change","z":"5a9ed8a4a215d867","name":"","rules":[{"t":"set","p":"Horizontal_speed","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":600,"y":2000,"wires":[["94e0efdcd8f05459"]]},{"id":"8ecce544bb4fa14a","type":"change","z":"5a9ed8a4a215d867","name":"","rules":[{"t":"set","p":"Vertical_speed","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":590,"y":2120,"wires":[["df4637d91d408ee3"]]},{"id":"21653df615c93084","type":"change","z":"5a9ed8a4a215d867","name":"","rules":[{"t":"set","p":"H260","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":560,"y":2520,"wires":[[]]},{"id":"1b5f3236b396f3b6","type":"change","z":"5a9ed8a4a215d867","name":"","rules":[{"t":"set","p":"H261","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":560,"y":2620,"wires":[[]]},{"id":"2fbb968baa6db0a9","type":"change","z":"5a9ed8a4a215d867","name":"","rules":[{"t":"set","p":"H302","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":560,"y":2720,"wires":[[]]},{"id":"5a7c5844f3858b4e","type":"change","z":"5a9ed8a4a215d867","name":"","rules":[{"t":"set","p":"H304","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":560,"y":2820,"wires":[[]]},{"id":"ce7b297ac9fb53f9","type":"change","z":"5a9ed8a4a215d867","name":"","rules":[{"t":"set","p":"H306","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":560,"y":2920,"wires":[[]]},{"id":"23976bd7a66a638c","type":"change","z":"5a9ed8a4a215d867","name":"","rules":[{"t":"set","p":"H308","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":560,"y":3020,"wires":[[]]},{"id":"91ad965f748d240a","type":"change","z":"5a9ed8a4a215d867","name":"","rules":[{"t":"set","p":"H310","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":560,"y":3120,"wires":[[]]},{"id":"149f0e07ac1c8191","type":"change","z":"5a9ed8a4a215d867","name":"","rules":[{"t":"set","p":"H312","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":560,"y":3220,"wires":[[]]},{"id":"2d6f85c338d1e6d6","type":"change","z":"5a9ed8a4a215d867","name":"","rules":[{"t":"set","p":"H314","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":560,"y":3320,"wires":[[]]},{"id":"58d0fa73cf668fa8","type":"change","z":"5a9ed8a4a215d867","name":"","rules":[{"t":"set","p":"H316","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":560,"y":3420,"wires":[[]]},{"id":"8387f38d1d5d39ba","type":"change","z":"5a9ed8a4a215d867","name":"","rules":[{"t":"set","p":"H318","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":560,"y":3520,"wires":[[]]},{"id":"004bc90daa41f51f","type":"change","z":"5a9ed8a4a215d867","name":"","rules":[{"t":"set","p":"H320","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":560,"y":3620,"wires":[[]]},{"id":"909d96d512b9a16d","type":"change","z":"5a9ed8a4a215d867","name":"","rules":[{"t":"set","p":"H322","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":560,"y":3720,"wires":[[]]},{"id":"9874b099699ce605","type":"change","z":"5a9ed8a4a215d867","name":"","rules":[{"t":"set","p":"H324","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":560,"y":3820,"wires":[[]]},{"id":"3aae959fa6d5b7b4","type":"link in","z":"5a9ed8a4a215d867","name":"link in Horizontal_Speed","links":["c4f33c3d8036c17f"],"x":185,"y":2040,"wires":[["d9ce5656126bde30"]]},{"id":"a55bc3842ccf8d65","type":"link in","z":"5a9ed8a4a215d867","name":"link in Vertical_Speed","links":["c4f33c3d8036c17f"],"x":205,"y":2160,"wires":[["7d51f14024599291"]]},{"id":"2460ed0f91c6454b","type":"function","z":"5a9ed8a4a215d867","name":"Set W30.1","func":"if (msg.payload == true) {\n    let regW = global.get(\"regW\");\n    regW.W30 |= 0b0000000000000010;\n    global.set(\"regW\", regW);\n} else {\n    let regW = global.get(\"regW\");\n    regW.W30 &= 0b1111111111111101;\n    global.set(\"regW\", regW);\n}","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1270,"y":1760,"wires":[["145941c497d66030"]]},{"id":"785ae8c5d002b12d","type":"link in","z":"5a9ed8a4a215d867","name":"link in SL_Need_Reset","links":["5300c28fa54ac5ed","1ee6780f9ee3a5f9","d9fc80567eacb9e3","2667e535ac03fcfc","b0739134a75ee4f0"],"x":1005,"y":1680,"wires":[["14f54ac1dbb232ac"]]},{"id":"4f537cfd21d20ea3","type":"link in","z":"5a9ed8a4a215d867","name":"link in H318","links":["c4f33c3d8036c17f"],"x":225,"y":3560,"wires":[["d232107671723a86"]]},{"id":"d232107671723a86","type":"function","z":"5a9ed8a4a215d867","name":"get H318","func":"\nreturn {payload: global.get(\"H318\")};","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":340,"y":3560,"wires":[["cf54c83b923aaf80"]]},{"id":"14fc0125d22a3750","type":"link in","z":"5a9ed8a4a215d867","name":"link in H320","links":["c4f33c3d8036c17f"],"x":225,"y":3660,"wires":[["8913373bd45e459c"]]},{"id":"8913373bd45e459c","type":"function","z":"5a9ed8a4a215d867","name":"get H320","func":"\nreturn {payload: global.get(\"H320\")};","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":340,"y":3660,"wires":[["c1e83d0668ea1867"]]},{"id":"2b760def2957906c","type":"link in","z":"5a9ed8a4a215d867","name":"link in H322","links":["c4f33c3d8036c17f"],"x":225,"y":3760,"wires":[["d589443ba5188e2a"]]},{"id":"d589443ba5188e2a","type":"function","z":"5a9ed8a4a215d867","name":"get H322","func":"\nreturn {payload: global.get(\"H322\")};","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":340,"y":3760,"wires":[["ae8a3b4777fe2cee"]]},{"id":"d5bf3771870f7425","type":"link in","z":"5a9ed8a4a215d867","name":"link in H324","links":["c4f33c3d8036c17f"],"x":225,"y":3860,"wires":[["6058fa1f497db7b2"]]},{"id":"6058fa1f497db7b2","type":"function","z":"5a9ed8a4a215d867","name":"get H324","func":"\nreturn {payload: global.get(\"H324\")};","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":340,"y":3860,"wires":[["26b6188049ccb026"]]},{"id":"27f0fb3d593c65fb","type":"link in","z":"5a9ed8a4a215d867","name":"link in H310","links":["c4f33c3d8036c17f"],"x":225,"y":3160,"wires":[["23ff4994b31b95cc"]]},{"id":"23ff4994b31b95cc","type":"function","z":"5a9ed8a4a215d867","name":"get H310","func":"\nreturn {payload: global.get(\"H310\")};","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":340,"y":3160,"wires":[["6d91371c56deeffe"]]},{"id":"8f1504cd9327d307","type":"link in","z":"5a9ed8a4a215d867","name":"link in H312","links":["c4f33c3d8036c17f"],"x":225,"y":3260,"wires":[["9fcc1f4a5fdc9007"]]},{"id":"9fcc1f4a5fdc9007","type":"function","z":"5a9ed8a4a215d867","name":"get H312","func":"\nreturn {payload: global.get(\"H312\")};","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":340,"y":3260,"wires":[["e6f74b78bae9e0fa"]]},{"id":"e7e54e4c2d3151b9","type":"link in","z":"5a9ed8a4a215d867","name":"link in H314","links":["c4f33c3d8036c17f"],"x":225,"y":3360,"wires":[["b52ef7401fc42b94"]]},{"id":"b52ef7401fc42b94","type":"function","z":"5a9ed8a4a215d867","name":"get H314","func":"\nreturn {payload: global.get(\"H314\")};","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":340,"y":3360,"wires":[["1c6ce71101b07b4b"]]},{"id":"3b03541b5a169046","type":"link in","z":"5a9ed8a4a215d867","name":"link in H316","links":["c4f33c3d8036c17f"],"x":225,"y":3460,"wires":[["4c01128145c52e37"]]},{"id":"4c01128145c52e37","type":"function","z":"5a9ed8a4a215d867","name":"get H316","func":"return {payload: global.get(\"H316\")};","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":340,"y":3460,"wires":[["48ebfbc2907c8646"]]},{"id":"542d2b89d750794d","type":"change","z":"5a9ed8a4a215d867","name":"","rules":[{"t":"set","p":"myAlarmLimitLamp","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":610,"y":340,"wires":[[]]},{"id":"d20f576c56d73961","type":"link in","z":"5a9ed8a4a215d867","name":"link in DM3104-Change","links":["ec5046c8a21596b7"],"x":245,"y":380,"wires":[["d8f021c93ed3dfd3"]]},{"id":"d8f021c93ed3dfd3","type":"function","z":"5a9ed8a4a215d867","name":"get DM3104","func":"\nreturn { payload: global.get(\"myAlarmLimitLamp\")};","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":370,"y":380,"wires":[["d04b6208941a2dfb"]]},{"id":"74f0a55f6fd15f42","type":"change","z":"5a9ed8a4a215d867","name":"","rules":[{"t":"set","p":"myTimesOfStrikesLamp","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":740,"y":280,"wires":[[]]},{"id":"2c5e67582f01d044","type":"change","z":"5a9ed8a4a215d867","name":"","rules":[{"t":"set","p":"myHoursOfUseLamp","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":730,"y":220,"wires":[[]]},{"id":"2999d147db3d7334","type":"link in","z":"5a9ed8a4a215d867","name":"link in Reset Lamp Counters","links":["0114a770882a8445"],"x":205,"y":140,"wires":[["21f0c0ef54b22330"]]},{"id":"e766567964398570","type":"function","z":"5a9ed8a4a215d867","name":"get H151.00","func":"\nreturn {payload: (global.get(\"H151\")&0b0001?1:0)};","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":370,"y":1920,"wires":[["51247649c13617fd"]]},{"id":"e1bccacaeaf9df8d","type":"function","z":"5a9ed8a4a215d867","name":"set H151.00","func":"let H151 = global.get(\"H151\") & 0xFFFE;\nif(msg.payload == 1) {\n    H151 |= 1;\n}\nglobal.set(\"H151\",H151);","outputs":0,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":550,"y":1880,"wires":[]},{"id":"aa3b0caf03c37d88","type":"link in","z":"5a9ed8a4a215d867","name":"link in H151.00","links":["4d99c6ac606f80a9","9a5d762b76c2d7fe"],"x":205,"y":1920,"wires":[["e766567964398570"]]},{"id":"64890c313921e4ff","type":"subflow:e8c4dc311b342ba5","z":"5a9ed8a4a215d867","x":430,"y":200,"wires":[]},{"id":"6d048aee67f335c9","type":"link in","z":"5a9ed8a4a215d867","name":"link in H302","links":["c4f33c3d8036c17f"],"x":235,"y":2760,"wires":[["e2bcf6b83204d105"]]},{"id":"e2bcf6b83204d105","type":"function","z":"5a9ed8a4a215d867","name":"get H302","func":"\nreturn {payload: global.get(\"H302\")};","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":380,"y":2760,"wires":[["6dc4f174a1ceadb1"]]},{"id":"47ee7a3716316517","type":"link in","z":"5a9ed8a4a215d867","name":"link in H304","links":["c4f33c3d8036c17f"],"x":235,"y":2860,"wires":[["4642245a0e71a321"]]},{"id":"4642245a0e71a321","type":"function","z":"5a9ed8a4a215d867","name":"get H304","func":"\nreturn {payload: global.get(\"H304\")};","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":360,"y":2860,"wires":[["4b03889888b9187a"]]},{"id":"b149a51db8a61bca","type":"link in","z":"5a9ed8a4a215d867","name":"link in H306","links":["c4f33c3d8036c17f"],"x":235,"y":2960,"wires":[["b9660bd143bd5a6d"]]},{"id":"b9660bd143bd5a6d","type":"function","z":"5a9ed8a4a215d867","name":"get H306","func":"\nreturn {payload: global.get(\"H306\")};","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":380,"y":2960,"wires":[["f88c7c3e2f41cd51"]]},{"id":"4126827b9b24ca54","type":"link in","z":"5a9ed8a4a215d867","name":"link in H308","links":["c4f33c3d8036c17f"],"x":235,"y":3060,"wires":[["1f0b02bb9e363bd5"]]},{"id":"1f0b02bb9e363bd5","type":"function","z":"5a9ed8a4a215d867","name":"get H308","func":"\nreturn {payload: global.get(\"H308\")};","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":380,"y":3060,"wires":[["708a70cd3b435c05"]]},{"id":"782e391901c35383","type":"function","z":"5a9ed8a4a215d867","name":"Clear Error Flag (W32.01)","func":"let regW = global.get(\"regW\");\nregW.W32 &= ~(0b0010);\nglobal.set(\"regW\",regW);\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1010,"y":140,"wires":[["17efd02ec64b80ce"]]},{"id":"17efd02ec64b80ce","type":"link out","z":"5a9ed8a4a215d867","name":"link out 51","mode":"link","links":["13a43e121be8adee"],"x":1175,"y":140,"wires":[]},{"id":"145941c497d66030","type":"link out","z":"5a9ed8a4a215d867","name":"link out 52","mode":"link","links":["13a43e121be8adee"],"x":1395,"y":1760,"wires":[]},{"id":"246524ba41cef314","type":"change","z":"5a9ed8a4a215d867","name":"","rules":[{"t":"set","p":"H104","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":560,"y":640,"wires":[[]]},{"id":"8834eea23e602273","type":"link in","z":"5a9ed8a4a215d867","name":"link in H104","links":["c4f33c3d8036c17f"],"x":225,"y":680,"wires":[["3f25abcd45341a0e"]]},{"id":"3f25abcd45341a0e","type":"function","z":"5a9ed8a4a215d867","name":"get H104","func":"\nreturn {payload: global.get(\"H104\")};","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":340,"y":680,"wires":[["025d57a3eed0af24"]]},{"id":"b42fe4182290a64f","type":"change","z":"5a9ed8a4a215d867","name":"","rules":[{"t":"set","p":"H105","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":560,"y":760,"wires":[[]]},{"id":"933e6c7a9e6ba0e0","type":"link in","z":"5a9ed8a4a215d867","name":"link in H105","links":["c4f33c3d8036c17f"],"x":225,"y":800,"wires":[["6580d5de8ac35f4f"]]},{"id":"6580d5de8ac35f4f","type":"function","z":"5a9ed8a4a215d867","name":"get H105","func":"\nreturn {payload: global.get(\"H105\")};","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":340,"y":800,"wires":[["fa51824cee14bdae"]]},{"id":"b10f33a63221c9cd","type":"change","z":"5a9ed8a4a215d867","name":"","rules":[{"t":"set","p":"H106","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":560,"y":880,"wires":[[]]},{"id":"6707dc108c555187","type":"link in","z":"5a9ed8a4a215d867","name":"link in H106","links":["c4f33c3d8036c17f"],"x":225,"y":920,"wires":[["383de51294c4a424"]]},{"id":"383de51294c4a424","type":"function","z":"5a9ed8a4a215d867","name":"get H106","func":"\nreturn {payload: global.get(\"H106\")};","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":340,"y":920,"wires":[["879e0a221e111113"]]},{"id":"6a0bf7cbcbbd4508","type":"change","z":"5a9ed8a4a215d867","name":"","rules":[{"t":"set","p":"H107","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":560,"y":1000,"wires":[[]]},{"id":"14a5bf97e0adc3f3","type":"link in","z":"5a9ed8a4a215d867","name":"link in H107","links":["c4f33c3d8036c17f"],"x":225,"y":1040,"wires":[["309d83baab57b1ba"]]},{"id":"309d83baab57b1ba","type":"function","z":"5a9ed8a4a215d867","name":"get H107","func":"\nreturn {payload: global.get(\"H107\")};","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":340,"y":1040,"wires":[["6be9b336b0b8d912"]]},{"id":"545eab9e81ab6c3c","type":"change","z":"5a9ed8a4a215d867","name":"","rules":[{"t":"set","p":"SL_Version","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":580,"y":520,"wires":[[]]},{"id":"5bc4153468df340f","type":"change","z":"5a9ed8a4a215d867","name":"","rules":[{"t":"set","p":"H220","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":560,"y":2420,"wires":[[]]},{"id":"e691ea8464165aa4","type":"link in","z":"5a9ed8a4a215d867","name":"link in H220","links":["c4f33c3d8036c17f"],"x":235,"y":2460,"wires":[["a233a3713ee6d8b2"]]},{"id":"a233a3713ee6d8b2","type":"function","z":"5a9ed8a4a215d867","name":"get H220","func":"\nreturn {payload: global.get(\"H220\")};","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":380,"y":2460,"wires":[["4966da05f20fdc86"]]},{"id":"10009f753f8e027f","type":"change","z":"5a9ed8a4a215d867","name":"","rules":[{"t":"set","p":"H210","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":560,"y":2320,"wires":[[]]},{"id":"08e7aed3485bb1db","type":"link in","z":"5a9ed8a4a215d867","name":"link in H210","links":["c4f33c3d8036c17f"],"x":235,"y":2360,"wires":[["8d58558f1145344f"]]},{"id":"8d58558f1145344f","type":"function","z":"5a9ed8a4a215d867","name":"get H210","func":"\nreturn {payload: global.get(\"H210\")};","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":380,"y":2360,"wires":[["b25acd1aa1d22e98"]]},{"id":"7041729509c55dc3","type":"change","z":"5a9ed8a4a215d867","name":"","rules":[{"t":"set","p":"H200","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":560,"y":2220,"wires":[[]]},{"id":"976c79f33b36b93d","type":"link in","z":"5a9ed8a4a215d867","name":"link in H200","links":["c4f33c3d8036c17f"],"x":235,"y":2260,"wires":[["4111cacb0d847d9d"]]},{"id":"4111cacb0d847d9d","type":"function","z":"5a9ed8a4a215d867","name":"get H200","func":"\nreturn {payload: global.get(\"H200\")};","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":380,"y":2260,"wires":[["945d7b8309452139"]]},{"id":"7139cc463f3333c4","type":"function","z":"5a9ed8a4a215d867","name":"Update H150","func":"let H150 = global.get(\"H150\");\n\nif (typeof msg.topic !== undefined) {\n    if((Number(msg.topic)>=0) && (Number(msg.topic)<12)) {\n        //(msg.payload ? H150 |= (0x0001 << number()) : H150 &= ~(0x0001 << 11));\n        (msg.payload ? H150 |= (0x0001 << Number(msg.topic)) : H150 &= ~(0x0001 << Number(msg.topic)));\n    }\n}\n\nif ((H150 & 0b1000) != 0) {\n    H150 &= ~(0b0111);\n} else if ((H150 & 0b0100) != 0) {\n    H150 &= ~(0b1011);\n} else if ((H150 & 0b0010) != 0) {\n    H150 &= ~(0b1101);\n} else  {\n    H150 &= ~(0b1110);\n    H150 |= 0b0001;\n}\nglobal.set(\"H150\", H150);\n\n/*\n// Define orientation (R60)\nlet horizPosSign = 1;\nlet vertPosSign = -1;\n// H150.07 Xenon (Vertical invert)\nif(H150&0b10000000) {\n    vertPosSign = -vertPosSign;\n}\n// H150.8 UpsideDown (bytte begge akser)\nif(H150&0b100000000) {\n    horizPosSign = -horizPosSign; \n    vertPosSign = -vertPosSign;\n}\nglobal.set(\"horizPosSign\",horizPosSign);\nglobal.set(\"vertPosSign\",vertPosSign);\n*/\n\nreturn { payload: H150 };","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":1070,"y":1520,"wires":[["d069c2ee8d4f253a"]]},{"id":"04c6319b546b47a8","type":"link in","z":"5a9ed8a4a215d867","name":"link in H150","links":["bb5eab514520a53f","238edb405c34ceee","fda518c345efa07b","d069c2ee8d4f253a"],"x":165,"y":1760,"wires":[["d843f47a12f9f60d"]]},{"id":"3d81ae573ea5b0c0","type":"rbe","z":"5a9ed8a4a215d867","name":"","func":"rbe","gap":"","start":"","inout":"out","septopics":true,"property":"payload","topi":"topic","x":1110,"y":1760,"wires":[["2460ed0f91c6454b"]]},{"id":"d843f47a12f9f60d","type":"function","z":"5a9ed8a4a215d867","name":"get H150","func":"let H150 = global.get(\"H150\");\n\n// Define orientation (R60)\nlet horizPosSign = 1;\nlet vertPosSign = -1;\n// H150.07 Xenon (Vertical invert)\nif(H150&0b10000000) {\n    vertPosSign = -vertPosSign;\n}\n// H150.8 UpsideDown (bytte begge akser)\nif(H150&0b100000000) {\n    horizPosSign = -horizPosSign; \n    vertPosSign = -vertPosSign;\n}\nglobal.set(\"horizPosSign\",horizPosSign);\nglobal.set(\"vertPosSign\",vertPosSign);\n\nreturn {payload: H150};","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":120,"y":1800,"wires":[["aa6ffb90ce29780d","c1516bf1e0b756a1"]]},{"id":"d9ce5656126bde30","type":"function","z":"5a9ed8a4a215d867","name":"get Horizontal_speed","func":"return { payload: global.get(\"Horizontal_speed\") };","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":340,"y":2060,"wires":[["9863a2d512b42eec"]]},{"id":"7d51f14024599291","type":"function","z":"5a9ed8a4a215d867","name":"get Vertical_speed","func":"return { payload: global.get(\"Vertical_speed\") };","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":350,"y":2180,"wires":[["a3a08ab4a6d03f2b"]]},{"id":"7e2b613e6fd5525b","type":"change","z":"5a9ed8a4a215d867","name":"","rules":[{"t":"set","p":"SlavePanelEnable","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":860,"y":1820,"wires":[["db0e0f160a41a342"]]},{"id":"2d090d03b79065e2","type":"change","z":"5a9ed8a4a215d867","name":"","rules":[{"t":"set","p":"H118","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":560,"y":1100,"wires":[[]]},{"id":"0e358aa1c6532b33","type":"link in","z":"5a9ed8a4a215d867","name":"link in H118","links":["c4f33c3d8036c17f"],"x":225,"y":1140,"wires":[["a2a804a8c9d8f648"]]},{"id":"a2a804a8c9d8f648","type":"function","z":"5a9ed8a4a215d867","name":"get H118","func":"\nreturn {payload: global.get(\"H118\")};","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":340,"y":1140,"wires":[["701ff26d127048af"]]},{"id":"91989b9d03230402","type":"change","z":"5a9ed8a4a215d867","name":"","rules":[{"t":"set","p":"H120","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":560,"y":1200,"wires":[[]]},{"id":"9e15d3b384f1b88d","type":"link in","z":"5a9ed8a4a215d867","name":"link in H120","links":["c4f33c3d8036c17f"],"x":225,"y":1240,"wires":[["5caecfd152155d08"]]},{"id":"5caecfd152155d08","type":"function","z":"5a9ed8a4a215d867","name":"get H120","func":"\nreturn {payload: global.get(\"H120\")};","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":340,"y":1240,"wires":[["3961afb0b2cfa77d"]]},{"id":"3ce3ecff6a5c1c35","type":"link out","z":"5a9ed8a4a215d867","name":"link out 151_00","mode":"link","links":["5d27b791096c9241"],"x":495,"y":1840,"wires":[]},{"id":"618b21a955fd1543","type":"link out","z":"5a9ed8a4a215d867","name":"link out SlavePanelEnable","mode":"link","links":["26985e372b39c6ce"],"x":1395,"y":1820,"wires":[]},{"id":"db0e0f160a41a342","type":"rbe","z":"5a9ed8a4a215d867","name":"","func":"rbe","gap":"","start":"","inout":"out","septopics":true,"property":"payload","topi":"topic","x":1290,"y":1820,"wires":[["618b21a955fd1543"]]},{"id":"829b52d4ddcc76f6","type":"link in","z":"5a9ed8a4a215d867","name":"link in H220","links":["c4f33c3d8036c17f"],"x":235,"y":2560,"wires":[["eb31069a0dac15e6"]]},{"id":"eb31069a0dac15e6","type":"function","z":"5a9ed8a4a215d867","name":"get H260","func":"\nreturn {payload: global.get(\"H260\")};","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":380,"y":2560,"wires":[["44095f2f5082381f"]]},{"id":"1d3907b7366f35de","type":"link in","z":"5a9ed8a4a215d867","name":"link in H220","links":["c4f33c3d8036c17f"],"x":235,"y":2660,"wires":[["568e094e6675307d"]]},{"id":"568e094e6675307d","type":"function","z":"5a9ed8a4a215d867","name":"get H261","func":"\nreturn {payload: global.get(\"H261\")};","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":380,"y":2660,"wires":[["34398917d8e5ad26"]]},{"id":"14f54ac1dbb232ac","type":"function","z":"5a9ed8a4a215d867","name":"Update H150","func":"let H150 = global.get(\"H150\");\nlet oldH150 = H150;\n\n(msg.payload ? H150 |= (0x0001 << 11) : H150 &= ~(0x0001 << 11));\n\nif (H150 != oldH150) {\n    global.set(\"H150\", H150);\n}\n\nreturn msg;","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":1130,"y":1680,"wires":[["3d81ae573ea5b0c0","d069c2ee8d4f253a"]]},{"id":"d069c2ee8d4f253a","type":"link out","z":"5a9ed8a4a215d867","name":"link out local H150","mode":"link","links":["04c6319b546b47a8"],"x":1205,"y":1600,"wires":[]},{"id":"9706b3ee03897f88","type":"change","z":"5a9ed8a4a215d867","name":"","rules":[{"t":"set","p":"LimpModeHor","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":590,"y":3920,"wires":[[]]},{"id":"f1930f78fef7960b","type":"change","z":"5a9ed8a4a215d867","name":"","rules":[{"t":"set","p":"LimpModeVert","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":590,"y":4020,"wires":[[]]},{"id":"16c8c48f91fcf65d","type":"change","z":"5a9ed8a4a215d867","name":"","rules":[{"t":"set","p":"LimpModeFocus","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":600,"y":4120,"wires":[[]]},{"id":"6edc9ada8236787a","type":"function","z":"5a9ed8a4a215d867","name":"Update R60 Mask","func":"let R60Mask = global.get(\"R60Mask\");\nif (msg.payload) {\n    R60Mask |= 0x0040;\n} else {\n    R60Mask &= ~(0x0040);\n}\nglobal.set(\"R60Mask\", R60Mask);\n","outputs":0,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":790,"y":4200,"wires":[]},{"id":"d21d2f5a9302dc04","type":"delay","z":"5a9ed8a4a215d867","name":"","pauseType":"delay","timeout":"3","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":600,"y":4200,"wires":[["6edc9ada8236787a"]]},{"id":"94e0efdcd8f05459","type":"link out","z":"5a9ed8a4a215d867","name":"link out Change Hor.Speed","mode":"link","links":["af26ee9f479d0c3f"],"x":775,"y":2000,"wires":[]},{"id":"df4637d91d408ee3","type":"link out","z":"5a9ed8a4a215d867","name":"link out Change Hor.Speed","mode":"link","links":["af26ee9f479d0c3f"],"x":775,"y":2120,"wires":[]},{"id":"21f0c0ef54b22330","type":"ui_button","z":"5a9ed8a4a215d867","name":"","group":"165c3949f7f07547","order":3,"width":0,"height":0,"passthru":true,"label":"RESET Lamp Counters","tooltip":"","color":"","bgcolor":"","className":"","icon":"","payload":"0","payloadType":"num","topic":"topic","topicType":"msg","x":450,"y":140,"wires":[["9e1260bc6ad74614","6eadfe447697b252","2c5e67582f01d044","74f0a55f6fd15f42","782e391901c35383"]]},{"id":"20e8c6b9b0f7d3f3","type":"ui_switch","z":"5a9ed8a4a215d867","name":"SL_Mounted_0deg_Act","label":"SL_Mounted_0deg_Act","tooltip":"","group":"e0a73f75f46cdb55","order":23,"width":0,"height":0,"passthru":false,"decouple":"true","topic":"0","topicType":"str","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","animate":false,"className":"","x":390,"y":1320,"wires":[["7139cc463f3333c4"]]},{"id":"862d1968be8e8d73","type":"ui_switch","z":"5a9ed8a4a215d867","name":"SL_Mounted_90deg_Act","label":"SL_Mounted_90deg_Act","tooltip":"","group":"e0a73f75f46cdb55","order":24,"width":0,"height":0,"passthru":false,"decouple":"true","topic":"1","topicType":"str","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","animate":false,"className":"","x":430,"y":1360,"wires":[["7139cc463f3333c4"]]},{"id":"06f0fcdac47802b7","type":"ui_switch","z":"5a9ed8a4a215d867","name":"SL_Mounted_180deg_Act","label":"SL_Mounted_180deg_Act","tooltip":"","group":"e0a73f75f46cdb55","order":25,"width":0,"height":0,"passthru":false,"decouple":"true","topic":"2","topicType":"str","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","animate":false,"className":"","x":470,"y":1400,"wires":[["7139cc463f3333c4"]]},{"id":"a3b498147b426600","type":"ui_switch","z":"5a9ed8a4a215d867","name":"SL_Mounted_Neg90deg_Act","label":"SL_Mounted_Neg90deg_Act","tooltip":"","group":"e0a73f75f46cdb55","order":26,"width":0,"height":0,"passthru":false,"decouple":"true","topic":"3","topicType":"str","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","animate":false,"className":"","x":520,"y":1440,"wires":[["7139cc463f3333c4"]]},{"id":"fea50f425cd8750d","type":"ui_switch","z":"5a9ed8a4a215d867","name":"Slave_Rev_Hor","label":"Slave_Rev_Hor","tooltip":"","group":"e0a73f75f46cdb55","order":27,"width":0,"height":0,"passthru":false,"decouple":"true","topic":"4","topicType":"str","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","animate":false,"className":"","x":520,"y":1480,"wires":[["7139cc463f3333c4"]]},{"id":"07210aa81c66758b","type":"ui_switch","z":"5a9ed8a4a215d867","name":"Slave_Rev_Vert","label":"Slave_Rev_Vert","tooltip":"","group":"e0a73f75f46cdb55","order":28,"width":0,"height":0,"passthru":false,"decouple":"true","topic":"5","topicType":"str","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","animate":false,"className":"","x":560,"y":1520,"wires":[["7139cc463f3333c4"]]},{"id":"6e6b61c8a8facb04","type":"ui_switch","z":"5a9ed8a4a215d867","name":"Slave_Enable","label":"Slave_Enable","tooltip":"","group":"e0a73f75f46cdb55","order":29,"width":0,"height":0,"passthru":false,"decouple":"true","topic":"6","topicType":"str","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","animate":false,"className":"","x":600,"y":1560,"wires":[["7139cc463f3333c4"]]},{"id":"8f332c06045ea414","type":"ui_switch","z":"5a9ed8a4a215d867","name":"Xenon_Enable","label":"Xenon_Enable","tooltip":"","group":"e0a73f75f46cdb55","order":30,"width":0,"height":0,"passthru":false,"decouple":"true","topic":"7","topicType":"str","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","animate":false,"className":"","x":640,"y":1600,"wires":[["7139cc463f3333c4"]]},{"id":"cd936d416d61afdb","type":"ui_switch","z":"5a9ed8a4a215d867","name":"SL_Mounted_Upside_Down","label":"SL_Mounted_Upside_Down","tooltip":"","group":"e0a73f75f46cdb55","order":31,"width":0,"height":0,"passthru":false,"decouple":"true","topic":"8","topicType":"str","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","animate":false,"className":"","x":720,"y":1640,"wires":[["7139cc463f3333c4"]]},{"id":"ea6b1706fe10604d","type":"ui_switch","z":"5a9ed8a4a215d867","name":"Main_Rev_Hor","label":"Main_Rev_Hor","tooltip":"","group":"e0a73f75f46cdb55","order":32,"width":0,"height":0,"passthru":false,"decouple":"true","topic":"9","topicType":"str","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","animate":false,"className":"","x":720,"y":1680,"wires":[["7139cc463f3333c4"]]},{"id":"b1979e5f402a47a9","type":"ui_switch","z":"5a9ed8a4a215d867","name":"Main_Rev_Vert","label":"Main_Rev_Vert","tooltip":"","group":"e0a73f75f46cdb55","order":33,"width":0,"height":0,"passthru":false,"decouple":"true","topic":"10","topicType":"str","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","animate":false,"className":"","x":760,"y":1720,"wires":[["7139cc463f3333c4"]]},{"id":"6c3ac5a59fdad103","type":"ui_switch","z":"5a9ed8a4a215d867","name":"SL_Need_Reset","label":"SL_Need_Reset","tooltip":"","group":"e0a73f75f46cdb55","order":34,"width":0,"height":0,"passthru":false,"decouple":"true","topic":"11","topicType":"str","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","animate":false,"className":"","x":800,"y":1760,"wires":[["7139cc463f3333c4","3d81ae573ea5b0c0"]]},{"id":"0846e6bc6b3b3116","type":"ui_switch","z":"5a9ed8a4a215d867","name":"EnableTempAlarm","label":"Enable Temp. Alarm","tooltip":"","group":"e0a73f75f46cdb55","order":36,"width":0,"height":0,"passthru":true,"decouple":"false","topic":"topic","topicType":"msg","style":"","onvalue":"1","onvalueType":"num","onicon":"","oncolor":"","offvalue":"0","offvalueType":"num","officon":"","offcolor":"","animate":false,"className":"","x":350,"y":1880,"wires":[["51247649c13617fd","e1bccacaeaf9df8d","3ce3ecff6a5c1c35"]]},{"id":"8bdecf6926088e10","type":"ui_switch","z":"5a9ed8a4a215d867","name":"","label":"Limp Mode Horizontal","tooltip":"","group":"e0a73f75f46cdb55","order":39,"width":0,"height":0,"passthru":true,"decouple":"false","topic":"topic","topicType":"msg","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","animate":false,"className":"","x":340,"y":3920,"wires":[["9706b3ee03897f88","c9164d9a686fe63b"]]},{"id":"f9cf183b915f123a","type":"ui_switch","z":"5a9ed8a4a215d867","name":"","label":"Limp Mode Vertical","tooltip":"","group":"e0a73f75f46cdb55","order":39,"width":0,"height":0,"passthru":true,"decouple":"false","topic":"topic","topicType":"msg","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","animate":false,"className":"","x":330,"y":4020,"wires":[["f1930f78fef7960b","f832b815ebc83cc7"]]},{"id":"d307de3a308ffbeb","type":"ui_switch","z":"5a9ed8a4a215d867","name":"","label":"Limp Mode Focus","tooltip":"","group":"e0a73f75f46cdb55","order":39,"width":0,"height":0,"passthru":true,"decouple":"false","topic":"topic","topicType":"msg","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","animate":false,"className":"","x":350,"y":4120,"wires":[["16c8c48f91fcf65d","f9ee400d0b6f7e3e","d21d2f5a9302dc04"]]},{"id":"1948e812924ae965","type":"ui_numeric","z":"5a9ed8a4a215d867","name":"Horizontal_speed","label":"Horizontal_speed","tooltip":"","group":"e0a73f75f46cdb55","order":2,"width":0,"height":0,"wrap":true,"passthru":true,"topic":"topic","topicType":"msg","format":"{{value}}","min":"10","max":"100","step":1,"className":"","x":350,"y":2000,"wires":[["9863a2d512b42eec","65e51e7219809009"]]},{"id":"26e7ef9b28d0a57e","type":"ui_numeric","z":"5a9ed8a4a215d867","name":"Vertical_speed","label":"Vertical_speed","tooltip":"","group":"e0a73f75f46cdb55","order":7,"width":0,"height":0,"wrap":true,"passthru":true,"topic":"topic","topicType":"msg","format":"{{value}}","min":"10","max":"100","step":1,"className":"","x":340,"y":2120,"wires":[["a3a08ab4a6d03f2b","8ecce544bb4fa14a"]]},{"id":"c11b2567ea9e49e4","type":"ui_numeric","z":"5a9ed8a4a215d867","name":"Slave_Speed_Hor","label":"Slave_Speed_Hor","tooltip":"","group":"e0a73f75f46cdb55","order":8,"width":0,"height":0,"wrap":false,"passthru":true,"topic":"topic","topicType":"msg","format":"{{value}}","min":"10","max":"100","step":1,"className":"","x":350,"y":2520,"wires":[["44095f2f5082381f","21653df615c93084"]]},{"id":"6060756accb4504c","type":"ui_numeric","z":"5a9ed8a4a215d867","name":"Slave_Speed_Vert","label":"Slave_Speed_Vert","tooltip":"","group":"e0a73f75f46cdb55","order":9,"width":0,"height":0,"wrap":false,"passthru":true,"topic":"topic","topicType":"msg","format":"{{value}}","min":"10","max":"100","step":1,"className":"","x":350,"y":2620,"wires":[["34398917d8e5ad26","1b5f3236b396f3b6"]]},{"id":"913c84ea4e141e61","type":"ui_numeric","z":"5a9ed8a4a215d867","name":"Hor_Sweep_Limit_Neg","label":"Hor_Sweep_Limit_Neg","tooltip":"","group":"e0a73f75f46cdb55","order":11,"width":0,"height":0,"wrap":false,"passthru":true,"topic":"topic","topicType":"msg","format":"{{value}}","min":"-180","max":"180","step":"1","className":"","x":330,"y":2720,"wires":[["6dc4f174a1ceadb1","2fbb968baa6db0a9"]]},{"id":"d7fcec6cd9489fcb","type":"ui_numeric","z":"5a9ed8a4a215d867","name":"Hor_Sweep_Limit_Pos","label":"Hor_Sweep_Limit_Pos","tooltip":"","group":"e0a73f75f46cdb55","order":12,"width":0,"height":0,"wrap":false,"passthru":true,"topic":"topic","topicType":"msg","format":"{{value}}","min":"-180","max":"180","step":"1","className":"","x":320,"y":2820,"wires":[["4b03889888b9187a","5a7c5844f3858b4e"]]},{"id":"32e02e62b78ab0ec","type":"ui_numeric","z":"5a9ed8a4a215d867","name":"Vert_Sweep_Limit_Neg","label":"Vert_Sweep_Limit_Neg","tooltip":"","group":"e0a73f75f46cdb55","order":13,"width":0,"height":0,"wrap":false,"passthru":true,"topic":"topic","topicType":"msg","format":"{{value}}","min":"-30","max":"30","step":"1","className":"","x":330,"y":2920,"wires":[["f88c7c3e2f41cd51","ce7b297ac9fb53f9"]]},{"id":"171e6100f8473a58","type":"ui_numeric","z":"5a9ed8a4a215d867","name":"Vert_Sweep_Limit_Pos","label":"Vert_Sweep_Limit_Pos","tooltip":"","group":"e0a73f75f46cdb55","order":14,"width":0,"height":0,"wrap":false,"passthru":true,"topic":"topic","topicType":"msg","format":"{{value}}","min":"-30","max":"30","step":"1","className":"","x":330,"y":3020,"wires":[["708a70cd3b435c05","23976bd7a66a638c"]]},{"id":"ab4717a57d8f29e5","type":"ui_numeric","z":"5a9ed8a4a215d867","name":"Hor_Home1","label":"Hor_Home1","tooltip":"","group":"e0a73f75f46cdb55","order":15,"width":0,"height":0,"wrap":false,"passthru":true,"topic":"topic","topicType":"msg","format":"{{value}}","min":"-180","max":"180","step":"1","className":"","x":290,"y":3120,"wires":[["6d91371c56deeffe","91ad965f748d240a"]]},{"id":"054d17c651074035","type":"ui_numeric","z":"5a9ed8a4a215d867","name":"Vert_Home1","label":"Vert_Home1","tooltip":"","group":"e0a73f75f46cdb55","order":16,"width":0,"height":0,"wrap":false,"passthru":true,"topic":"topic","topicType":"msg","format":"{{value}}","min":"-30","max":"30","step":"1","className":"","x":290,"y":3220,"wires":[["e6f74b78bae9e0fa","149f0e07ac1c8191"]]},{"id":"5fd4604a60b37f68","type":"ui_numeric","z":"5a9ed8a4a215d867","name":"Hor_Home2","label":"Hor_Home2","tooltip":"","group":"e0a73f75f46cdb55","order":17,"width":0,"height":0,"wrap":false,"passthru":true,"topic":"topic","topicType":"msg","format":"{{value}}","min":"-180","max":"180","step":"1","className":"","x":290,"y":3320,"wires":[["1c6ce71101b07b4b","2d6f85c338d1e6d6"]]},{"id":"9256c996f4e4523e","type":"ui_numeric","z":"5a9ed8a4a215d867","name":"Vert_Home2","label":"Vert_Home2","tooltip":"","group":"e0a73f75f46cdb55","order":18,"width":0,"height":0,"wrap":false,"passthru":true,"topic":"topic","topicType":"msg","format":"{{value}}","min":"-45","max":"45","step":"1","className":"","x":290,"y":3420,"wires":[["48ebfbc2907c8646","58d0fa73cf668fa8"]]},{"id":"4dd1624d6e964e55","type":"ui_numeric","z":"5a9ed8a4a215d867","name":"Hor_Sector_Limit_Neg","label":"Hor. Sector Limit Neg.","tooltip":"","group":"e0a73f75f46cdb55","order":19,"width":0,"height":0,"wrap":false,"passthru":true,"topic":"topic","topicType":"msg","format":"{{value}}","min":"-180","max":"180","step":"1","className":"","x":320,"y":3520,"wires":[["cf54c83b923aaf80","8387f38d1d5d39ba"]]},{"id":"dca60b81fb8dda81","type":"ui_numeric","z":"5a9ed8a4a215d867","name":"Hor_Sector_Limit_Pos","label":"Hor. Sector Limit Pos.","tooltip":"","group":"e0a73f75f46cdb55","order":20,"width":0,"height":0,"wrap":false,"passthru":true,"topic":"topic","topicType":"msg","format":"{{value}}","min":"-180","max":"180","step":"1","className":"","x":320,"y":3620,"wires":[["c1e83d0668ea1867","004bc90daa41f51f"]]},{"id":"03d04f1cdb8e32e4","type":"ui_numeric","z":"5a9ed8a4a215d867","name":"Vert_Sector_Limit_Neg","label":"Vert. Sector Limit Neg.","tooltip":"","group":"e0a73f75f46cdb55","order":21,"width":0,"height":0,"wrap":false,"passthru":true,"topic":"topic","topicType":"msg","format":"{{value}}","min":"-30","max":"30","step":"1","className":"","x":330,"y":3720,"wires":[["ae8a3b4777fe2cee","909d96d512b9a16d"]]},{"id":"338dc916a46b3a71","type":"ui_numeric","z":"5a9ed8a4a215d867","name":"Vert_Sector_Limit_Pos","label":"Vert. Sector Limit Pos.","tooltip":"","group":"e0a73f75f46cdb55","order":22,"width":0,"height":0,"wrap":false,"passthru":true,"topic":"topic","topicType":"msg","format":"{{value}}","min":"-30","max":"30","step":"1","className":"","x":320,"y":3820,"wires":[["26b6188049ccb026","9874b099699ce605"]]},{"id":"4cd00cc3f27e5af5","type":"ui_numeric","z":"5a9ed8a4a215d867","name":"AlarmLimitLamp","label":"Alarm-Limit Lamp [h]","tooltip":"","group":"165c3949f7f07547","order":1,"width":0,"height":0,"wrap":true,"passthru":true,"topic":"topic","topicType":"msg","format":"{{value}}","min":"0","max":"99999","step":1,"className":"","x":360,"y":340,"wires":[["542d2b89d750794d","d04b6208941a2dfb"]]},{"id":"acbdc63ad6246a6e","type":"ui_numeric","z":"5a9ed8a4a215d867","name":"","label":"Hor_Speed_Level1","tooltip":"","group":"e0a73f75f46cdb55","order":3,"width":0,"height":0,"wrap":false,"passthru":true,"topic":"topic","topicType":"msg","format":"{{value}}","min":"0","max":"100","step":"1","className":"","x":310,"y":640,"wires":[["025d57a3eed0af24","246524ba41cef314"]]},{"id":"26468b24b9e83eba","type":"ui_numeric","z":"5a9ed8a4a215d867","name":"","label":"Hor_Speed_Level2","tooltip":"","group":"e0a73f75f46cdb55","order":4,"width":0,"height":0,"wrap":false,"passthru":true,"topic":"topic","topicType":"msg","format":"{{value}}","min":"0","max":"100","step":"1","className":"","x":310,"y":760,"wires":[["fa51824cee14bdae","b42fe4182290a64f"]]},{"id":"d07d99b3844a1bf1","type":"ui_numeric","z":"5a9ed8a4a215d867","name":"","label":"Vert_Speed_Level1","tooltip":"","group":"e0a73f75f46cdb55","order":5,"width":0,"height":0,"wrap":false,"passthru":true,"topic":"topic","topicType":"msg","format":"{{value}}","min":"0","max":"100","step":"1","className":"","x":310,"y":880,"wires":[["879e0a221e111113","b10f33a63221c9cd"]]},{"id":"c56e5b3b609e4409","type":"ui_numeric","z":"5a9ed8a4a215d867","name":"","label":"Vert_Speed_Level2","tooltip":"","group":"e0a73f75f46cdb55","order":6,"width":0,"height":0,"wrap":false,"passthru":true,"topic":"topic","topicType":"msg","format":"{{value}}","min":"0","max":"100","step":"1","className":"","x":310,"y":1000,"wires":[["6be9b336b0b8d912","6a0bf7cbcbbd4508"]]},{"id":"d6bdbbcf14266aa7","type":"ui_numeric","z":"5a9ed8a4a215d867","name":"","label":"SL Version","tooltip":"Searchlight version","group":"e0a73f75f46cdb55","order":1,"width":0,"height":0,"wrap":false,"passthru":true,"topic":"topic","topicType":"msg","format":"{{value}}","min":"51","max":"51","step":"1","className":"","x":290,"y":520,"wires":[["545eab9e81ab6c3c"]]},{"id":"74e2b3e4f07084a4","type":"ui_numeric","z":"5a9ed8a4a215d867","name":"","label":"Focus Pos. Min","tooltip":"","group":"e0a73f75f46cdb55","order":6,"width":0,"height":0,"wrap":false,"passthru":true,"topic":"topic","topicType":"msg","format":"{{value}}","min":"0","max":"4096","step":"1","className":"","x":300,"y":1100,"wires":[["701ff26d127048af","2d090d03b79065e2"]]},{"id":"b6fec6029364bb7f","type":"ui_numeric","z":"5a9ed8a4a215d867","name":"","label":"Focus Pos. Max","tooltip":"","group":"e0a73f75f46cdb55","order":6,"width":0,"height":0,"wrap":false,"passthru":true,"topic":"topic","topicType":"msg","format":"{{value}}","min":"0","max":"4096","step":"1","className":"","x":300,"y":1200,"wires":[["3961afb0b2cfa77d","91989b9d03230402"]]},{"id":"8ea915fbe9c74118","type":"ui_text_input","z":"5a9ed8a4a215d867","name":"","label":"Searchlight name","tooltip":"","group":"e0a73f75f46cdb55","order":36,"width":0,"height":0,"passthru":true,"mode":"text","delay":300,"topic":"topic","sendOnBlur":true,"className":"","topicType":"msg","x":330,"y":2420,"wires":[["4966da05f20fdc86","5bc4153468df340f"]]},{"id":"db2abe41e03cb64b","type":"ui_text_input","z":"5a9ed8a4a215d867","name":"","label":"Go To Pos name","tooltip":"","group":"e0a73f75f46cdb55","order":36,"width":0,"height":0,"passthru":true,"mode":"text","delay":300,"topic":"topic","sendOnBlur":true,"className":"","topicType":"msg","x":330,"y":2320,"wires":[["b25acd1aa1d22e98","10009f753f8e027f"]]},{"id":"6d38e4846257fd87","type":"ui_text_input","z":"5a9ed8a4a215d867","name":"","label":"Park Name","tooltip":"","group":"e0a73f75f46cdb55","order":36,"width":0,"height":0,"passthru":true,"mode":"text","delay":300,"topic":"topic","sendOnBlur":true,"className":"","topicType":"msg","x":310,"y":2220,"wires":[["945d7b8309452139","7041729509c55dc3"]]},{"id":"bd7c55ed4a9b37ed","type":"ui_text","z":"5a9ed8a4a215d867","group":"165c3949f7f07547","order":1,"width":0,"height":0,"name":"","label":"Times of strikes lamp","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#000000","x":460,"y":260,"wires":[]},{"id":"613d6a183291b422","type":"get-shared-state","z":"5a9ed8a4a215d867","state":"c5e1aff309299435","name":"Horizontal_speed","triggerOnInit":true,"triggerOnChange":true,"x":140,"y":2000,"wires":[["1948e812924ae965"]]},{"id":"f351bfe881dff2eb","type":"get-shared-state","z":"5a9ed8a4a215d867","state":"2e7924d4a68ba534","name":"Vertical_speed","triggerOnInit":true,"triggerOnChange":true,"x":140,"y":2120,"wires":[["26e7ef9b28d0a57e"]]},{"id":"b274a150fb87d333","type":"get-shared-state","z":"5a9ed8a4a215d867","state":"20566e8d2d01e4d9","name":"H150","triggerOnInit":true,"triggerOnChange":true,"x":110,"y":1700,"wires":[["aa6ffb90ce29780d"]]},{"id":"0924e34c547dce8c","type":"get-shared-state","z":"5a9ed8a4a215d867","state":"60e7eca22349521a","name":"H151_00","triggerOnInit":true,"triggerOnChange":true,"x":120,"y":1880,"wires":[["0846e6bc6b3b3116"]]},{"id":"9bb92b736f464c2a","type":"get-shared-state","z":"5a9ed8a4a215d867","state":"80a99fcd0b3f68de","name":"H260","triggerOnInit":true,"triggerOnChange":true,"x":110,"y":2520,"wires":[["c11b2567ea9e49e4"]]},{"id":"bffbf6108f9e4c34","type":"get-shared-state","z":"5a9ed8a4a215d867","state":"0d3f30c04a0f967b","name":"H261","triggerOnInit":true,"triggerOnChange":true,"x":110,"y":2620,"wires":[["6060756accb4504c"]]},{"id":"c9518d015c239126","type":"get-shared-state","z":"5a9ed8a4a215d867","state":"9dfa40ef260d7df9","name":"H302","triggerOnInit":true,"triggerOnChange":true,"x":110,"y":2720,"wires":[["913c84ea4e141e61"]]},{"id":"b6c4ddd51c65bc4e","type":"get-shared-state","z":"5a9ed8a4a215d867","state":"f72e7f578295d2fe","name":"H304","triggerOnInit":true,"triggerOnChange":true,"x":110,"y":2820,"wires":[["d7fcec6cd9489fcb"]]},{"id":"e5201a85c07cb703","type":"get-shared-state","z":"5a9ed8a4a215d867","state":"4e2990d3d3a0cfb1","name":"H306","triggerOnInit":true,"triggerOnChange":true,"x":110,"y":2920,"wires":[["32e02e62b78ab0ec"]]},{"id":"a5a7806401f2cf86","type":"get-shared-state","z":"5a9ed8a4a215d867","state":"9177b5255b1917d3","name":"H308","triggerOnInit":true,"triggerOnChange":true,"x":110,"y":3020,"wires":[["171e6100f8473a58"]]},{"id":"a0ec766c2999c809","type":"get-shared-state","z":"5a9ed8a4a215d867","state":"eba949b83245bc3a","name":"H310","triggerOnInit":true,"triggerOnChange":true,"x":110,"y":3120,"wires":[["ab4717a57d8f29e5"]]},{"id":"ad9ef81869e3f57c","type":"get-shared-state","z":"5a9ed8a4a215d867","state":"f75ea206b4c80cd5","name":"H312","triggerOnInit":true,"triggerOnChange":true,"x":110,"y":3220,"wires":[["054d17c651074035"]]},{"id":"651d04888af17e5b","type":"get-shared-state","z":"5a9ed8a4a215d867","state":"15c4f25ae9fb0ce6","name":"H314","triggerOnInit":true,"triggerOnChange":true,"x":110,"y":3320,"wires":[["5fd4604a60b37f68"]]},{"id":"0a2e5d6f036a9a2f","type":"get-shared-state","z":"5a9ed8a4a215d867","state":"0e07a621c7734422","name":"H316","triggerOnInit":true,"triggerOnChange":true,"x":110,"y":3420,"wires":[["9256c996f4e4523e"]]},{"id":"c4504b6c86a7b7ee","type":"get-shared-state","z":"5a9ed8a4a215d867","state":"f248fd28597ca4d9","name":"H318","triggerOnInit":true,"triggerOnChange":true,"x":110,"y":3520,"wires":[["4dd1624d6e964e55"]]},{"id":"edf30b5f36d18d62","type":"get-shared-state","z":"5a9ed8a4a215d867","state":"c2667f8de0fa1871","name":"H320","triggerOnInit":true,"triggerOnChange":true,"x":110,"y":3620,"wires":[["dca60b81fb8dda81"]]},{"id":"f39a41a2291763f9","type":"get-shared-state","z":"5a9ed8a4a215d867","state":"bddc4878942be82e","name":"H322","triggerOnInit":true,"triggerOnChange":true,"x":110,"y":3720,"wires":[["03d04f1cdb8e32e4"]]},{"id":"daa286746ab86bd9","type":"get-shared-state","z":"5a9ed8a4a215d867","state":"07c08f129a7b4c70","name":"H324","triggerOnInit":true,"triggerOnChange":true,"x":110,"y":3820,"wires":[["338dc916a46b3a71"]]},{"id":"a34e9f7d96dfc2c5","type":"get-shared-state","z":"5a9ed8a4a215d867","state":"183f35baf73533ae","name":"myAlarmLimitLamp","triggerOnInit":true,"triggerOnChange":true,"x":150,"y":340,"wires":[["4cd00cc3f27e5af5"]]},{"id":"8979935afc4fcabb","type":"get-shared-state","z":"5a9ed8a4a215d867","state":"a380e10a93bb06f6","name":"myHoursOfUseLamp","triggerOnInit":true,"triggerOnChange":true,"x":160,"y":220,"wires":[["2c5e67582f01d044","64890c313921e4ff"]]},{"id":"3c67d7df0932eef7","type":"get-shared-state","z":"5a9ed8a4a215d867","state":"a3359771aeaf0a9a","name":"myTimesOfStrikesLamp","triggerOnInit":true,"triggerOnChange":true,"x":160,"y":280,"wires":[["bd7c55ed4a9b37ed","74f0a55f6fd15f42"]]},{"id":"49fe69b984524427","type":"get-shared-state","z":"5a9ed8a4a215d867","state":"d423ff8fccb8bc7a","name":"H104","triggerOnInit":true,"triggerOnChange":true,"x":110,"y":640,"wires":[["acbdc63ad6246a6e"]]},{"id":"588c751d096349b5","type":"get-shared-state","z":"5a9ed8a4a215d867","state":"cc99b107ae5d636b","name":"H105","triggerOnInit":true,"triggerOnChange":true,"x":110,"y":760,"wires":[["26468b24b9e83eba"]]},{"id":"fc7c8bf6e4be32fc","type":"get-shared-state","z":"5a9ed8a4a215d867","state":"b85a896e6cae7d2e","name":"H106","triggerOnInit":true,"triggerOnChange":true,"x":110,"y":880,"wires":[["d07d99b3844a1bf1"]]},{"id":"72c57c2c5d76beae","type":"get-shared-state","z":"5a9ed8a4a215d867","state":"08b8f050c4969e90","name":"H107","triggerOnInit":true,"triggerOnChange":true,"x":110,"y":1000,"wires":[["c56e5b3b609e4409"]]},{"id":"9ffedc6e3bd0b2db","type":"get-shared-state","z":"5a9ed8a4a215d867","state":"1db7bf75d46ca85f","name":"H100","triggerOnInit":true,"triggerOnChange":true,"x":110,"y":520,"wires":[["d6bdbbcf14266aa7"]]},{"id":"20af0562e24d09c4","type":"get-shared-state","z":"5a9ed8a4a215d867","state":"281ce15898884b61","name":"H220","triggerOnInit":true,"triggerOnChange":true,"x":110,"y":2420,"wires":[["8ea915fbe9c74118"]]},{"id":"9e47271a22b6da25","type":"get-shared-state","z":"5a9ed8a4a215d867","state":"1ab7373f6bacb88c","name":"H210","triggerOnInit":true,"triggerOnChange":true,"x":110,"y":2320,"wires":[["db2abe41e03cb64b"]]},{"id":"dabb0c73f994ae4a","type":"get-shared-state","z":"5a9ed8a4a215d867","state":"744223c35bab1e2d","name":"H200","triggerOnInit":true,"triggerOnChange":true,"x":110,"y":2220,"wires":[["6d38e4846257fd87"]]},{"id":"97d477e47ceec5e8","type":"get-shared-state","z":"5a9ed8a4a215d867","state":"94260a86e7c6ad52","name":"H118","triggerOnInit":true,"triggerOnChange":true,"x":110,"y":1100,"wires":[["74e2b3e4f07084a4"]]},{"id":"aa1e82d9beb931f8","type":"get-shared-state","z":"5a9ed8a4a215d867","state":"cf0d9d2ce5d9afcc","name":"H120","triggerOnInit":true,"triggerOnChange":true,"x":110,"y":1200,"wires":[["b6fec6029364bb7f"]]},{"id":"6072b1082971aca7","type":"get-shared-state","z":"5a9ed8a4a215d867","state":"925fe9794556cfab","name":"LimpModeHor","triggerOnInit":true,"triggerOnChange":true,"x":130,"y":3920,"wires":[["8bdecf6926088e10"]]},{"id":"812ff7b71d3d0709","type":"get-shared-state","z":"5a9ed8a4a215d867","state":"aec2e1d3093df16d","name":"LimpModeVert","triggerOnInit":true,"triggerOnChange":true,"x":130,"y":4020,"wires":[["f9cf183b915f123a"]]},{"id":"4666a0c71c0c90c6","type":"get-shared-state","z":"5a9ed8a4a215d867","state":"dc65d6fbaddad817","name":"LimpModeFocus","triggerOnInit":true,"triggerOnChange":true,"x":140,"y":4120,"wires":[["d307de3a308ffbeb"]]},{"id":"9863a2d512b42eec","type":"set-shared-state","z":"5a9ed8a4a215d867","state":"c5e1aff309299435","name":"Horizontal_speed","triggerOnInit":true,"triggerOnChange":true,"provideOutput":false,"outputs":0,"x":570,"y":2040,"wires":[]},{"id":"a3a08ab4a6d03f2b","type":"set-shared-state","z":"5a9ed8a4a215d867","state":"2e7924d4a68ba534","name":"Vertical_speed","triggerOnInit":true,"triggerOnChange":true,"provideOutput":false,"outputs":0,"x":560,"y":2160,"wires":[]},{"id":"51247649c13617fd","type":"set-shared-state","z":"5a9ed8a4a215d867","state":"60e7eca22349521a","name":"H151_00","triggerOnInit":true,"triggerOnChange":true,"provideOutput":false,"outputs":0,"x":540,"y":1920,"wires":[]},{"id":"44095f2f5082381f","type":"set-shared-state","z":"5a9ed8a4a215d867","state":"80a99fcd0b3f68de","name":"H260","triggerOnInit":true,"triggerOnChange":true,"provideOutput":false,"outputs":0,"x":530,"y":2560,"wires":[]},{"id":"34398917d8e5ad26","type":"set-shared-state","z":"5a9ed8a4a215d867","state":"0d3f30c04a0f967b","name":"H261","triggerOnInit":true,"triggerOnChange":true,"provideOutput":false,"outputs":0,"x":530,"y":2660,"wires":[]},{"id":"6dc4f174a1ceadb1","type":"set-shared-state","z":"5a9ed8a4a215d867","state":"9dfa40ef260d7df9","name":"H302","triggerOnInit":true,"triggerOnChange":true,"provideOutput":false,"outputs":0,"x":530,"y":2760,"wires":[]},{"id":"4b03889888b9187a","type":"set-shared-state","z":"5a9ed8a4a215d867","state":"f72e7f578295d2fe","name":"H304","triggerOnInit":true,"triggerOnChange":true,"provideOutput":false,"outputs":0,"x":530,"y":2860,"wires":[]},{"id":"f88c7c3e2f41cd51","type":"set-shared-state","z":"5a9ed8a4a215d867","state":"4e2990d3d3a0cfb1","name":"H306","triggerOnInit":true,"triggerOnChange":true,"provideOutput":false,"outputs":0,"x":530,"y":2960,"wires":[]},{"id":"708a70cd3b435c05","type":"set-shared-state","z":"5a9ed8a4a215d867","state":"9177b5255b1917d3","name":"H308","triggerOnInit":true,"triggerOnChange":true,"provideOutput":false,"outputs":0,"x":530,"y":3060,"wires":[]},{"id":"6d91371c56deeffe","type":"set-shared-state","z":"5a9ed8a4a215d867","state":"eba949b83245bc3a","name":"H310","triggerOnInit":true,"triggerOnChange":true,"provideOutput":false,"outputs":0,"x":530,"y":3160,"wires":[]},{"id":"e6f74b78bae9e0fa","type":"set-shared-state","z":"5a9ed8a4a215d867","state":"f75ea206b4c80cd5","name":"H312","triggerOnInit":true,"triggerOnChange":true,"provideOutput":false,"outputs":0,"x":530,"y":3260,"wires":[]},{"id":"1c6ce71101b07b4b","type":"set-shared-state","z":"5a9ed8a4a215d867","state":"15c4f25ae9fb0ce6","name":"H314","triggerOnInit":true,"triggerOnChange":true,"provideOutput":false,"outputs":0,"x":530,"y":3360,"wires":[]},{"id":"48ebfbc2907c8646","type":"set-shared-state","z":"5a9ed8a4a215d867","state":"0e07a621c7734422","name":"H316","triggerOnInit":true,"triggerOnChange":true,"provideOutput":false,"outputs":0,"x":530,"y":3460,"wires":[]},{"id":"cf54c83b923aaf80","type":"set-shared-state","z":"5a9ed8a4a215d867","state":"f248fd28597ca4d9","name":"H318","triggerOnInit":true,"triggerOnChange":true,"provideOutput":false,"outputs":0,"x":530,"y":3560,"wires":[]},{"id":"c1e83d0668ea1867","type":"set-shared-state","z":"5a9ed8a4a215d867","state":"c2667f8de0fa1871","name":"H320","triggerOnInit":true,"triggerOnChange":true,"provideOutput":false,"outputs":0,"x":530,"y":3660,"wires":[]},{"id":"ae8a3b4777fe2cee","type":"set-shared-state","z":"5a9ed8a4a215d867","state":"bddc4878942be82e","name":"H322","triggerOnInit":true,"triggerOnChange":true,"provideOutput":false,"outputs":0,"x":530,"y":3760,"wires":[]},{"id":"26b6188049ccb026","type":"set-shared-state","z":"5a9ed8a4a215d867","state":"07c08f129a7b4c70","name":"H324","triggerOnInit":true,"triggerOnChange":true,"provideOutput":false,"outputs":0,"x":530,"y":3860,"wires":[]},{"id":"d04b6208941a2dfb","type":"set-shared-state","z":"5a9ed8a4a215d867","state":"183f35baf73533ae","name":"myAlarmLimitLamp","triggerOnInit":true,"triggerOnChange":true,"provideOutput":false,"outputs":0,"x":570,"y":380,"wires":[]},{"id":"9e1260bc6ad74614","type":"set-shared-state","z":"5a9ed8a4a215d867","state":"a380e10a93bb06f6","name":"myHoursOfUseLamp","triggerOnInit":true,"triggerOnChange":true,"provideOutput":false,"outputs":0,"x":740,"y":100,"wires":[]},{"id":"6eadfe447697b252","type":"set-shared-state","z":"5a9ed8a4a215d867","state":"a3359771aeaf0a9a","name":"myTimesOfStrikesLamp","triggerOnInit":true,"triggerOnChange":true,"provideOutput":false,"outputs":0,"x":750,"y":160,"wires":[]},{"id":"025d57a3eed0af24","type":"set-shared-state","z":"5a9ed8a4a215d867","state":"d423ff8fccb8bc7a","name":"H104","triggerOnInit":true,"triggerOnChange":true,"provideOutput":false,"outputs":0,"x":530,"y":680,"wires":[]},{"id":"fa51824cee14bdae","type":"set-shared-state","z":"5a9ed8a4a215d867","state":"cc99b107ae5d636b","name":"H105","triggerOnInit":true,"triggerOnChange":true,"provideOutput":false,"outputs":0,"x":530,"y":800,"wires":[]},{"id":"879e0a221e111113","type":"set-shared-state","z":"5a9ed8a4a215d867","state":"b85a896e6cae7d2e","name":"H106","triggerOnInit":true,"triggerOnChange":true,"provideOutput":false,"outputs":0,"x":530,"y":920,"wires":[]},{"id":"6be9b336b0b8d912","type":"set-shared-state","z":"5a9ed8a4a215d867","state":"08b8f050c4969e90","name":"H107","triggerOnInit":true,"triggerOnChange":true,"provideOutput":false,"outputs":0,"x":530,"y":1040,"wires":[]},{"id":"4966da05f20fdc86","type":"set-shared-state","z":"5a9ed8a4a215d867","state":"281ce15898884b61","name":"H220","triggerOnInit":true,"triggerOnChange":true,"provideOutput":false,"outputs":0,"x":530,"y":2460,"wires":[]},{"id":"b25acd1aa1d22e98","type":"set-shared-state","z":"5a9ed8a4a215d867","state":"1ab7373f6bacb88c","name":"H210","triggerOnInit":true,"triggerOnChange":true,"provideOutput":false,"outputs":0,"x":530,"y":2360,"wires":[]},{"id":"945d7b8309452139","type":"set-shared-state","z":"5a9ed8a4a215d867","state":"744223c35bab1e2d","name":"H200","triggerOnInit":true,"triggerOnChange":true,"provideOutput":false,"outputs":0,"x":530,"y":2260,"wires":[]},{"id":"701ff26d127048af","type":"set-shared-state","z":"5a9ed8a4a215d867","state":"94260a86e7c6ad52","name":"H118","triggerOnInit":true,"triggerOnChange":true,"provideOutput":false,"outputs":0,"x":530,"y":1140,"wires":[]},{"id":"3961afb0b2cfa77d","type":"set-shared-state","z":"5a9ed8a4a215d867","state":"cf0d9d2ce5d9afcc","name":"H120","triggerOnInit":true,"triggerOnChange":true,"provideOutput":false,"outputs":0,"x":530,"y":1240,"wires":[]},{"id":"c1516bf1e0b756a1","type":"set-shared-state","z":"5a9ed8a4a215d867","state":"20566e8d2d01e4d9","name":"H150","triggerOnInit":true,"triggerOnChange":true,"provideOutput":false,"outputs":0,"x":270,"y":1800,"wires":[]},{"id":"c9164d9a686fe63b","type":"set-shared-state","z":"5a9ed8a4a215d867","state":"925fe9794556cfab","name":"LimpModeHor","triggerOnInit":true,"triggerOnChange":true,"provideOutput":false,"outputs":0,"x":560,"y":3960,"wires":[]},{"id":"f832b815ebc83cc7","type":"set-shared-state","z":"5a9ed8a4a215d867","state":"aec2e1d3093df16d","name":"LimpModeVert","triggerOnInit":true,"triggerOnChange":true,"provideOutput":false,"outputs":0,"x":560,"y":4060,"wires":[]},{"id":"f9ee400d0b6f7e3e","type":"set-shared-state","z":"5a9ed8a4a215d867","state":"dc65d6fbaddad817","name":"LimpModeFocus","triggerOnInit":true,"triggerOnChange":true,"provideOutput":false,"outputs":0,"x":570,"y":4160,"wires":[]},{"id":"aa6ffb90ce29780d","type":"bit-sixteen","z":"5a9ed8a4a215d867","name":"","x":400,"y":1700,"wires":[["20e8c6b9b0f7d3f3"],["862d1968be8e8d73"],["06f0fcdac47802b7"],["a3b498147b426600"],["fea50f425cd8750d"],["07210aa81c66758b"],["6e6b61c8a8facb04","7e2b613e6fd5525b"],["8f332c06045ea414"],["cd936d416d61afdb"],["ea6b1706fe10604d"],["b1979e5f402a47a9"],["6c3ac5a59fdad103"],[],[],[],[]]},{"id":"6fa9c87b5fbf2bac","type":"comment","z":"8d86b2dca3baefc2","name":"System variables","info":"","x":140,"y":80,"wires":[]},{"id":"3e232b2f0a137111","type":"function","z":"8d86b2dca3baefc2","name":"get Physical_input","func":"\nreturn {payload: global.get(\"Physical_input\")};","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":330,"y":400,"wires":[["e776f440585d8cea"]]},{"id":"6f7532e300cf8f56","type":"function","z":"8d86b2dca3baefc2","name":"get Physical_output","func":"\nreturn {payload: global.get(\"Physical_output\")};","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":330,"y":800,"wires":[["38fb98f5e99031ad"]]},{"id":"ba26879509f8b5e2","type":"link in","z":"8d86b2dca3baefc2","name":"link in Update CIO's","links":["7cd2e5ef86e859af","27d26613bdad3b04","44b8dc19b6482151","563d453f73e56d1e"],"x":175,"y":600,"wires":[["3e232b2f0a137111","6f7532e300cf8f56"]]},{"id":"0c56c3483ce4adf4","type":"ui_led","z":"8d86b2dca3baefc2","order":1,"group":"64bd2ca22f54aaef","width":0,"height":0,"label":"Puls_Vert_A","labelPlacement":"left","labelAlignment":"left","colorForValue":[{"color":"#008000","value":"false","valueType":"bool"},{"color":"#90ee90","value":"true","valueType":"bool"}],"allowColorForValueInMessage":false,"shape":"circle","showGlow":true,"name":"Puls_Vert_A","x":790,"y":120,"wires":[]},{"id":"64aabd751fb26fea","type":"ui_led","z":"8d86b2dca3baefc2","order":2,"group":"64bd2ca22f54aaef","width":0,"height":0,"label":"Puls_Vert_B","labelPlacement":"left","labelAlignment":"left","colorForValue":[{"color":"#008000","value":"false","valueType":"bool"},{"color":"#90ee90","value":"true","valueType":"bool"}],"allowColorForValueInMessage":false,"shape":"circle","showGlow":true,"name":"Puls_Vert_B","x":790,"y":160,"wires":[]},{"id":"1011625ce610550c","type":"ui_led","z":"8d86b2dca3baefc2","order":3,"group":"64bd2ca22f54aaef","width":0,"height":0,"label":"Puls_Hor_A","labelPlacement":"left","labelAlignment":"left","colorForValue":[{"color":"#008000","value":"false","valueType":"bool"},{"color":"#90ee90","value":"true","valueType":"bool"}],"allowColorForValueInMessage":false,"shape":"circle","showGlow":true,"name":"Puls_Hor_A","x":790,"y":200,"wires":[]},{"id":"55c01e4038579ba4","type":"ui_led","z":"8d86b2dca3baefc2","order":4,"group":"64bd2ca22f54aaef","width":0,"height":0,"label":"Puls_Hor_B","labelPlacement":"left","labelAlignment":"left","colorForValue":[{"color":"#008000","value":"false","valueType":"bool"},{"color":"#90ee90","value":"true","valueType":"bool"}],"allowColorForValueInMessage":false,"shape":"circle","showGlow":true,"name":"Puls_Hor_B","x":790,"y":240,"wires":[]},{"id":"201d5e2f9b37484a","type":"ui_led","z":"8d86b2dca3baefc2","order":5,"group":"64bd2ca22f54aaef","width":0,"height":0,"label":"Focus_Pos_In","labelPlacement":"left","labelAlignment":"left","colorForValue":[{"color":"#ffff00","value":"false","valueType":"bool"},{"color":"#808080","value":"true","valueType":"bool"}],"allowColorForValueInMessage":false,"shape":"circle","showGlow":true,"name":"Focus_Pos_In","x":800,"y":280,"wires":[]},{"id":"f8c959841a1afb05","type":"ui_led","z":"8d86b2dca3baefc2","order":6,"group":"64bd2ca22f54aaef","width":0,"height":0,"label":"Focus_Pos_Out","labelPlacement":"left","labelAlignment":"left","colorForValue":[{"color":"#ffff00","value":"false","valueType":"bool"},{"color":"#808080","value":"true","valueType":"bool"}],"allowColorForValueInMessage":false,"shape":"circle","showGlow":true,"name":"Focus_Pos_Out","x":800,"y":320,"wires":[]},{"id":"f31e65c89971f0c1","type":"ui_led","z":"8d86b2dca3baefc2","order":7,"group":"64bd2ca22f54aaef","width":0,"height":0,"label":"High_Temp_In_Drum","labelPlacement":"left","labelAlignment":"left","colorForValue":[{"color":"#808080","value":"true","valueType":"bool"},{"color":"#ff0000","value":"false","valueType":"bool"}],"allowColorForValueInMessage":false,"shape":"circle","showGlow":true,"name":"High_Temp_In_Drum","x":820,"y":360,"wires":[]},{"id":"cdd2b6b7f1b02a1a","type":"ui_led","z":"8d86b2dca3baefc2","order":8,"group":"64bd2ca22f54aaef","width":0,"height":0,"label":"Ignite_Button","labelPlacement":"left","labelAlignment":"left","colorForValue":[{"color":"#808080","value":"false","valueType":"bool"},{"color":"#008000","value":"true","valueType":"bool"}],"allowColorForValueInMessage":false,"shape":"circle","showGlow":true,"name":"Ignite_Button","x":790,"y":400,"wires":[]},{"id":"d33e8ebbafab9132","type":"ui_led","z":"8d86b2dca3baefc2","order":9,"group":"64bd2ca22f54aaef","width":0,"height":0,"label":"Joystick_Left","labelPlacement":"left","labelAlignment":"left","colorForValue":[{"color":"#808080","value":"false","valueType":"bool"},{"color":"#008000","value":"true","valueType":"bool"}],"allowColorForValueInMessage":false,"shape":"circle","showGlow":true,"name":"Joystick_Left","x":790,"y":440,"wires":[]},{"id":"4b4534e935d21ffb","type":"ui_led","z":"8d86b2dca3baefc2","order":10,"group":"64bd2ca22f54aaef","width":0,"height":0,"label":"Joystick_Down","labelPlacement":"left","labelAlignment":"left","colorForValue":[{"color":"#808080","value":"false","valueType":"bool"},{"color":"#008000","value":"true","valueType":"bool"}],"allowColorForValueInMessage":false,"shape":"circle","showGlow":true,"name":"Joystick_Down","x":800,"y":480,"wires":[]},{"id":"f30f8390ec450a12","type":"ui_led","z":"8d86b2dca3baefc2","order":11,"group":"64bd2ca22f54aaef","width":0,"height":0,"label":"Joystick_Right","labelPlacement":"left","labelAlignment":"left","colorForValue":[{"color":"#808080","value":"false","valueType":"bool"},{"color":"#008000","value":"true","valueType":"bool"}],"allowColorForValueInMessage":false,"shape":"circle","showGlow":true,"name":"Joystick_Right","x":800,"y":520,"wires":[]},{"id":"45655514fc5cfd0e","type":"ui_led","z":"8d86b2dca3baefc2","order":12,"group":"64bd2ca22f54aaef","width":0,"height":0,"label":"Joystick_Up","labelPlacement":"left","labelAlignment":"left","colorForValue":[{"color":"#808080","value":"false","valueType":"bool"},{"color":"#008000","value":"true","valueType":"bool"}],"allowColorForValueInMessage":false,"shape":"circle","showGlow":true,"name":"Joystick_Up","x":790,"y":560,"wires":[]},{"id":"2f0cf515fba906c7","type":"ui_led","z":"8d86b2dca3baefc2","order":1,"group":"de26d54e2520959c","width":0,"height":0,"label":"Direction_Hor","labelPlacement":"left","labelAlignment":"left","colorForValue":[{"color":"#808080","value":"false","valueType":"bool"},{"color":"#008000","value":"true","valueType":"bool"}],"allowColorForValueInMessage":false,"shape":"circle","showGlow":true,"name":"Direction_Hor","x":800,"y":640,"wires":[]},{"id":"e368fa56a9e6e572","type":"ui_led","z":"8d86b2dca3baefc2","order":1,"group":"de26d54e2520959c","width":0,"height":0,"label":"Direction_Vert","labelPlacement":"left","labelAlignment":"left","colorForValue":[{"color":"#808080","value":"false","valueType":"bool"},{"color":"#008000","value":"true","valueType":"bool"}],"allowColorForValueInMessage":false,"shape":"circle","showGlow":true,"name":"Direction_Vert","x":800,"y":720,"wires":[]},{"id":"198e49ec1c6102c1","type":"ui_led","z":"8d86b2dca3baefc2","order":1,"group":"de26d54e2520959c","width":0,"height":0,"label":"PWM_out_Hor","labelPlacement":"left","labelAlignment":"left","colorForValue":[{"color":"#808080","value":"false","valueType":"bool"},{"color":"#008000","value":"true","valueType":"bool"}],"allowColorForValueInMessage":false,"shape":"circle","showGlow":true,"name":"PWM_out_Hor","x":800,"y":680,"wires":[]},{"id":"221949e1b03a9849","type":"ui_led","z":"8d86b2dca3baefc2","order":1,"group":"de26d54e2520959c","width":0,"height":0,"label":"PWM_out_Vert","labelPlacement":"left","labelAlignment":"left","colorForValue":[{"color":"#808080","value":"false","valueType":"bool"},{"color":"#008000","value":"true","valueType":"bool"}],"allowColorForValueInMessage":false,"shape":"circle","showGlow":true,"name":"PWM_out_Vert","x":800,"y":760,"wires":[]},{"id":"c61a332a9ef6c179","type":"ui_led","z":"8d86b2dca3baefc2","order":1,"group":"de26d54e2520959c","width":0,"height":0,"label":"Focus_Neg","labelPlacement":"left","labelAlignment":"left","colorForValue":[{"color":"#808080","value":"false","valueType":"bool"},{"color":"#008000","value":"true","valueType":"bool"}],"allowColorForValueInMessage":false,"shape":"circle","showGlow":true,"name":"Focus_Neg","x":790,"y":800,"wires":[]},{"id":"e505d2521462e481","type":"ui_led","z":"8d86b2dca3baefc2","order":1,"group":"de26d54e2520959c","width":0,"height":0,"label":"Focus_Pos","labelPlacement":"left","labelAlignment":"left","colorForValue":[{"color":"#808080","value":"false","valueType":"bool"},{"color":"#008000","value":"true","valueType":"bool"}],"allowColorForValueInMessage":false,"shape":"circle","showGlow":true,"name":"Focus_Pos","x":790,"y":840,"wires":[]},{"id":"3b022ff53f2a272d","type":"ui_led","z":"8d86b2dca3baefc2","order":1,"group":"de26d54e2520959c","width":0,"height":0,"label":"Ignitor","labelPlacement":"left","labelAlignment":"left","colorForValue":[{"color":"#808080","value":"false","valueType":"bool"},{"color":"#008000","value":"true","valueType":"bool"}],"allowColorForValueInMessage":false,"shape":"circle","showGlow":true,"name":"Ignitor","x":770,"y":880,"wires":[]},{"id":"2ae2251c1f2316f2","type":"ui_led","z":"8d86b2dca3baefc2","order":1,"group":"de26d54e2520959c","width":0,"height":0,"label":"Light_On","labelPlacement":"left","labelAlignment":"left","colorForValue":[{"color":"#575757","value":"false","valueType":"bool"},{"color":"#008000","value":"true","valueType":"bool"}],"allowColorForValueInMessage":false,"shape":"circle","showGlow":true,"name":"Light_On","x":780,"y":920,"wires":[]},{"id":"e776f440585d8cea","type":"bit-sixteen","z":"8d86b2dca3baefc2","name":"","x":520,"y":400,"wires":[["0c56c3483ce4adf4"],["64aabd751fb26fea"],["1011625ce610550c"],["55c01e4038579ba4"],["201d5e2f9b37484a"],["f8c959841a1afb05"],["f31e65c89971f0c1"],["cdd2b6b7f1b02a1a"],["d33e8ebbafab9132"],["4b4534e935d21ffb"],["f30f8390ec450a12"],["45655514fc5cfd0e"],[],[],[],[]]},{"id":"38fb98f5e99031ad","type":"bit-sixteen","z":"8d86b2dca3baefc2","name":"","x":520,"y":800,"wires":[["2f0cf515fba906c7"],["198e49ec1c6102c1"],["e368fa56a9e6e572"],["221949e1b03a9849"],["c61a332a9ef6c179"],["e505d2521462e481"],["3b022ff53f2a272d"],["2ae2251c1f2316f2"],[],[],[],[],[],[],[],[]]},{"id":"f61834e206c64319","type":"function","z":"e0cce675d65f673b","name":"Parse functions","func":"let cmd = msg.payload.cmd;\nlet respons = {};\n\n\nif (cmd === \"FocusPlussMD\") {\n    respons[\"myFocusInput\"] = 1;\n}\nif (cmd === \"FocusPlussMU\") {\n    respons[\"myFocusInput\"] = 0;\n}\nif (cmd === \"FocusMinusMD\") {\n    // respons[\"myFocusInput\"] = (~1 + 1) & 0xFFFF;\n    respons[\"myFocusInput\"] = -1;\n}\nif (cmd === \"FocusMinusMU\") {\n    respons[\"myFocusInput\"] = 0;\n}\nif (cmd === \"UMD\") {\n    respons[\"myVertInput\"] = (Math.round(flow.get(\"Vert_Speed\") * 0x7FFF / 100));\n}\nif (cmd === \"UMU\") {\n    respons[\"myVertInput\"] = 0;\n}\nif (cmd === \"DMD\") {\n    // respons[\"myVertInput\"] = ((~(Math.round((flow.get(\"Vert_Speed\") * 0x7FFF / 100)))+1) & 0xFFFF);\n    respons[\"myVertInput\"] = -(Math.round((flow.get(\"Vert_Speed\") * 0x7FFF / 100)));\n}\nif (cmd === \"DMU\") {\n    respons[\"myVertInput\"] = 0;\n}\nif (cmd === \"RMD\") {\n    respons[\"myHorInput\"] = (Math.round(flow.get(\"Hor_Speed\") * 0x7FFF / 100));\n}\nif (cmd === \"RMU\") {\n    respons[\"myHorInput\"] = 0;\n}\nif (cmd === \"LMD\") {\n    respons[\"myHorInput\"] = -(Math.round((flow.get(\"Hor_Speed\") * 0x7FFF / 100)));\n}\nif (cmd === \"LMU\") {\n    respons[\"myHorInput\"] = 0;\n}\nlet LampMU = false;\nif (cmd === \"LampMU\") {\n    LampMU = true;\n}\n\nnode.status({ fill: \"green\", shape: \"ring\", text: \"Respons: \" + JSON.stringify(respons) });\n\nreturn [\n    {payload: respons, topic: \"R5\"},\n    {payload: LampMU}\n];\n","outputs":2,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":560,"y":140,"wires":[["1d56fdac314ee716"],["c8a857defa470a36"]]},{"id":"6a6c6c8af6b72611","type":"comment","z":"e0cce675d65f673b","name":"R5 Test Panel","info":"","x":130,"y":80,"wires":[]},{"id":"b520c274b873026e","type":"link in","z":"e0cce675d65f673b","name":"R5 Test Panel","links":["a5d4aef0364d53ac"],"x":195,"y":140,"wires":[["bdcafff146c890f1"]]},{"id":"1d56fdac314ee716","type":"link out","z":"e0cce675d65f673b","name":"link out R5 Control","mode":"link","links":["767f8aaf1be33f76"],"x":695,"y":120,"wires":[]},{"id":"a8d62afa2fa5918d","type":"inject","z":"e0cce675d65f673b","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":true,"onceDelay":0.1,"topic":"","payload":"50","payloadType":"num","x":230,"y":260,"wires":[["81853ced1901082e","cce353c1bae9b198"]]},{"id":"2d17b97449b355a1","type":"change","z":"e0cce675d65f673b","name":"","rules":[{"t":"set","p":"Hor_Speed","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":690,"y":240,"wires":[[]]},{"id":"d5e5f94992bd98ad","type":"change","z":"e0cce675d65f673b","name":"","rules":[{"t":"set","p":"Vert_Speed","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":680,"y":300,"wires":[[]]},{"id":"c8a857defa470a36","type":"subflow:9e702f4d4b057300","z":"e0cce675d65f673b","name":"","x":760,"y":160,"wires":[]},{"id":"81853ced1901082e","type":"ui_slider","z":"e0cce675d65f673b","name":"","label":"Horizontal Speed","tooltip":"","group":"3c410cd6cbd2d8fc","order":4,"width":0,"height":0,"passthru":true,"outs":"end","topic":"topic","topicType":"msg","min":"1","max":"100","step":1,"className":"","x":470,"y":240,"wires":[["2d17b97449b355a1"]]},{"id":"cce353c1bae9b198","type":"ui_slider","z":"e0cce675d65f673b","name":"","label":"Vertical Speed","tooltip":"","group":"3c410cd6cbd2d8fc","order":5,"width":0,"height":0,"passthru":true,"outs":"end","topic":"topic","topicType":"msg","min":"1","max":"100","step":1,"className":"","x":460,"y":300,"wires":[["d5e5f94992bd98ad"]]},{"id":"bdcafff146c890f1","type":"ui_svg_graphics","z":"e0cce675d65f673b","group":"3c410cd6cbd2d8fc","order":3,"width":0,"height":0,"svgString":"<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?>\n<svg viewBox=\"0 0 362.84 362.84\" height=\"362.84\" width=\"362.84\" xml:space=\"preserve\" id=\"svg2\" version=\"1.1\" preserveAspectRatio=\"xMidYMid meet\" sodipodi:docname=\"R5.svg\" inkscape:version=\"1.2.1 (9c6d41e410, 2022-07-14)\" xmlns:inkscape=\"http://www.inkscape.org/namespaces/inkscape\" xmlns:sodipodi=\"http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:svg=\"http://www.w3.org/2000/svg\" xmlns:rdf=\"http://www.w3.org/1999/02/22-rdf-syntax-ns#\" xmlns:cc=\"http://creativecommons.org/ns#\" xmlns:dc=\"http://purl.org/dc/elements/1.1/\">\n  <sodipodi:namedview id=\"namedview82\" pagecolor=\"#ffffff\" bordercolor=\"#666666\" borderopacity=\"1.0\" inkscape:showpageshadow=\"2\" inkscape:pageopacity=\"0.0\" inkscape:pagecheckerboard=\"0\" inkscape:deskcolor=\"#d1d1d1\" showgrid=\"false\" inkscape:zoom=\"2.2434131\" inkscape:cx=\"71.097026\" inkscape:cy=\"181.42\" inkscape:window-width=\"3840\" inkscape:window-height=\"2081\" inkscape:window-x=\"3831\" inkscape:window-y=\"-9\" inkscape:window-maximized=\"1\" inkscape:current-layer=\"layer1\" />\n  <metadata id=\"metadata8\">\n    <rdf:RDF>\n      <cc:Work rdf:about=\"\">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type rdf:resource=\"http://purl.org/dc/dcmitype/StillImage\" />\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <defs id=\"defs6\">\n    <clipPath id=\"clipPath124\" clipPathUnits=\"userSpaceOnUse\">\n      <path id=\"path122\" d=\"M 0,272.13 H 272.13 V 0 H 0 Z\" />\n    </clipPath>\n    <clipPath clipPathUnits=\"userSpaceOnUse\" id=\"clipPath517\">\n      <g id=\"g521\" transform=\"matrix(0.75000002,0,0,-0.75000002,-22.373,232.50211)\">\n        <path id=\"path519\" d=\"M 0,9.071e-6 H 362.83999 V 362.84 H 0 Z\" style=\"stroke-width:1.33333\" />\n      </g>\n    </clipPath>\n    <clipPath clipPathUnits=\"userSpaceOnUse\" id=\"clipPath523\">\n      <g id=\"g527\" transform=\"matrix(0.75000002,0,0,-0.75000002,-64.0391,232.50111)\">\n        <path id=\"path525\" d=\"M 0,9.071e-6 H 362.83999 V 362.84 H 0 Z\" style=\"stroke-width:1.33333\" />\n      </g>\n    </clipPath>\n    <clipPath clipPathUnits=\"userSpaceOnUse\" id=\"clipPath529\">\n      <g id=\"g533\" transform=\"matrix(0.75000002,0,0,-0.75000002,-44.6475,108.24521)\">\n        <path id=\"path531\" d=\"M 0,9.071e-6 H 362.83999 V 362.84 H 0 Z\" style=\"stroke-width:1.33333\" />\n      </g>\n    </clipPath>\n    <clipPath clipPathUnits=\"userSpaceOnUse\" id=\"clipPath535\">\n      <g id=\"g539\" transform=\"matrix(0.75000002,0,0,-0.75000002,-21.5547,91.42201)\">\n        <path id=\"path537\" d=\"M 0,9.071e-6 H 362.83999 V 362.84 H 0 Z\" style=\"stroke-width:1.33333\" />\n      </g>\n    </clipPath>\n    <clipPath clipPathUnits=\"userSpaceOnUse\" id=\"clipPath541\">\n      <g id=\"g545\" transform=\"matrix(0.75000002,0,0,-0.75000002,-21.5547,91.42201)\">\n        <path id=\"path543\" d=\"M 0,9.071e-6 H 362.83999 V 362.84 H 0 Z\" style=\"stroke-width:1.33333\" />\n      </g>\n    </clipPath>\n    <clipPath clipPathUnits=\"userSpaceOnUse\" id=\"clipPath547\">\n      <g id=\"g551\" transform=\"matrix(0.75000002,0,0,-0.75000002,-234.3145,108.24521)\">\n        <path id=\"path549\" d=\"M 0,9.071e-6 H 362.83999 V 362.84 H 0 Z\" style=\"stroke-width:1.33333\" />\n      </g>\n    </clipPath>\n    <clipPath clipPathUnits=\"userSpaceOnUse\" id=\"clipPath553\">\n      <g id=\"g557\" transform=\"matrix(0.75000002,0,0,-0.75000002,-211.2217,91.42201)\">\n        <path id=\"path555\" d=\"M 0,9.071e-6 H 362.83999 V 362.84 H 0 Z\" style=\"stroke-width:1.33333\" />\n      </g>\n    </clipPath>\n    <clipPath clipPathUnits=\"userSpaceOnUse\" id=\"clipPath559\">\n      <g id=\"g563\" transform=\"matrix(0.75000002,0,0,-0.75000002,-211.2217,91.42201)\">\n        <path id=\"path561\" d=\"M 0,9.071e-6 H 362.83999 V 362.84 H 0 Z\" style=\"stroke-width:1.33333\" />\n      </g>\n    </clipPath>\n    <clipPath clipPathUnits=\"userSpaceOnUse\" id=\"clipPath565\">\n      <g id=\"g569\" transform=\"matrix(0.75000002,0,0,-0.75000002,-178.6494,50.578707)\">\n        <path id=\"path567\" d=\"M 0,9.071e-6 H 362.83999 V 362.84 H 0 Z\" style=\"stroke-width:1.33333\" />\n      </g>\n    </clipPath>\n    <clipPath clipPathUnits=\"userSpaceOnUse\" id=\"clipPath571\">\n      <g id=\"g575\" transform=\"matrix(0.75000002,0,0,-0.75000002,-155.5566,33.755507)\">\n        <path id=\"path573\" d=\"M 0,9.071e-6 H 362.83999 V 362.84 H 0 Z\" style=\"stroke-width:1.33333\" />\n      </g>\n    </clipPath>\n    <clipPath clipPathUnits=\"userSpaceOnUse\" id=\"clipPath577\">\n      <g id=\"g581\" transform=\"matrix(0.75000002,0,0,-0.75000002,-155.5566,33.755507)\">\n        <path id=\"path579\" d=\"M 0,9.071e-6 H 362.83999 V 362.84 H 0 Z\" style=\"stroke-width:1.33333\" />\n      </g>\n    </clipPath>\n    <clipPath clipPathUnits=\"userSpaceOnUse\" id=\"clipPath583\">\n      <g id=\"g587\" transform=\"matrix(0.75000002,0,0,-0.75000002,-227.8135,165.95031)\">\n        <path id=\"path585\" d=\"M 0,9.071e-6 H 362.83999 V 362.84 H 0 Z\" style=\"stroke-width:1.33333\" />\n      </g>\n    </clipPath>\n    <clipPath clipPathUnits=\"userSpaceOnUse\" id=\"clipPath589\">\n      <g id=\"g593\" transform=\"matrix(0.75000002,0,0,-0.75000002,-250.9062,182.77361)\">\n        <path id=\"path591\" d=\"M 0,9.071e-6 H 362.83999 V 362.84 H 0 Z\" style=\"stroke-width:1.33333\" />\n      </g>\n    </clipPath>\n    <clipPath clipPathUnits=\"userSpaceOnUse\" id=\"clipPath595\">\n      <g id=\"g599\" transform=\"matrix(0.75000002,0,0,-0.75000002,-250.9062,182.77361)\">\n        <path id=\"path597\" d=\"M 0,9.071e-6 H 362.83999 V 362.84 H 0 Z\" style=\"stroke-width:1.33333\" />\n      </g>\n    </clipPath>\n    <clipPath clipPathUnits=\"userSpaceOnUse\" id=\"clipPath601\">\n      <g id=\"g605\" transform=\"matrix(0.75000002,0,0,-0.75000002,-38.1465,165.95031)\">\n        <path id=\"path603\" d=\"M 0,9.071e-6 H 362.83999 V 362.84 H 0 Z\" style=\"stroke-width:1.33333\" />\n      </g>\n    </clipPath>\n    <clipPath clipPathUnits=\"userSpaceOnUse\" id=\"clipPath607\">\n      <g id=\"g611\" transform=\"matrix(0.75000002,0,0,-0.75000002,-61.2393,182.77361)\">\n        <path id=\"path609\" d=\"M 0,9.071e-6 H 362.83999 V 362.84 H 0 Z\" style=\"stroke-width:1.33333\" />\n      </g>\n    </clipPath>\n    <clipPath clipPathUnits=\"userSpaceOnUse\" id=\"clipPath613\">\n      <g id=\"g617\" transform=\"matrix(0.75000002,0,0,-0.75000002,-61.2393,182.77361)\">\n        <path id=\"path615\" d=\"M 0,9.071e-6 H 362.83999 V 362.84 H 0 Z\" style=\"stroke-width:1.33333\" />\n      </g>\n    </clipPath>\n    <clipPath clipPathUnits=\"userSpaceOnUse\" id=\"clipPath619\">\n      <g id=\"g623\" transform=\"matrix(0.75000002,0,0,-0.75000002,-95.812502,32.948807)\">\n        <path id=\"path621\" d=\"M 0,9.071e-6 H 362.83999 V 362.84 H 0 Z\" style=\"stroke-width:1.33333\" />\n      </g>\n    </clipPath>\n    <clipPath clipPathUnits=\"userSpaceOnUse\" id=\"clipPath625\">\n      <g id=\"g629\" transform=\"matrix(0.75000002,0,0,-0.75000002,-118.9053,49.772106)\">\n        <path id=\"path627\" d=\"M 0,9.071e-6 H 362.83999 V 362.84 H 0 Z\" style=\"stroke-width:1.33333\" />\n      </g>\n    </clipPath>\n    <clipPath clipPathUnits=\"userSpaceOnUse\" id=\"clipPath631\">\n      <g id=\"g635\" transform=\"matrix(0.75000002,0,0,-0.75000002,-118.9053,49.772106)\">\n        <path id=\"path633\" d=\"M 0,9.071e-6 H 362.83999 V 362.84 H 0 Z\" style=\"stroke-width:1.33333\" />\n      </g>\n    </clipPath>\n  </defs>\n  <g inkscape:groupmode=\"layer\" id=\"layer1\" inkscape:label=\"Layer 1\">\n    <path id=\"path12\" style=\"display:inline;fill:#2b2b2a;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-width:1.33333\" d=\"M 0,362.84 H 362.83999 V 9.071e-6 H 0 Z\" inkscape:label=\"PanelColor\" />\n    <path d=\"m 116.63948,168.57293 v -14.38176 l -28.763522,28.76352 28.763522,28.76352 V 197.33645 H 145.403 v -28.76352 z\" style=\"fill:#fffafa;stroke:#000000;stroke-width:0;stroke-dasharray:none;stroke-miterlimit:3.8;stroke-linejoin:round;stroke-linecap:round\" id=\"L\" inkscape:label=\"#L\" />\n    <path d=\"m 247.01146,168.29328 v -14.38176 l 28.76352,28.76352 -28.76352,28.76352 V 197.0568 h -28.76352 v -28.76352 z\" style=\"fill:#fffafa;stroke:#000000;stroke-width:0;stroke-dasharray:none;stroke-miterlimit:3.8;stroke-linejoin:round;stroke-linecap:round\" id=\"R\" inkscape:label=\"#R\" />\n    <path d=\"m 196.02209,236.28773 h 14.38176 l -28.76352,28.76352 -28.76352,-28.76352 h 14.38176 v -28.76352 h 28.76352 z\" style=\"fill:#fffafa;stroke:#000000;stroke-width:0;stroke-dasharray:none;stroke-miterlimit:3.8;stroke-linejoin:round;stroke-linecap:round\" id=\"D\" inkscape:label=\"#D\" />\n    <path d=\"m 196.02269,127.73324 h 14.38176 L 181.64093,98.969721 152.87741,127.73324 h 14.38176 v 28.76352 h 28.76352 z\" style=\"fill:#fffafa;stroke:#000000;stroke-width:0;stroke-dasharray:none;stroke-miterlimit:3.8;stroke-linejoin:round;stroke-linecap:round\" id=\"U\" inkscape:label=\"#U\" />\n    <g id=\"g669\" inkscape:label=\"Logo\"><text id=\"text16\" style=\"font-variant:normal;font-weight:500;font-stretch:normal;font-size:10.6667px;font-family:'Futura LT Pro Medium';-inkscape-font-specification:FuturaLTPro-Medium;writing-mode:lr-tb;fill:#ffffff;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-width:1.33333\" x=\"228.31573\" y=\"351.4552\">\n        <tspan id=\"tspan14\" y=\"351.4552\" x=\"228.31573 236.68906 242.44907 246.61867 254.27733 260.20801\" style=\"stroke-width:1.33333\">Norway</tspan>\n      </text>\n      <g clip-path=\"url(#clipPath124)\" id=\"g120\" transform=\"matrix(1.3333333,0,0,-1.3333333,0,362.84)\">\n        <g transform=\"translate(241.2861,24.2754)\" id=\"g126\">\n          <path id=\"path128\" style=\"fill:#ffffff;fill-opacity:1;fill-rule:nonzero;stroke:none\" d=\"m 0,0 c -0.82,0 -1.27,-0.499 -1.27,-1.461 0,-0.964 0.372,-1.514 1.27,-1.514 0.898,0 1.25,0.534 1.25,1.479 C 1.25,-0.55 0.82,0 0,0\" />\n        </g>\n        <g transform=\"translate(258.5137,24.5166)\" id=\"g130\">\n          <path id=\"path132\" style=\"fill:#ffffff;fill-opacity:1;fill-rule:nonzero;stroke:none\" d=\"m 0,0 h -1.27 v -2.598 c 0,-0.308 0.215,-0.532 0.665,-0.532 H 0 v -1.564 h -1.875 c -1.035,0 -1.758,0.618 -1.758,1.426 V 0 H -4.57 v 1.101 h 0.937 V 3.026 H -1.27 V 1.101 H 0 Z m -5.43,-0.843 v -3.756 h -2.343 v 3.171 c 0,0 0.195,1.117 -1.055,1.117 -1.251,0 -1.211,-1.117 -1.211,-1.117 v -3.171 h -2.364 V 3.25 h 2.364 V 0.292 c 0,0 0.684,1.031 2.266,1.031 2.421,0 2.343,-2.166 2.343,-2.166 m -8.282,-3.756 c 0,-1.421 -0.664,-2.348 -3.516,-2.348 -2.851,0 -3.105,1.306 -3.105,1.444 h 2.305 c 0,0 0.097,-0.309 0.82,-0.309 0.723,0 1.191,0.309 1.191,0.98 v 1.203 c 0,0 -0.234,-0.36 -0.683,-0.636 -0.449,-0.275 -0.86,-0.429 -1.426,-0.429 -0.566,0 -1.407,0.206 -1.935,0.825 -0.527,0.618 -0.78,1.186 -0.78,2.167 0,0.979 0.528,3.025 2.695,3.025 1.543,0 2.344,-1.135 2.344,-1.135 l -0.019,0.913 h 2.109 z m -8.341,6.525 h -2.363 v 1.495 h 2.363 z m 0,-6.525 h -2.363 V 1.1 h 2.363 z m -3.984,0 h -2.344 V 3.25 h 2.344 z m -2.779,-4.589 H 4.12 v 32.479 h -32.936 z\" />\n        </g>\n        <g transform=\"translate(189.8906,19.5918)\" id=\"g134\">\n          <path id=\"path136\" style=\"fill:#ffffff;fill-opacity:1;fill-rule:nonzero;stroke:none\" d=\"m 0,0 c -1.231,0 -2.565,0.285 -2.565,2.351 0,2.066 1.334,2.3 2.565,2.3 1.23,0 2.54,-0.335 2.54,-2.3 C 2.54,0.386 1.23,0 0,0 m 0,6.382 c -3.925,0 -6.132,-1.562 -6.132,-4.031 0,-2.468 2.258,-4.098 6.132,-4.098 3.874,0 6.054,1.747 6.054,4.098 0,2.352 -2.129,4.031 -6.054,4.031\" />\n        </g>\n        <g transform=\"translate(202.8916,22.3457)\" id=\"g138\">\n          <path id=\"path140\" style=\"fill:#ffffff;fill-opacity:1;fill-rule:nonzero;stroke:none\" d=\"m 0,0 h -2.335 v 1.746 l 2.283,0.008 C 0.607,1.754 1.18,1.713 1.18,0.874 1.18,0.033 0.63,0 0,0 m 4.616,1.26 c 0,1.612 -1.743,2.135 -3.95,2.135 h -6.489 v -7.634 h 3.463 v 2.711 h 2.026 L 1.204,-4.239 H 4.616 L 2.308,-0.84 c 0,0 2.308,0.487 2.308,2.1\" />\n        </g>\n        <g transform=\"translate(214.8643,23.7578)\" id=\"g142\">\n          <path id=\"path144\" style=\"fill:#ffffff;fill-opacity:1;fill-rule:nonzero;stroke:none\" d=\"m 0,0 3.438,-0.001 c 0,0 -0.05,0.906 -1.307,1.545 -1.258,0.638 -2.694,0.706 -3.668,0.706 -0.976,0 -2.464,-0.101 -3.464,-0.604 -1.001,-0.504 -1.411,-1.194 -1.411,-1.782 0,-0.588 0.23,-0.906 0.487,-1.192 0.257,-0.285 1.257,-0.69 1.667,-0.789 0.411,-0.102 2.468,-0.513 3.156,-0.655 1.183,-0.245 1.334,-0.386 1.334,-0.756 0,-0.369 0.015,-0.705 -1.437,-0.705 -1.423,0 -1.719,0.201 -1.719,0.822 h -3.642 c 0,0 0.129,-0.806 0.795,-1.377 0.667,-0.57 2.18,-1.108 4.31,-1.108 2.129,0 3.437,0.419 4.002,0.739 0.564,0.319 1.231,0.856 1.231,1.882 0,1.023 -0.718,1.393 -1.282,1.644 -0.564,0.252 -1.36,0.472 -2.437,0.656 -1.078,0.185 -2.034,0.381 -2.438,0.521 -0.469,0.162 -0.461,0.285 -0.461,0.453 0,0.433 0.037,0.621 1.309,0.621 C -0.342,0.62 0,0.437 0,0\" />\n        </g>\n        <g transform=\"translate(219.7236,25.7715)\" id=\"g146\">\n          <path id=\"path148\" style=\"fill:#ffffff;fill-opacity:1;fill-rule:nonzero;stroke:none\" d=\"M 0,0 H 9.261 V -1.662 H 3.54 V -2.955 H 8.389 V -4.567 H 3.54 V -6.012 H 9.491 V -7.665 H 0 Z\" />\n        </g>\n        <g transform=\"translate(175.001,25.7402)\" id=\"g150\">\n          <path id=\"path152\" style=\"fill:#ffffff;fill-opacity:1;fill-rule:nonzero;stroke:none\" d=\"M 0,0 H -3.283 V -7.634 H 0 v 4.482 L 4.311,-7.634 H 7.619 V 0 H 4.208 v -4.443 z\" />\n        </g>\n      </g>\n    </g><text id=\"text116-7-2-3\" style=\"font-style:normal;font-variant:normal;font-weight:bold;font-stretch:normal;font-size:10.6667px;font-family:Verdana;-inkscape-font-specification:'Verdana, Bold';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-east-asian:normal;writing-mode:lr-tb;fill:#ffffff;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-width:1.33333\" x=\"289.90399\" y=\"185.17491\" inkscape:label=\"textFocus\">\n      <tspan sodipodi:role=\"line\" id=\"tspan1098\">Focus</tspan>\n    </text><text id=\"text116-7-2\" style=\"font-style:normal;font-variant:normal;font-weight:bold;font-stretch:normal;font-size:10.6667px;font-family:Verdana;-inkscape-font-specification:'Verdana, Bold';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-east-asian:normal;writing-mode:lr-tb;fill:#ffffff;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-width:1.33333\" x=\"37.514637\" y=\"354.61224\" inkscape:label=\"textLamp\">\n      <tspan sodipodi:role=\"line\" id=\"tspan1096\">Lamp</tspan>\n    </text>\n    <text id=\"text116-7\" style=\"font-style:normal;font-variant:normal;font-weight:bold;font-stretch:normal;font-size:10.6667px;font-family:Verdana;-inkscape-font-specification:'Verdana, Bold';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-east-asian:normal;writing-mode:lr-tb;fill:#ffffff;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-width:1.33333\"\n      x=\"31.403107\" y=\"181.26718\" inkscape:label=\"textVS\">\n      <tspan sodipodi:role=\"line\" id=\"tspan1094\">Vertical</tspan>\n    </text><text id=\"text116-7-2\"\n      style=\"font-style:normal;font-variant:normal;font-weight:bold;font-stretch:normal;font-size:10.6667px;font-family:Verdana;-inkscape-font-specification:'Verdana, Bold';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-east-asian:normal;writing-mode:lr-tb;fill:#ffffff;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-width:1.33333\"\n      x=\"31.403107\" y=\"191.26718\" inkscape:label=\"textVS2\">\n      <tspan sodipodi:role=\"line\" id=\"tspan1094-2\">Speed</tspan>\n    </text>\n    <text id=\"text116\" style=\"font-style:normal;font-variant:normal;font-weight:bold;font-stretch:normal;font-size:10.6667px;font-family:Verdana;-inkscape-font-specification:'Verdana, Bold';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-east-asian:normal;writing-mode:lr-tb;fill:#ffffff;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-width:1.33333\" x=\"131.03603\" y=\"19.810144\" inkscape:label=\"textHS\">\n      <tspan sodipodi:role=\"line\" id=\"tspan1090\">Horizontal Speed</tspan>\n    </text>\n    <g id=\"Lamp\" inkscape:label=\"Lamp\">\n      <path id=\"path100\" style=\"fill:#ffffff;fill-opacity:1;fill-rule:nonzero;stroke:none\" d=\"M 0,0 C 0,-12.427 -10.072,-22.5 -22.5,-22.5 -34.926,-22.5 -45,-12.427 -45,0 -45,12.426 -34.926,22.5 -22.5,22.5 -10.072,22.5 0,12.426 0,0\" transform=\"matrix(1.3333333,0,0,-1.3333333,85.385465,310.00147)\" />\n      <path id=\"LampInd\" style=\"fill:none;stroke:#2b2b2a;stroke-width:2;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:10;stroke-dasharray:none;stroke-opacity:1\" d=\"M 0,0 C 0,10.586 8.582,19.167 19.165,19.167 29.75,19.167 38.332,10.586 38.332,0 38.332,-10.584 29.75,-19.165 19.165,-19.165 8.582,-19.165 0,-10.584 0,0 Z\" transform=\"matrix(1.3333333,0,0,-1.3333333,29.830666,310.0028)\" />\n    </g>\n    <g id=\"Vert_Speed_Pluss\" inkscape:label=\"Vert_Speed_Pluss\">\n      <path id=\"path88\" style=\"fill:#fefefe;fill-opacity:1;fill-rule:nonzero;stroke:none\" d=\"m 0,0 c 0,6.627 5.372,12 12,12 h 15.685 c 6.627,0 12,-5.373 12,-12 v -15.684 c 0,-6.628 -5.373,-12.001 -12,-12.001 H 12 c -6.628,0 -12,5.373 -12,12.001 z\" transform=\"matrix(1.3333333,0,0,-1.3333333,28.739599,121.89601)\" />\n      <path id=\"path92\" style=\"fill:none;stroke:#fefefe;stroke-width:1;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:10;stroke-dasharray:none;stroke-opacity:1\" d=\"m 0,0 c 0,6.627 5.372,12 12,12 h 15.685 c 6.627,0 12,-5.373 12,-12 v -15.684 c 0,-6.628 -5.373,-12.001 -12,-12.001 H 12 c -6.628,0 -12,5.373 -12,12.001 z\" transform=\"matrix(1.3333333,0,0,-1.3333333,28.739599,121.89601)\" />\n      <path id=\"path96\" style=\"fill:#2b2b2a;fill-opacity:1;fill-rule:nonzero;stroke:none\" d=\"m 0,0 h -6.508 v 7.852 h -6.318 L -3.416,17.96 6.326,7.835 -0.018,7.828 Z\" transform=\"matrix(1.3333333,0,0,-1.3333333,59.529999,144.32694)\" />\n    </g>\n    <g id=\"FocusPluss\" inkscape:label=\"FocusPluss\">\n      <path id=\"path1240\" style=\"fill:#fefefe;fill-opacity:1;fill-rule:nonzero;stroke:none\" d=\"m 0,0 c 0,6.627 5.372,12 12,12 h 15.685 c 6.627,0 12,-5.373 12,-12 v -15.684 c 0,-6.628 -5.373,-12.001 -12,-12.001 H 12 c -6.628,0 -12,5.373 -12,12.001 z\" inkscape:label=\"path180\" transform=\"matrix(1.3333333,0,0,-1.3333333,281.62893,121.89601)\" />\n      <path id=\"path80\" style=\"fill:none;stroke:#fefefe;stroke-width:1;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:10;stroke-dasharray:none;stroke-opacity:1\" d=\"m 0,0 c 0,6.627 5.372,12 12,12 h 15.685 c 6.627,0 12,-5.373 12,-12 v -15.684 c 0,-6.628 -5.373,-12.001 -12,-12.001 H 12 c -6.628,0 -12,5.373 -12,12.001 z\" transform=\"matrix(1.3333333,0,0,-1.3333333,281.62893,121.89601)\" />\n      <path id=\"path84\" style=\"fill:#2b2b2a;fill-opacity:1;fill-rule:nonzero;stroke:none\" d=\"m 0,0 h -6.508 v 7.852 h -6.318 L -3.416,17.96 6.326,7.835 -0.018,7.828 Z\" transform=\"matrix(1.3333333,0,0,-1.3333333,312.41933,144.32694)\" />\n    </g>\n    <g id=\"Hor_Speed_Pluss\" inkscape:label=\"Hor_Speed_Pluss\">\n      <path id=\"path821\" style=\"fill:#fefefe;fill-opacity:1;fill-rule:nonzero;stroke:none\" d=\"m 0,0 c 0,6.627 5.372,12 12,12 h 15.685 c 6.627,0 12,-5.373 12,-12 v -15.684 c 0,-6.628 -5.373,-12.001 -12,-12.001 H 12 c -6.628,0 -12,5.373 -12,12.001 z\" inkscape:label=\"path168\" transform=\"matrix(1.3333333,0,0,-1.3333333,207.40879,45.007341)\" />\n      <path id=\"path68\" style=\"fill:#ffffff;stroke:#fefefe;stroke-width:1;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:10;stroke-dasharray:none;stroke-opacity:1\" d=\"m 0,0 c 0,6.627 5.372,12 12,12 h 15.685 c 6.627,0 12,-5.373 12,-12 v -15.684 c 0,-6.628 -5.373,-12.001 -12,-12.001 H 12 c -6.628,0 -12,5.373 -12,12.001 z\" transform=\"matrix(1.3333333,0,0,-1.3333333,207.40879,45.007341)\" />\n      <path id=\"path72\" style=\"fill:#2b2b2a;fill-opacity:1;fill-rule:nonzero;stroke:none\" d=\"m 0,0 h -6.508 v 7.852 h -6.318 L -3.416,17.96 6.326,7.835 -0.018,7.828 Z\" transform=\"matrix(1.3333333,0,0,-1.3333333,238.19919,67.438274)\" />\n    </g>\n    <g id=\"FocusMinus\" inkscape:label=\"FocusMinus\">\n      <path id=\"path1248\" style=\"fill:#fefefe;fill-opacity:1;fill-rule:nonzero;stroke:none\" d=\"m 0,0 c 0,-6.627 -5.372,-12 -12,-12 h -15.685 c -6.627,0 -12,5.373 -12,12 v 15.684 c 0,6.628 5.373,12.001 12,12.001 H -12 c 6.628,0 12,-5.373 12,-12.001 z\" transform=\"matrix(1.3333333,0,0,-1.3333333,334.54159,243.69814)\" inkscape:label=\"path156\" />\n      <path id=\"path56\" style=\"fill:none;stroke:#fefefe;stroke-width:1;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:10;stroke-dasharray:none;stroke-opacity:1\" d=\"m 0,0 c 0,-6.627 -5.372,-12 -12,-12 h -15.685 c -6.627,0 -12,5.373 -12,12 v 15.684 c 0,6.628 5.373,12.001 12,12.001 H -12 c 6.628,0 12,-5.373 12,-12.001 z\" transform=\"matrix(1.3333333,0,0,-1.3333333,334.54159,243.69814)\" />\n      <path id=\"path60\" style=\"fill:#2b2b2a;fill-opacity:1;fill-rule:nonzero;stroke:none\" d=\"m 0,0 h 6.508 v -7.852 h 6.318 l -9.41,-10.108 -9.742,10.125 6.344,0.007 z\" transform=\"matrix(1.3333333,0,0,-1.3333333,303.75133,221.26707)\" />\n    </g>\n    <g id=\"Vert_Speed_Minus\" inkscape:label=\"Vert_Speed_Minus\">\n      <path id=\"path40\" style=\"fill:#fefefe;fill-opacity:1;fill-rule:nonzero;stroke:none\" d=\"m 0,0 c 0,-6.627 -5.372,-12 -12,-12 h -15.685 c -6.627,0 -12,5.373 -12,12 v 15.684 c 0,6.628 5.373,12.001 12,12.001 H -12 c 6.628,0 12,-5.373 12,-12.001 z\" transform=\"matrix(1.3333333,0,0,-1.3333333,81.652398,243.69814)\" />\n      <path id=\"path44\" style=\"fill:none;stroke:#fefefe;stroke-width:1;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:10;stroke-dasharray:none;stroke-opacity:1\" d=\"m 0,0 c 0,-6.627 -5.372,-12 -12,-12 h -15.685 c -6.627,0 -12,5.373 -12,12 v 15.684 c 0,6.628 5.373,12.001 12,12.001 H -12 c 6.628,0 12,-5.373 12,-12.001 z\" transform=\"matrix(1.3333333,0,0,-1.3333333,81.652398,243.69814)\" />\n      <path id=\"path48\" style=\"fill:#2b2b2a;fill-opacity:1;fill-rule:nonzero;stroke:none\" d=\"m 0,0 h 6.508 v -7.852 h 6.318 l -9.41,-10.108 -9.742,10.125 6.344,0.007 z\" transform=\"matrix(1.3333333,0,0,-1.3333333,50.861999,221.26707)\" />\n    </g>\n    <g id=\"Hor_Speed_Minus\" inkscape:label=\"Hor_Speed_Minus\">\n      <path id=\"path813\" style=\"fill:#fefefe;fill-opacity:1;fill-rule:nonzero;stroke:none\" d=\"m 0,0 c 0,-6.627 -5.372,-12 -12,-12 h -15.685 c -6.627,0 -12,5.373 -12,12 v 15.684 c 0,6.628 5.373,12.001 12,12.001 H -12 c 6.628,0 12,-5.373 12,-12.001 z\" inkscape:label=\"path132\" transform=\"matrix(1.3333333,0,0,-1.3333333,158.5404,66.362807)\" />\n      <path id=\"path32\" style=\"fill:none;stroke:#fefefe;stroke-width:1;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:10;stroke-dasharray:none;stroke-opacity:1\" d=\"m 0,0 c 0,-6.627 -5.372,-12 -12,-12 h -15.685 c -6.627,0 -12,5.373 -12,12 v 15.684 c 0,6.628 5.373,12.001 12,12.001 H -12 c 6.628,0 12,-5.373 12,-12.001 z\" transform=\"matrix(1.3333333,0,0,-1.3333333,158.5404,66.362807)\" />\n      <path id=\"path36\" style=\"fill:#2b2b2a;fill-opacity:1;fill-rule:nonzero;stroke:none\" d=\"m 0,0 h 6.508 v -7.852 h 6.318 l -9.41,-10.108 -9.742,10.125 6.344,0.007 z\" transform=\"matrix(1.3333333,0,0,-1.3333333,127.75,43.931741)\" />\n    </g>\n  </g>\n</svg>","clickableShapes":[{"targetId":"#FocusPluss","action":"mousedown","payload":"{\"command\":\"trigger_animation\",\"selector\":\"#FocusPlussMD\",\"action\":\"start\",\"cmd\":\"FocusPlussMD\"}","payloadType":"json","topic":""},{"targetId":"#FocusPluss","action":"mouseup","payload":"{\"command\":\"trigger_animation\",\"selector\":\"#FocusPlussMU\",\"action\":\"start\",\"cmd\":\"FocusPlussMU\"}","payloadType":"json","topic":""},{"targetId":"#FocusMinus","action":"mousedown","payload":"{\"command\":\"trigger_animation\",\"selector\":\"#FocusMinusMD\",\"action\":\"start\",\"cmd\":\"FocusMinusMD\"}","payloadType":"json","topic":""},{"targetId":"#FocusMinus","action":"mouseup","payload":"{\"command\":\"trigger_animation\",\"selector\":\"#FocusMinusMU\",\"action\":\"start\",\"cmd\":\"FocusMinusMU\"}","payloadType":"json","topic":""},{"targetId":"#Hor_Speed_Minus","action":"mousedown","payload":"{\"command\":\"trigger_animation\",\"selector\":\"#Hor_Speed_MinusMD\",\"action\":\"start\",\"cmd\":\"Hor_Speed_MinusMD\"}","payloadType":"json","topic":""},{"targetId":"#Hor_Speed_Minus","action":"mouseup","payload":"{\"command\":\"trigger_animation\",\"selector\":\"#Hor_Speed_MinusMU\",\"action\":\"start\",\"cmd\":\"Hor_Speed_MinussMU\"}","payloadType":"json","topic":""},{"targetId":"#Hor_Speed_Pluss","action":"mousedown","payload":"{\"command\":\"trigger_animation\",\"selector\":\"#Hor_Speed_PlussMD\",\"action\":\"start\",\"cmd\":\"Hor_Speed_PlussMD\"}","payloadType":"json","topic":""},{"targetId":"#Hor_Speed_Pluss","action":"mouseup","payload":"{\"command\":\"trigger_animation\",\"selector\":\"#Hor_Speed_PlussMU\",\"action\":\"start\",\"cmd\":\"Hor_Speed_PlussMU\"}","payloadType":"json","topic":""},{"targetId":"#Vert_Speed_Minus","action":"mousedown","payload":"{\"command\":\"trigger_animation\",\"selector\":\"#Vert_Speed_MinusMD\",\"action\":\"start\",\"cmd\":\"Vert_Speed_MinusMD\"}","payloadType":"json","topic":""},{"targetId":"#Vert_Speed_Minus","action":"mouseup","payload":"{\"command\":\"trigger_animation\",\"selector\":\"#Vert_Speed_MinusMU\",\"action\":\"start\",\"cmd\":\"Vert_Speed_MinusMU\"}","payloadType":"json","topic":""},{"targetId":"#Vert_Speed_Pluss","action":"mousedown","payload":"{\"command\":\"trigger_animation\",\"selector\":\"#Vert_Speed_PlussMD\",\"action\":\"start\",\"cmd\":\"Vert_Speed_PlussMD\"}","payloadType":"json","topic":""},{"targetId":"#Vert_Speed_Pluss","action":"mouseup","payload":"{\"command\":\"trigger_animation\",\"selector\":\"#Vert_Speed_PlussMU\",\"action\":\"start\",\"cmd\":\"Vert_Speed_PlussMU\"}","payloadType":"json","topic":""},{"targetId":"#U","action":"mousedown","payload":"{\"command\":\"trigger_animation\",\"selector\":\"#UMD\",\"action\":\"start\",\"cmd\":\"UMD\"}","payloadType":"json","topic":""},{"targetId":"#U","action":"mouseup","payload":"{\"command\":\"trigger_animation\",\"selector\":\"#UMU\",\"action\":\"start\",\"cmd\":\"UMU\"}","payloadType":"json","topic":""},{"targetId":"#D","action":"mousedown","payload":"{\"command\":\"trigger_animation\",\"selector\":\"#DMD\",\"action\":\"start\",\"cmd\":\"DMD\"}","payloadType":"json","topic":""},{"targetId":"#D","action":"mouseup","payload":"{\"command\":\"trigger_animation\",\"selector\":\"#DMU\",\"action\":\"start\",\"cmd\":\"DMU\"}","payloadType":"json","topic":""},{"targetId":"#L","action":"mousedown","payload":"{\"command\":\"trigger_animation\",\"selector\":\"#LMD\",\"action\":\"start\",\"cmd\":\"LMD\"}","payloadType":"json","topic":""},{"targetId":"#L","action":"mouseup","payload":"{\"command\":\"trigger_animation\",\"selector\":\"#LMU\",\"action\":\"start\",\"cmd\":\"LMU\"}","payloadType":"json","topic":""},{"targetId":"#R","action":"mousedown","payload":"{\"command\":\"trigger_animation\",\"selector\":\"#RMD\",\"action\":\"start\",\"cmd\":\"RMD\"}","payloadType":"json","topic":""},{"targetId":"#R","action":"mouseup","payload":"{\"command\":\"trigger_animation\",\"selector\":\"#RMU\",\"action\":\"start\",\"cmd\":\"RMU\"}","payloadType":"json","topic":""},{"targetId":"#Lamp","action":"click","payload":"{\"command\":\"trigger_animation\",\"selector\":\"#LampMU\",\"action\":\"start\",\"cmd\":\"LampMU\"}","payloadType":"json","topic":""}],"javascriptHandlers":[],"smilAnimations":[{"id":"FocusPlussMD","targetId":"FocusPluss","classValue":"","attributeName":"opacity","transformType":"rotate","fromValue":"1","toValue":".5","trigger":"msg","duration":"500","durationUnit":"ms","repeatCount":"1","end":"freeze","delay":"1","delayUnit":"s","custom":""},{"id":"FocusPlussMU","targetId":"FocusPluss","classValue":"","attributeName":"opacity","transformType":"rotate","fromValue":"0.5","toValue":"1","trigger":"msg","duration":"500","durationUnit":"ms","repeatCount":"1","end":"freeze","delay":"1","delayUnit":"s","custom":""},{"id":"FocusMinusMD","targetId":"FocusMinus","classValue":"","attributeName":"opacity","transformType":"rotate","fromValue":"1","toValue":".5","trigger":"msg","duration":"500","durationUnit":"ms","repeatCount":"1","end":"freeze","delay":"1","delayUnit":"s","custom":""},{"id":"FocusMinusMU","targetId":"FocusMinus","classValue":"","attributeName":"opacity","transformType":"rotate","fromValue":"0.5","toValue":"1","trigger":"msg","duration":"500","durationUnit":"ms","repeatCount":"1","end":"freeze","delay":"1","delayUnit":"s","custom":""},{"id":"Hor_Speed_MinusMD","targetId":"Hor_Speed_Minus","classValue":"","attributeName":"opacity","transformType":"rotate","fromValue":"1","toValue":".5","trigger":"msg","duration":"500","durationUnit":"ms","repeatCount":"1","end":"freeze","delay":"1","delayUnit":"s","custom":""},{"id":"Hor_Speed_MinusMU","targetId":"Hor_Speed_Minus","classValue":"","attributeName":"opacity","transformType":"rotate","fromValue":"0.5","toValue":"1","trigger":"msg","duration":"500","durationUnit":"ms","repeatCount":"1","end":"freeze","delay":"1","delayUnit":"s","custom":""},{"id":"Hor_Speed_PlussMD","targetId":"Hor_Speed_Pluss","classValue":"","attributeName":"opacity","transformType":"rotate","fromValue":"1","toValue":".5","trigger":"msg","duration":"500","durationUnit":"ms","repeatCount":"1","end":"freeze","delay":"1","delayUnit":"s","custom":""},{"id":"Hor_Speed_PlussMU","targetId":"Hor_Speed_Pluss","classValue":"","attributeName":"opacity","transformType":"rotate","fromValue":"0.5","toValue":"1","trigger":"msg","duration":"500","durationUnit":"ms","repeatCount":"1","end":"freeze","delay":"1","delayUnit":"s","custom":""},{"id":"Vert_Speed_MinusMD","targetId":"Vert_Speed_Minus","classValue":"","attributeName":"opacity","transformType":"rotate","fromValue":"1","toValue":".5","trigger":"msg","duration":"500","durationUnit":"ms","repeatCount":"1","end":"freeze","delay":"1","delayUnit":"s","custom":""},{"id":"Vert_Speed_MinusMU","targetId":"Vert_Speed_Minus","classValue":"","attributeName":"opacity","transformType":"rotate","fromValue":"0.5","toValue":"1","trigger":"msg","duration":"500","durationUnit":"ms","repeatCount":"1","end":"freeze","delay":"1","delayUnit":"s","custom":""},{"id":"Vert_Speed_PlussMD","targetId":"Vert_Speed_Pluss","classValue":"","attributeName":"opacity","transformType":"rotate","fromValue":"1","toValue":".5","trigger":"msg","duration":"500","durationUnit":"ms","repeatCount":"1","end":"freeze","delay":"1","delayUnit":"s","custom":""},{"id":"Vert_Speed_PlussMU","targetId":"Vert_Speed_Pluss","classValue":"","attributeName":"opacity","transformType":"rotate","fromValue":"0.5","toValue":"1","trigger":"msg","duration":"500","durationUnit":"ms","repeatCount":"1","end":"freeze","delay":"1","delayUnit":"s","custom":""},{"id":"UMD","targetId":"U","classValue":"","attributeName":"opacity","transformType":"rotate","fromValue":"1","toValue":".5","trigger":"msg","duration":"500","durationUnit":"ms","repeatCount":"1","end":"freeze","delay":"1","delayUnit":"s","custom":""},{"id":"UMU","targetId":"U","classValue":"","attributeName":"opacity","transformType":"rotate","fromValue":"0.5","toValue":"1","trigger":"msg","duration":"500","durationUnit":"ms","repeatCount":"1","end":"freeze","delay":"1","delayUnit":"s","custom":""},{"id":"DMD","targetId":"D","classValue":"","attributeName":"opacity","transformType":"rotate","fromValue":"1","toValue":".5","trigger":"msg","duration":"500","durationUnit":"ms","repeatCount":"1","end":"freeze","delay":"1","delayUnit":"s","custom":""},{"id":"DMU","targetId":"D","classValue":"","attributeName":"opacity","transformType":"rotate","fromValue":"0.5","toValue":"1","trigger":"msg","duration":"500","durationUnit":"ms","repeatCount":"1","end":"freeze","delay":"1","delayUnit":"s","custom":""},{"id":"LMD","targetId":"L","classValue":"","attributeName":"opacity","transformType":"rotate","fromValue":"1","toValue":".5","trigger":"msg","duration":"500","durationUnit":"ms","repeatCount":"1","end":"freeze","delay":"1","delayUnit":"s","custom":""},{"id":"LMU","targetId":"L","classValue":"","attributeName":"opacity","transformType":"rotate","fromValue":"0.5","toValue":"1","trigger":"msg","duration":"500","durationUnit":"ms","repeatCount":"1","end":"freeze","delay":"1","delayUnit":"s","custom":""},{"id":"RMD","targetId":"R","classValue":"","attributeName":"opacity","transformType":"rotate","fromValue":"1","toValue":".5","trigger":"msg","duration":"500","durationUnit":"ms","repeatCount":"1","end":"freeze","delay":"1","delayUnit":"s","custom":""},{"id":"RMU","targetId":"R","classValue":"","attributeName":"opacity","transformType":"rotate","fromValue":"0.5","toValue":"1","trigger":"msg","duration":"500","durationUnit":"ms","repeatCount":"1","end":"freeze","delay":"1","delayUnit":"s","custom":""},{"id":"LampMU","targetId":"Lamp","classValue":"","attributeName":"opacity","transformType":"rotate","fromValue":"0.5","toValue":"1","trigger":"msg","duration":"500","durationUnit":"ms","repeatCount":"1","end":"restore","delay":"1","delayUnit":"s","custom":""}],"bindings":[],"showCoordinates":false,"autoFormatAfterEdit":false,"showBrowserErrors":false,"showBrowserEvents":false,"enableJsDebugging":false,"sendMsgWhenLoaded":false,"noClickWhenDblClick":false,"outputField":"payload","editorUrl":"//drawsvg.org/drawsvg.html","directory":"","panning":"disabled","zooming":"disabled","panOnlyWhenZoomed":false,"doubleClickZoomEnabled":false,"mouseWheelZoomEnabled":false,"dblClickZoomPercentage":150,"cssString":"div.ui-svg svg{\n    color: var(--nr-dashboard-widgetColor);\n    fill: currentColor !important;\n}\ndiv.ui-svg path {\n    fill: inherit;\n}","name":"","x":360,"y":140,"wires":[["f61834e206c64319"]]},{"id":"46ea7e5b7248596b","type":"ui_media","z":"e0cce675d65f673b","group":"3c410cd6cbd2d8fc","name":"","width":"7","height":"3","order":2,"category":"Logo","file":"logo.png","layout":"center","showcontrols":false,"loop":false,"onstart":false,"scope":"local","tooltip":"","x":230,"y":380,"wires":[[]]},{"id":"03171602bbf5532c","type":"udp in","z":"b62bc327ee548edd","name":"R50 Telegram","iface":"","port":"2101","ipv":"udp4","multicast":"false","group":"","datatype":"utf8","x":130,"y":140,"wires":[["158147f3e2a52ba5"]]},{"id":"158147f3e2a52ba5","type":"function","z":"b62bc327ee548edd","name":"CRC OK?","func":"let myData = msg.payload;\nlet buff = Buffer.from(myData, \"utf-8\");\nlet len = myData.length;\nlet readCRC = 0;\nlet CS = 0;\n\nif(len>4) {\n\n    CS = buff[0];\n    for(let i=1;i<len-3;i++) {\n        CS ^= buff[i];\n    }\n\n    readCRC = parseInt(myData[len - 3] + myData[len - 2], 16);\n\n    // Only return any payload when CRC is OK\n    if(readCRC==CS) {\n        return msg;      \n    } \n}\n\n//return { payload: parseInt(readCRC, 16) }\n","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":300,"y":140,"wires":[["3fee1fe3c2955b80"]]},{"id":"3fee1fe3c2955b80","type":"function","z":"b62bc327ee548edd","name":"HexStr to Byte Array Payload","func":"let myData = msg.payload;\nlet len = myData.length;\n\nif ( len > 4) {\n    let myPayload = Buffer.allocUnsafe((len-3)/2);\n\n    let x=0;\n    for(let i=1;i<len-3;i+=2) {\n        myPayload[x++] = parseInt(myData[i] + myData[i+1], 16); \n    } \n\n    return {payload: myPayload}\n}\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":520,"y":140,"wires":[["c8de53264e029211","11cd94d3ecd36897"]]},{"id":"c8de53264e029211","type":"switch","z":"b62bc327ee548edd","name":"Splitt Message Types","property":"payload[0]","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"num"},{"t":"eq","v":"8","vt":"num"}],"checkall":"true","repair":false,"outputs":2,"x":200,"y":220,"wires":[["a1fc1e9ffddafe52"],["0f8bb0edd3a71dcc"]]},{"id":"0f8bb0edd3a71dcc","type":"buffer-parser","z":"b62bc327ee548edd","name":"parse Message 08","data":"payload","dataType":"msg","specification":"spec","specificationType":"ui","items":[{"type":"uint8","name":"Telegram","offset":0,"length":1,"offsetbit":0,"scale":"1","mask":""},{"type":"uint8","name":"panelID","offset":1,"length":1,"offsetbit":0,"scale":"1","mask":""},{"type":"uint8","name":"SL","offset":3,"length":1,"offsetbit":0,"scale":"1","mask":""},{"type":"int8","name":"horMotor","offset":4,"length":1,"offsetbit":0,"scale":"1","mask":""},{"type":"int8","name":"vertMotor","offset":5,"length":1,"offsetbit":0,"scale":"1","mask":""},{"type":"int8","name":"focusMotor","offset":6,"length":1,"offsetbit":0,"scale":"1","mask":""},{"type":"uint8","name":"command","offset":7,"length":1,"offsetbit":0,"scale":"1","mask":""}],"swap1":"","swap2":"","swap3":"","swap1Type":"swap","swap2Type":"swap","swap3Type":"swap","msgProperty":"payload","msgPropertyType":"str","resultType":"keyvalue","resultTypeType":"return","multipleResult":false,"fanOutMultipleResult":false,"setTopic":true,"outputs":1,"x":190,"y":520,"wires":[["49e23cc669daf6b3"]]},{"id":"49e23cc669daf6b3","type":"switch","z":"b62bc327ee548edd","name":"This SL?","property":"payload.SL","propertyType":"msg","rules":[{"t":"eq","v":"SL","vt":"global"}],"checkall":"true","repair":false,"outputs":1,"x":160,"y":600,"wires":[["dc4f6a7727915e05","cd4ecf2a91a30a6f"]]},{"id":"75c74c5f0f963751","type":"comment","z":"b62bc327ee548edd","name":"Telegram Handling","info":"","x":150,"y":80,"wires":[]},{"id":"dc4f6a7727915e05","type":"function","z":"b62bc327ee548edd","name":"Fan out","func":"// Signal that we have communication\nglobal.set(\"SLComDetected\", true);\n\n// Set HorInput Based on 20-100\nlet Index = msg.payload.horMotor + 15;\nlet myHorizLookup = global.get(\"myHorizLookupTable\"); \nglobal.set(\"HorInput\", Math.round(myHorizLookup.table[Index] * 0x7FFF / 100));\n\n// Set VertInput Based on 25-100\nlet Index2 = msg.payload.vertMotor + 15;\nlet myVertLookup = global.get(\"myVertLookupTable\"); \nglobal.set(\"VertInput\", Math.round(myVertLookup.table[Index2] * 0x7FFF / 100));\n\nglobal.set(\"focusInput\", msg.payload.focusMotor);\n\nreturn [\n    { payload: msg.payload.horMotor },\n    { payload: msg.payload.vertMotor },\n    { payload: msg.payload.focusMotor },\n    { payload: msg.payload.command }\n];","outputs":4,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":320,"y":600,"wires":[["bec64d2c42bd7c4d"],["8d9b91c0bf01ceeb"],["390bb74caae0984d"],["69b8262304296fb0","1677a2e94e2692a4"]]},{"id":"d2c4116b42cb9132","type":"udp out","z":"b62bc327ee548edd","name":"R50 Respons Telegram","addr":"192.168.1.255","iface":"","port":"2101","ipv":"udp4","outport":"2101","base64":false,"multicast":"broad","x":290,"y":920,"wires":[]},{"id":"bab2460c165744e8","type":"function","z":"b62bc327ee548edd","name":"Build Status Telegram 07","func":"function decimalToHex(d, padding) {\n\n    if (d < 0) {\n        if (padding == 2) {\n            d = 0xFF + d + 1;\n        } else if (padding == 4) {\n            d = 0xFFFF + d + 1;\n        }\n    }\n    \n    var hex = Number(d).toString(16).toUpperCase();\n    padding = typeof (padding) === \"undefined\" || padding === null ? padding = 2 : padding;\n\n    while (hex.length < padding) {\n        hex = \"0\" + hex;\n    }\n\n    return hex;\n}\n\nlet Telegram07 = String.fromCharCode(0x1B) + \"07\";\nTelegram07 += decimalToHex(global.get(\"SL\"),2);\nTelegram07 += \"0E\";\nTelegram07 += decimalToHex(Math.round(global.get(\"Horizontal_pos_act\")), 4);\nTelegram07 += decimalToHex(Math.round(global.get(\"Vertical_pos_act\")), 4);\nlet SLStatusByte = global.get(\"SLStatusByte\");\nif(msg.payload == 3) {\n    SLStatusByte |= 0x0001;\n    global.set(\"SLStatusByte\", SLStatusByte);\n} else if (msg.payload == 2) {\n    SLStatusByte &= 0xFFFE;\n    global.set(\"SLStatusByte\", SLStatusByte);\n}\nTelegram07 += decimalToHex(SLStatusByte, 4);\n\n// Calculate CRC\nlet buff = Buffer.from(Telegram07, \"utf-8\");\nlet CS = 0;\nCS = buff[0];\nfor (let i = 1; i < buff.length; i++) {\n    CS ^= buff[i];\n}\nTelegram07 += decimalToHex(CS, 2);\n\nTelegram07 += String.fromCharCode(0x0D);\n\nreturn { payload: Telegram07};","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":1010,"y":660,"wires":[["bb712e8654e0b63f"]]},{"id":"749ac33bb264c0a1","type":"link in","z":"b62bc327ee548edd","name":"link in R50 Respons Telegram","links":["bb712e8654e0b63f","419b164713df3506","b9d5f69a8e4c6a6a"],"x":125,"y":920,"wires":[["d2c4116b42cb9132"]]},{"id":"bb712e8654e0b63f","type":"link out","z":"b62bc327ee548edd","name":"link out Status Telegram 07","mode":"link","links":["749ac33bb264c0a1"],"x":1175,"y":660,"wires":[]},{"id":"46ba2a9e63b1dc9e","type":"function","z":"b62bc327ee548edd","name":"Build Ping ACK Telegram 02","func":"\nfunction decimalToHex(d, padding) {\n\n    if (d < 0) {\n        if (padding == 2) {\n            d = 0xFF + d + 1;\n        } else if (padding == 4) {\n            d = 0xFFFF + d + 1;\n        }\n    }\n    \n    var hex = Number(d).toString(16).toUpperCase();\n    padding = typeof (padding) === \"undefined\" || padding === null ? padding = 2 : padding;\n\n    while (hex.length < padding) {\n        hex = \"0\" + hex;\n    }\n\n    return hex;\n}\n\nlet src = 0;\nsrc = global.get(\"SL\");\nlet Telegram02 = String.fromCharCode(0x1B) + \"02\";\nTelegram02 += decimalToHex(src,2);\nTelegram02 += \"0E000100010001\";\n\n// Calculate CRC\nlet buff = Buffer.from(Telegram02, \"utf-8\");\nlet CS = 0;\nCS = buff[0];\nfor (let i = 1; i < buff.length; i++) {\n    CS ^= buff[i];\n}\nTelegram02 += decimalToHex(CS, 2);\n\nTelegram02 += String.fromCharCode(0x0D);\n\n// Don't answer own PING\nif(src != msg.payload.panelID) {\n    return { payload: Telegram02};\n}","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":440,"y":340,"wires":[["419b164713df3506"]]},{"id":"419b164713df3506","type":"link out","z":"b62bc327ee548edd","name":"link out Ping ACK Telegram 02","mode":"link","links":["749ac33bb264c0a1"],"x":615,"y":340,"wires":[]},{"id":"9f420845f8beb8c9","type":"comment","z":"b62bc327ee548edd","name":"Ping Telegram 01","info":"","x":180,"y":300,"wires":[]},{"id":"0f4d3d76c2612aa3","type":"comment","z":"b62bc327ee548edd","name":"Searchlight Command Telegram 08","info":"","x":240,"y":480,"wires":[]},{"id":"69b8262304296fb0","type":"change","z":"b62bc327ee548edd","name":"","rules":[{"t":"set","p":"Command","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":760,"y":660,"wires":[["bab2460c165744e8"]]},{"id":"cd4ecf2a91a30a6f","type":"trigger","z":"b62bc327ee548edd","name":"","op1":"1","op2":"0","op1type":"str","op2type":"num","duration":"275","extend":true,"overrideDelay":false,"units":"ms","reset":"","bytopic":"all","topic":"topic","outputs":2,"x":300,"y":660,"wires":[[],["bec64d2c42bd7c4d","390bb74caae0984d","8d9b91c0bf01ceeb","ec8f5a6b36c5263f"]]},{"id":"ec8f5a6b36c5263f","type":"function","z":"b62bc327ee548edd","name":"Time to Stop!","func":"global.set(\"HorInput\", 0);\nglobal.set(\"VertInput\", 0);\nglobal.set(\"focusInput\", 0);\n\nreturn msg;","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":490,"y":720,"wires":[["1677a2e94e2692a4"]]},{"id":"1677a2e94e2692a4","type":"link out","z":"b62bc327ee548edd","name":"link out R50 Message08","mode":"link","links":["767f8aaf1be33f76"],"x":675,"y":700,"wires":[]},{"id":"fd5901fde6c8a2f7","type":"comment","z":"b62bc327ee548edd","name":"Searchlight Response Telegram Handler","info":"","x":260,"y":860,"wires":[]},{"id":"17c51a9a101aa1a2","type":"inject","z":"b62bc327ee548edd","name":"","props":[{"p":"payload"},{"p":"delay","v":"100","vt":"num"}],"repeat":"15","crontab":"","once":true,"onceDelay":"15","topic":"","payload":"SL","payloadType":"global","x":170,"y":400,"wires":[["81ccaf875a91e32d"]]},{"id":"81ccaf875a91e32d","type":"function","z":"b62bc327ee548edd","name":"Get SL, return delay [ms]","func":"msg.delay = msg.payload*100;\n\n// Only if no Comunication\nif (!global.get(\"SLComDetected\")) {\n    return msg;\n}","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":390,"y":400,"wires":[["4c153c44f1bc3ca8"]]},{"id":"4c153c44f1bc3ca8","type":"delay","z":"b62bc327ee548edd","name":"Hold SL*100ms","pauseType":"delayv","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":620,"y":400,"wires":[["0b29b35bd4bde59b"]]},{"id":"0b29b35bd4bde59b","type":"function","z":"b62bc327ee548edd","name":"Build Ping Telegram 01","func":"\nfunction decimalToHex(d, padding) {\n\n    if (d < 0) {\n        if (padding == 2) {\n            d = 0xFF + d + 1;\n        } else if (padding == 4) {\n            d = 0xFFFF + d + 1;\n        }\n    }\n    \n    var hex = Number(d).toString(16).toUpperCase();\n    padding = typeof (padding) === \"undefined\" || padding === null ? padding = 2 : padding;\n\n    while (hex.length < padding) {\n        hex = \"0\" + hex;\n    }\n\n    return hex;\n}\n\nlet Telegram01 = String.fromCharCode(0x1B) + \"01\";\nTelegram01 += decimalToHex(global.get(\"SL\"),2);\nTelegram01 += \"02\";\n\n// Calculate CRC\nlet buff = Buffer.from(Telegram01, \"utf-8\");\nlet CS = 0;\nCS = buff[0];\nfor (let i = 1; i < buff.length; i++) {\n    CS ^= buff[i];\n}\nTelegram01 += decimalToHex(CS, 2);\n\nTelegram01 += String.fromCharCode(0x0D);\n\nreturn { payload: Telegram01};","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":850,"y":400,"wires":[["b9d5f69a8e4c6a6a"]]},{"id":"b9d5f69a8e4c6a6a","type":"link out","z":"b62bc327ee548edd","name":"link out Ping Telegram 01","mode":"link","links":["749ac33bb264c0a1"],"x":1015,"y":400,"wires":[]},{"id":"a1fc1e9ffddafe52","type":"buffer-parser","z":"b62bc327ee548edd","name":"parse Message 01","data":"payload","dataType":"msg","specification":"spec","specificationType":"ui","items":[{"type":"uint8","name":"Telegram","offset":0,"length":1,"offsetbit":0,"scale":"1","mask":""},{"type":"uint8","name":"panelID","offset":1,"length":1,"offsetbit":0,"scale":"1","mask":""}],"swap1":"","swap2":"","swap3":"","swap1Type":"swap","swap2Type":"swap","swap3Type":"swap","msgProperty":"payload","msgPropertyType":"str","resultType":"keyvalue","resultTypeType":"return","multipleResult":false,"fanOutMultipleResult":false,"setTopic":true,"outputs":1,"x":190,"y":340,"wires":[["46ba2a9e63b1dc9e"]]},{"id":"11cd94d3ecd36897","type":"link out","z":"b62bc327ee548edd","name":"link out kick Watchdog","mode":"link","links":["2eb517afeb6b1164"],"x":715,"y":140,"wires":[]},{"id":"12f530619614b81d","type":"link in","z":"b62bc327ee548edd","name":"link in External R50 Telegram 07 trigger","links":[],"x":795,"y":740,"wires":[["bab2460c165744e8"]]},{"id":"bec64d2c42bd7c4d","type":"ui_text","z":"b62bc327ee548edd","group":"6b1cfed8797c4903","order":2,"width":0,"height":0,"name":"","label":"Horizontal input","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":"","color":"#000000","x":740,"y":540,"wires":[]},{"id":"8d9b91c0bf01ceeb","type":"ui_text","z":"b62bc327ee548edd","group":"6b1cfed8797c4903","order":3,"width":0,"height":0,"name":"","label":"Vertical input","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":"","color":"#000000","x":730,"y":580,"wires":[]},{"id":"390bb74caae0984d","type":"ui_text","z":"b62bc327ee548edd","group":"6b1cfed8797c4903","order":4,"width":0,"height":0,"name":"","label":"Focus input","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":"","color":"#000000","x":730,"y":620,"wires":[]},{"id":"069f9ec1a6066ed8","type":"change","z":"fa7a87223fda8b8c","name":"","rules":[{"t":"set","p":"SL","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":590,"y":160,"wires":[[]]},{"id":"ae4c2ca4250520b4","type":"comment","z":"fa7a87223fda8b8c","name":"Dashboard","info":"","x":120,"y":80,"wires":[]},{"id":"8178a1121c7bed51","type":"change","z":"fa7a87223fda8b8c","name":"","rules":[{"t":"set","p":"Horizontal_pos_act","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":730,"y":300,"wires":[[]]},{"id":"f9fb6c9bf5387810","type":"change","z":"fa7a87223fda8b8c","name":"","rules":[{"t":"set","p":"Vertical_pos_act","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":720,"y":440,"wires":[[]]},{"id":"9e7b9e946c08513c","type":"function","z":"fa7a87223fda8b8c","name":"Fan Out SLStatus","func":"return [\n    { payload: msg.payload.lamp },\n    { payload: msg.payload.endStopHorCW },\n    { payload: msg.payload.endStopHorCCW },\n    { payload: msg.payload.endStopVertCW },\n    { payload: msg.payload.endStopVertCCW },\n    { payload: msg.payload.endStopFocusOut },\n    { payload: msg.payload.endStopFocusIn },\n    { payload: msg.payload.alarm }\n];","outputs":8,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":190,"y":880,"wires":[["66fcea71361a607c"],["cb13a70e05e31b55"],["ac51647c475fa2f4"],["993d03d796527ea9"],["6a574ab715fb94ae"],["5764b1735c3c6670"],["d646b75b9eb6273c"],["63e50429d23d14cc"]]},{"id":"8e56abeee1b1cef2","type":"link in","z":"fa7a87223fda8b8c","name":"link in SLStatus","links":["1708345cfa16ac41","c1be60ae7c469091"],"x":185,"y":740,"wires":[["9e7b9e946c08513c"]]},{"id":"12d76684ecf6258a","type":"change","z":"fa7a87223fda8b8c","name":"","rules":[{"t":"set","p":"SLStatus.lamp","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":790,"y":680,"wires":[["218316296539bef0"]]},{"id":"d93f2e0a10fc423d","type":"change","z":"fa7a87223fda8b8c","name":"","rules":[{"t":"set","p":"SLStatus.endStopHorCW","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":760,"y":740,"wires":[["218316296539bef0","4864b1e173ac5784"]]},{"id":"c2040a1c5606f756","type":"change","z":"fa7a87223fda8b8c","name":"","rules":[{"t":"set","p":"SLStatus.endStopHorCCW","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":750,"y":800,"wires":[["218316296539bef0","aa8d2b917e8b481b"]]},{"id":"df35ba9b5e056ff1","type":"change","z":"fa7a87223fda8b8c","name":"","rules":[{"t":"set","p":"SLStatus.endStopVertCW","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":750,"y":860,"wires":[["218316296539bef0"]]},{"id":"9a83b1d765536980","type":"change","z":"fa7a87223fda8b8c","name":"","rules":[{"t":"set","p":"SLStatus.endStopVertCCW","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":750,"y":920,"wires":[["218316296539bef0"]]},{"id":"90bc277fcd61d84b","type":"change","z":"fa7a87223fda8b8c","name":"","rules":[{"t":"set","p":"SLStatus.alarm","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":790,"y":1100,"wires":[["218316296539bef0"]]},{"id":"8a6adc66db1815f6","type":"change","z":"fa7a87223fda8b8c","name":"","rules":[{"t":"set","p":"SLStatus.endStopFocusIn","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":750,"y":1040,"wires":[["218316296539bef0"]]},{"id":"4921623d36b8c7b3","type":"change","z":"fa7a87223fda8b8c","name":"","rules":[{"t":"set","p":"SLStatus.endStopFocusOut","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":750,"y":980,"wires":[["218316296539bef0"]]},{"id":"218316296539bef0","type":"function","z":"fa7a87223fda8b8c","name":"get SLStatus","func":"\nreturn {payload: global.get(\"SLStatus\")};","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1150,"y":920,"wires":[["b6600b57ceeaa82e"]]},{"id":"9becc703c572e48c","type":"link in","z":"fa7a87223fda8b8c","name":"SetLampStatusR50","links":["f57f69c58e0dc911"],"x":185,"y":680,"wires":[["66fcea71361a607c"]]},{"id":"32885a0d66a25f9d","type":"link in","z":"fa7a87223fda8b8c","name":"link in Horiz Pos","links":["87669cf6fd50b51a","fc99014ac21b4d0e","ad0aea1f48711b41","8bd81e5165f0d363"],"x":165,"y":360,"wires":[["e4ce7fcb01f176ba"]]},{"id":"34d601203a1fb526","type":"link in","z":"fa7a87223fda8b8c","name":"link in Vert Pos","links":["f12c4028b51c3a4d","f178dad56127a194","6a702c1d534c56e3","8c68bf380d06683d"],"x":165,"y":500,"wires":[["dba57c605e1456b2"]]},{"id":"cebd4becfa46b69d","type":"link in","z":"fa7a87223fda8b8c","name":"link in PortC.SW1","links":["b0ec6f71353fb619"],"x":185,"y":220,"wires":[["02ba47b610d41c05"]]},{"id":"cdd7535f2824dd5a","type":"switch","z":"fa7a87223fda8b8c","name":"","property":"systemType","propertyType":"global","rules":[{"t":"eq","v":"R50","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":1070,"y":680,"wires":[["ac7092c47458a5bc"]]},{"id":"ac7092c47458a5bc","type":"function","z":"fa7a87223fda8b8c","name":"set 180","func":"\nreturn { payload: 180 / global.get(\"myHorizRatio\") };","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1220,"y":680,"wires":[["bff88ad848deea61"]]},{"id":"bff88ad848deea61","type":"link out","z":"fa7a87223fda8b8c","name":"link out HorizontalCounter","mode":"link","links":["2c4836bd0a117105"],"x":1225,"y":740,"wires":[]},{"id":"932a2f263ac68a64","type":"switch","z":"fa7a87223fda8b8c","name":"","property":"systemType","propertyType":"global","rules":[{"t":"eq","v":"R50","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":1070,"y":800,"wires":[["81314f46f072c23f"]]},{"id":"81314f46f072c23f","type":"function","z":"fa7a87223fda8b8c","name":"set 180","func":"\nreturn { payload: -180 / global.get(\"myHorizRatio\") };","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1220,"y":800,"wires":[["bff88ad848deea61"]]},{"id":"177517455ef3602f","type":"switch","z":"fa7a87223fda8b8c","name":"","property":"payload","propertyType":"msg","rules":[{"t":"true"}],"checkall":"true","repair":false,"outputs":1,"x":1070,"y":640,"wires":[["cdd7535f2824dd5a"]]},{"id":"aa8d2b917e8b481b","type":"switch","z":"fa7a87223fda8b8c","name":"","property":"payload","propertyType":"msg","rules":[{"t":"true"}],"checkall":"true","repair":false,"outputs":1,"x":1070,"y":720,"wires":[["0ff21d0c5f540419"]]},{"id":"4864b1e173ac5784","type":"rbe","z":"fa7a87223fda8b8c","name":"","func":"rbe","gap":"","start":"","inout":"out","septopics":true,"property":"payload","topi":"topic","x":1070,"y":600,"wires":[["177517455ef3602f"]]},{"id":"0ff21d0c5f540419","type":"rbe","z":"fa7a87223fda8b8c","name":"","func":"rbe","gap":"","start":"","inout":"out","septopics":true,"property":"payload","topi":"topic","x":1070,"y":760,"wires":[["932a2f263ac68a64"]]},{"id":"02e402d9f2986e7f","type":"trigger","z":"fa7a87223fda8b8c","name":"","op1":"","op2":"","op1type":"nul","op2type":"payl","duration":"10","extend":true,"overrideDelay":false,"units":"s","reset":"","bytopic":"all","topic":"topic","outputs":1,"x":670,"y":340,"wires":[["493509f736222cae","b3624840355ea483"]]},{"id":"7ab47ff20d2d76d6","type":"trigger","z":"fa7a87223fda8b8c","name":"","op1":"","op2":"","op1type":"nul","op2type":"payl","duration":"10","extend":true,"overrideDelay":false,"units":"s","reset":"","bytopic":"all","topic":"topic","outputs":1,"x":670,"y":480,"wires":[["ab56e5c93b520d6f","b3624840355ea483"]]},{"id":"7ce74c123172da2c","type":"exec","z":"fa7a87223fda8b8c","command":"sudo fake-hwclock save force","addpay":false,"append":"","useSpawn":"","timer":"","winHide":false,"name":"","x":1150,"y":400,"wires":[[],[],[]]},{"id":"b3624840355ea483","type":"trigger","z":"fa7a87223fda8b8c","name":"","op1":"","op2":"","op1type":"nul","op2type":"payl","duration":"1","extend":true,"overrideDelay":false,"units":"s","reset":"","bytopic":"all","topic":"topic","outputs":1,"x":840,"y":400,"wires":[["7ce74c123172da2c","1ba4b07550648650"]]},{"id":"a3fbf7a3ba4ff7f7","type":"link out","z":"fa7a87223fda8b8c","name":"link out 62","mode":"link","links":["2f8b2234c48a3d18"],"x":1145,"y":280,"wires":[]},{"id":"1763121be6a28939","type":"function","z":"fa7a87223fda8b8c","name":"false","func":"\nreturn {payload: false };","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":570,"y":400,"wires":[["a3fbf7a3ba4ff7f7"]]},{"id":"1ba4b07550648650","type":"function","z":"fa7a87223fda8b8c","name":"true","func":"\nreturn {payload: true };","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1070,"y":340,"wires":[["a3fbf7a3ba4ff7f7"]]},{"id":"66fcea71361a607c","type":"ui_switch","z":"fa7a87223fda8b8c","name":"","label":"LAMP","tooltip":"","group":"6b1cfed8797c4903","order":4,"width":0,"height":0,"passthru":true,"decouple":"false","topic":"topic","topicType":"msg","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","animate":false,"className":"","x":430,"y":680,"wires":[["12d76684ecf6258a"]]},{"id":"cb13a70e05e31b55","type":"ui_switch","z":"fa7a87223fda8b8c","name":"","label":"EndStopHorCW","tooltip":"","group":"6b1cfed8797c4903","order":7,"width":0,"height":0,"passthru":true,"decouple":"false","topic":"topic","topicType":"msg","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","animate":false,"className":"","x":460,"y":740,"wires":[["d93f2e0a10fc423d"]]},{"id":"ac51647c475fa2f4","type":"ui_switch","z":"fa7a87223fda8b8c","name":"","label":"EndStopHorCCW","tooltip":"","group":"6b1cfed8797c4903","order":8,"width":0,"height":0,"passthru":true,"decouple":"false","topic":"topic","topicType":"msg","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","animate":false,"className":"","x":470,"y":800,"wires":[["c2040a1c5606f756"]]},{"id":"993d03d796527ea9","type":"ui_switch","z":"fa7a87223fda8b8c","name":"","label":"EndStopVertCW","tooltip":"","group":"6b1cfed8797c4903","order":9,"width":0,"height":0,"passthru":true,"decouple":"false","topic":"topic","topicType":"msg","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","animate":false,"className":"","x":460,"y":860,"wires":[["df35ba9b5e056ff1"]]},{"id":"6a574ab715fb94ae","type":"ui_switch","z":"fa7a87223fda8b8c","name":"","label":"EndStopVertCCW","tooltip":"","group":"6b1cfed8797c4903","order":10,"width":0,"height":0,"passthru":true,"decouple":"false","topic":"topic","topicType":"msg","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","animate":false,"className":"","x":470,"y":920,"wires":[["9a83b1d765536980"]]},{"id":"5764b1735c3c6670","type":"ui_switch","z":"fa7a87223fda8b8c","name":"","label":"EndStopFocusOut","tooltip":"","group":"6b1cfed8797c4903","order":11,"width":0,"height":0,"passthru":true,"decouple":"false","topic":"topic","topicType":"msg","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","animate":false,"className":"","x":470,"y":980,"wires":[["4921623d36b8c7b3"]]},{"id":"d646b75b9eb6273c","type":"ui_switch","z":"fa7a87223fda8b8c","name":"","label":"EndStopFocusIn","tooltip":"","group":"6b1cfed8797c4903","order":12,"width":0,"height":0,"passthru":true,"decouple":"false","topic":"topic","topicType":"msg","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","animate":false,"className":"","x":470,"y":1040,"wires":[["8a6adc66db1815f6"]]},{"id":"63e50429d23d14cc","type":"ui_switch","z":"fa7a87223fda8b8c","name":"","label":"Alarm","tooltip":"","group":"6b1cfed8797c4903","order":13,"width":0,"height":0,"passthru":true,"decouple":"false","topic":"topic","topicType":"msg","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","animate":false,"className":"","x":430,"y":1100,"wires":[["90bc277fcd61d84b"]]},{"id":"02ba47b610d41c05","type":"ui_numeric","z":"fa7a87223fda8b8c","name":"","label":"SL ID","tooltip":"","group":"6b1cfed8797c4903","order":1,"width":0,"height":0,"wrap":true,"passthru":true,"topic":"topic","topicType":"msg","format":"{{value}}","min":"1","max":"9","step":1,"className":"","x":290,"y":160,"wires":[["069f9ec1a6066ed8","9d9419ad7597a058"]]},{"id":"e4ce7fcb01f176ba","type":"ui_numeric","z":"fa7a87223fda8b8c","name":"","label":"Horizontal Heading","tooltip":"","group":"5ff70e0f4e7a65cc","order":2,"width":0,"height":0,"wrap":false,"passthru":true,"topic":"topic","topicType":"msg","format":"{{value}}","min":"-360","max":"360","step":"0.1","className":"","x":410,"y":300,"wires":[["8178a1121c7bed51","02e402d9f2986e7f","1763121be6a28939"]]},{"id":"dba57c605e1456b2","type":"ui_numeric","z":"fa7a87223fda8b8c","name":"","label":"Vertical Heading","tooltip":"","group":"5ff70e0f4e7a65cc","order":6,"width":0,"height":0,"wrap":false,"passthru":true,"topic":"topic","topicType":"msg","format":"{{value}}","min":"-90","max":"90","step":"0.1","className":"","x":400,"y":440,"wires":[["f9fb6c9bf5387810","7ab47ff20d2d76d6","1763121be6a28939"]]},{"id":"b6600b57ceeaa82e","type":"bit-encode","z":"fa7a87223fda8b8c","name":"","bits":"58278f54b45791c3","x":1170,"y":980,"wires":[[]]},{"id":"7523fa5aedc4e43f","type":"get-shared-state","z":"fa7a87223fda8b8c","state":"f5321b6a2e1b0a9d","name":"SL","triggerOnInit":true,"triggerOnChange":true,"x":150,"y":160,"wires":[["02ba47b610d41c05"]]},{"id":"3934df5c3b2946ca","type":"get-shared-state","z":"fa7a87223fda8b8c","state":"8e3f0b650d98dc09","name":"Horizontal_pos_act","triggerOnInit":true,"triggerOnChange":true,"x":190,"y":300,"wires":[["e4ce7fcb01f176ba"]]},{"id":"242b12b872e2941d","type":"get-shared-state","z":"fa7a87223fda8b8c","state":"3c9cf2f8bc9a8795","name":"Vertical_pos_act","triggerOnInit":true,"triggerOnChange":true,"x":180,"y":440,"wires":[["dba57c605e1456b2"]]},{"id":"9d9419ad7597a058","type":"set-shared-state","z":"fa7a87223fda8b8c","state":"f5321b6a2e1b0a9d","name":"SL","triggerOnInit":true,"triggerOnChange":true,"provideOutput":false,"outputs":0,"x":570,"y":200,"wires":[]},{"id":"493509f736222cae","type":"set-shared-state","z":"fa7a87223fda8b8c","state":"8e3f0b650d98dc09","name":"Horizontal_pos_act","triggerOnInit":true,"triggerOnChange":true,"provideOutput":false,"outputs":0,"x":870,"y":340,"wires":[]},{"id":"ab56e5c93b520d6f","type":"set-shared-state","z":"fa7a87223fda8b8c","state":"3c9cf2f8bc9a8795","name":"Vertical_pos_act","triggerOnInit":true,"triggerOnChange":true,"provideOutput":false,"outputs":0,"x":860,"y":480,"wires":[]},{"id":"2338bd6e9f381166","type":"exec","z":"e9b76b6839013e00","command":"sudo reboot","addpay":false,"append":"","useSpawn":"","timer":"","winHide":false,"name":"","x":750,"y":440,"wires":[[],[],[]]},{"id":"162611818f3dac97","type":"switch","z":"e9b76b6839013e00","name":"OK ?","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"OK","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":590,"y":440,"wires":[["2338bd6e9f381166"]]},{"id":"35b1781c0160cc02","type":"inject","z":"e9b76b6839013e00","name":"init","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":true,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":130,"y":80,"wires":[["e099df4c892c2948"]]},{"id":"b9fd66cd57f148c2","type":"link in","z":"e9b76b6839013e00","name":"link in SL Change","links":["b0ec6f71353fb619"],"x":665,"y":100,"wires":[["8720d0528c81277c"]]},{"id":"8720d0528c81277c","type":"function","z":"e9b76b6839013e00","name":"Change ip_address","func":"\nreturn { topic: \"ip_address\", payload: \"192.168.1.1\" + msg.payload + \"/24\" };","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":810,"y":100,"wires":[["26167263ed2e7cec"]]},{"id":"26167263ed2e7cec","type":"delay","z":"e9b76b6839013e00","name":"","pauseType":"delay","timeout":"300","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":1010,"y":100,"wires":[["a8bf7604ccab45f4","7ce7f59770bb3747"]]},{"id":"a8bf7604ccab45f4","type":"delay","z":"e9b76b6839013e00","name":"","pauseType":"delay","timeout":"3","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":1180,"y":160,"wires":[["b65740a7394c826a"]]},{"id":"b65740a7394c826a","type":"exec","z":"e9b76b6839013e00","command":"sudo reboot","addpay":false,"append":"","useSpawn":"","timer":"","winHide":false,"name":"","x":1350,"y":160,"wires":[[],[],[]]},{"id":"40f2c56e24879dc9","type":"link in","z":"e9b76b6839013e00","name":"link in WATCHDOG-RESET","links":["845b9bcd371de79d"],"x":585,"y":500,"wires":[["2338bd6e9f381166"]]},{"id":"6b339afa4f6ae527","type":"change","z":"e9b76b6839013e00","name":"Timestamp","rules":[{"t":"set","p":"payload","pt":"msg","to":"","tot":"date"}],"action":"","property":"","from":"","to":"","reg":false,"x":250,"y":1140,"wires":[["dcd9dcae78b79396"]]},{"id":"8827c6c6f7a8db9f","type":"function","z":"e9b76b6839013e00","name":"sudo date -s \"yyyy-mm-dd hh:mm:ss\"","func":"let date = new Date(msg.payload);\nlet myDate = (date.getFullYear() + '-' + ('00' + (date.getMonth()+1)).slice(-2) + '-' + ('00' + date.getDate()).slice(-2) + ' ' + ('00' + date.getHours()).slice(-2) + ':' + ('00' + date.getMinutes()).slice(-2) + ':' + ('00' + date.getSeconds()).slice(-2));\nlet setDate = 'sudo date -s \"' + myDate + '\"';\nreturn {payload: setDate};","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":670,"y":1140,"wires":[["62f2440760f515cc"]]},{"id":"62f2440760f515cc","type":"change","z":"e9b76b6839013e00","name":"","rules":[{"t":"set","p":"DateAndTime","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":960,"y":1140,"wires":[[]]},{"id":"989980f814e02303","type":"exec","z":"e9b76b6839013e00","command":"","addpay":"payload","append":"","useSpawn":"false","timer":"","winHide":false,"name":"","x":630,"y":1200,"wires":[[],[],[]]},{"id":"dc911f47c6909c68","type":"exec","z":"e9b76b6839013e00","command":"sudo fake-hwclock save force","addpay":false,"append":"","useSpawn":"","timer":"","winHide":false,"name":"","x":830,"y":1280,"wires":[[],[],[]]},{"id":"a3891154e18c9c1e","type":"delay","z":"e9b76b6839013e00","name":"","pauseType":"delay","timeout":"2","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":600,"y":1280,"wires":[["dc911f47c6909c68"]]},{"id":"c3112610b5ec359c","type":"ui_button","z":"e9b76b6839013e00","name":"reboot","group":"d75f2020636d5da4","order":5,"width":"3","height":"1","passthru":false,"label":"Reboot","tooltip":"","color":"","bgcolor":"","className":"","icon":"","payload":"By pressing OK the device will be rebooted. If settings are wrong this may cause the device to be unreachable","payloadType":"str","topic":"","topicType":"str","x":270,"y":440,"wires":[["6620bdeafa6bf490"]]},{"id":"9654448c6a56e3e1","type":"ui_button","z":"e9b76b6839013e00","name":"setDateAndTime","group":"d0de459772c6d1d1","order":5,"width":"6","height":"1","passthru":false,"label":"Set Date and Time","tooltip":"","color":"","bgcolor":"","className":"","icon":"watch_later","payload":"DateAndTime","payloadType":"flow","topic":"","topicType":"str","x":450,"y":1200,"wires":[["989980f814e02303","a3891154e18c9c1e"]]},{"id":"dcd9dcae78b79396","type":"ui_text_input","z":"e9b76b6839013e00","name":"timedate","label":"Time and date","tooltip":"System is without a RTC clock, here you can adjust clock if needed for debug purpose... ","group":"d0de459772c6d1d1","order":2,"width":0,"height":0,"passthru":true,"mode":"datetime-local","delay":"0","topic":"time_date","sendOnBlur":true,"className":"","topicType":"str","x":420,"y":1140,"wires":[["8827c6c6f7a8db9f"]]},{"id":"6620bdeafa6bf490","type":"ui_toast","z":"e9b76b6839013e00","position":"dialog","displayTime":"3","highlight":"","outputs":1,"ok":"OK","cancel":"Cancel","topic":"ATTENTION","name":"","x":430,"y":440,"wires":[["162611818f3dac97"]]},{"id":"9dcae8f4cb18c315","type":"ui_ui_control","z":"e9b76b6839013e00","name":"","events":"all","x":80,"y":1140,"wires":[["6b339afa4f6ae527"]]},{"id":"1b8d8b533ccbdbc2","type":"exec","z":"e9b76b6839013e00","command":"nmcli -g ip4.address connection show 'Wired connection 1'","addpay":false,"append":"","useSpawn":"","timer":"","winHide":false,"name":"","x":430,"y":220,"wires":[["de2a3c3cb84293b4"],[],[]]},{"id":"de2a3c3cb84293b4","type":"ui_text","z":"e9b76b6839013e00","group":"d75f2020636d5da4","order":1,"width":0,"height":0,"name":"","label":"IP","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#000000","x":750,"y":220,"wires":[]},{"id":"f47fea6fed756d74","type":"exec","z":"e9b76b6839013e00","command":"nmcli -g ip4.gateway connection show 'Wired connection 1'","addpay":false,"append":"","useSpawn":"","timer":"","winHide":false,"name":"","x":440,"y":280,"wires":[["09eb10f777abdabf"],[],[]]},{"id":"09eb10f777abdabf","type":"ui_text","z":"e9b76b6839013e00","group":"d75f2020636d5da4","order":2,"width":0,"height":0,"name":"","label":"Gateway","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#000000","x":760,"y":280,"wires":[]},{"id":"ab8db9119b28e477","type":"exec","z":"e9b76b6839013e00","command":"nmcli -g ip4.dns connection show 'Wired connection 1'","addpay":false,"append":"","useSpawn":"","timer":"","winHide":false,"name":"","x":420,"y":340,"wires":[["b7bec496d55d76cb"],[],[]]},{"id":"b7bec496d55d76cb","type":"ui_text","z":"e9b76b6839013e00","group":"d75f2020636d5da4","order":3,"width":0,"height":0,"name":"","label":"dns","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":16,"color":"#000000","x":750,"y":340,"wires":[]},{"id":"97d657d4bcaaee60","type":"exec","z":"e9b76b6839013e00","command":"sudo ","addpay":"payload","append":"","useSpawn":"","timer":"","winHide":false,"oldrc":false,"name":"","x":1370,"y":100,"wires":[["df881f4fabea98a9"],[],[]]},{"id":"7ce7f59770bb3747","type":"function","z":"e9b76b6839013e00","name":"send commands","func":"let cmd = \"nmcli c mod 'Wired connection 1' ipv4.addresses \" + msg.payload;\nnode.status({ text: cmd });\nreturn { payload: cmd };","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":1200,"y":100,"wires":[["97d657d4bcaaee60"]]},{"id":"df881f4fabea98a9","type":"change","z":"e9b76b6839013e00","name":"set","rules":[{"t":"set","p":"payload","pt":"msg","to":"<h2>New setting stored</h2> ","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1510,"y":80,"wires":[["a7ea0de86726a0a5"]]},{"id":"a7ea0de86726a0a5","type":"ui_toast","z":"e9b76b6839013e00","position":"top right","displayTime":"3","highlight":"","sendall":true,"outputs":0,"ok":"OK","cancel":"","raw":true,"className":"","topic":"","name":"","x":1690,"y":80,"wires":[]},{"id":"23af03939537f319","type":"function","z":"d2dbc81a58b6f72c","g":"49fa3c13452e364d","name":"Command = 0x1000","func":"global.set(\"Command\", 0x1000);\n\nreturn msg;","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":700,"y":200,"wires":[["bb363c91075f0ba6"]]},{"id":"61c5a95bce99d031","type":"function","z":"d2dbc81a58b6f72c","g":"49fa3c13452e364d","name":"Value=H310 / H314","func":"let setValue = 0;\nlet H318 = global.get(\"H318\");\nlet H320 = global.get(\"H320\");\n\n// Goto 1 / 2\nif(msg.payload==1) {\n    let H310 = global.get(\"H310\");\n    if(H310<H318) {\n        H310 = H318;\n    }\n    if(H310>H320) {\n        H310 = H320;\n    }\n    setValue = Math.round(H310 * global.get(\"myHorizRatio\"));\n} else {\n    let H314 = global.get(\"H314\");\n    if(H314<H318) {\n        H314 = H318;\n    }\n    if(H314>H320) {\n        H314 = H320;\n    }\n    setValue = Math.round(H314 * global.get(\"myHorizRatio\"));\n}\n\nif(setValue < 0) {\n    setValue = 65535 + setValue + 1;\n}\n\nreturn { payload: setValue};\n","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":510,"y":260,"wires":[["19f0705ab06b7a96"]]},{"id":"bb363c91075f0ba6","type":"link out","z":"d2dbc81a58b6f72c","g":"49fa3c13452e364d","name":"link out 37","mode":"link","links":["767f8aaf1be33f76"],"x":865,"y":200,"wires":[]},{"id":"715ffcc4ea0f3d5c","type":"delay","z":"d2dbc81a58b6f72c","g":"49fa3c13452e364d","name":"","pauseType":"delay","timeout":"250","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":490,"y":200,"wires":[["23af03939537f319"]]},{"id":"4b7e7c46b002910f","type":"function","z":"d2dbc81a58b6f72c","g":"49fa3c13452e364d","name":"Command = 0x2000","func":"global.set(\"Command\", 0x2000);\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":700,"y":320,"wires":[["87e51857550d2499"]]},{"id":"bcc94dcaf135b892","type":"function","z":"d2dbc81a58b6f72c","g":"49fa3c13452e364d","name":"Value=H312 / H316","func":"let setValue = 0;\nlet H322 = global.get(\"H322\");\nlet H324 = global.get(\"H324\");\n\nif(msg.payload==1) {\n    let H312 = global.get(\"H312\");\n    if(H312<H322) {\n        H312=H322;\n    }\n    if(H312>H324) {\n        H312=H324;\n    }\n    setValue = Math.round(H312 * global.get(\"myVertRatio\"));\n} else {\n    let H316 = global.get(\"H316\");\n    if(H316<H322) {\n        H316=H322;\n    }\n    if(H316>H324) {\n        H316=H324;\n    }\n    setValue = Math.round(H316 * global.get(\"myVertRatio\"));\n}\n\nif (setValue < 0) {\n    setValue = 65535 + setValue + 1;\n}\n\nreturn { payload: Math.round(setValue) };","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":510,"y":380,"wires":[["bcac5efc59b31124"]]},{"id":"87e51857550d2499","type":"link out","z":"d2dbc81a58b6f72c","g":"49fa3c13452e364d","name":"link out 38","mode":"link","links":["767f8aaf1be33f76"],"x":855,"y":320,"wires":[]},{"id":"830d5cdb1c43c7e4","type":"delay","z":"d2dbc81a58b6f72c","g":"49fa3c13452e364d","name":"","pauseType":"delay","timeout":"250","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":490,"y":320,"wires":[["4b7e7c46b002910f"]]},{"id":"b0fc30a2f928cd7a","type":"link in","z":"d2dbc81a58b6f72c","g":"49fa3c13452e364d","name":"link in Home 1","links":["c1c433f75bb3084e"],"x":155,"y":120,"wires":[["54b94afb32cad43c","715ffcc4ea0f3d5c","61c5a95bce99d031"]]},{"id":"54b94afb32cad43c","type":"delay","z":"d2dbc81a58b6f72c","g":"49fa3c13452e364d","name":"","pauseType":"delay","timeout":"1","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":220,"y":280,"wires":[["830d5cdb1c43c7e4","bcc94dcaf135b892"]]},{"id":"d9e743664a04ac92","type":"inject","z":"d2dbc81a58b6f72c","g":"b352b384e82cd839","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"1","crontab":"","once":true,"onceDelay":"5","topic":"","payload":"","payloadType":"date","x":230,"y":600,"wires":[["de4f91c407d1fc60"]]},{"id":"de4f91c407d1fc60","type":"function","z":"d2dbc81a58b6f72c","g":"b352b384e82cd839","name":"Handle State machine for Sweep","func":"let regW = global.get(\"regW\");\nlet HorPos = global.get(\"Horizontal_pos_act\");\nlet VertPos = global.get(\"Vertical_pos_act\");\nlet HorLimitNeg = global.get(\"H302\");\nlet HorLimitPos = global.get(\"H304\");\nlet VertLimitNeg = global.get(\"H306\");\nlet VertLimitPos = global.get(\"H308\");\nlet H318 = global.get(\"H318\");\nlet H320 = global.get(\"H320\");\nlet H322 = global.get(\"H322\");\nlet H324 = global.get(\"H324\");\nlet regWChanged = false;\nlet HState = global.get(\"HState\");\nlet VState = global.get(\"VState\");\n\n// Adjust limits to Allowed Sector...\nif(HorLimitNeg<H318) {\n    HorLimitNeg=H318;\n}\nif(HorLimitPos>H320) {\n    HorLimitPos=H320;\n}\nif(VertLimitNeg<H322) {\n    VertLimitNeg=H322;\n}\nif(VertLimitPos>H324) {\n    VertLimitPos=H324;\n}\n\n// Hor. Sweep order?\nif ( ((regW.W0 & 0b00010000000) !== 0) && (!global.get(\"LimpModeHor\")) ) {\n\n    switch(HState) {\n        case 0:   // Order CW\n            regW.W105 |= 0x0004;\n            regW.W105 &= ~(0x0008);\n            regWChanged = true;\n            HState = 1;\n            break;\n\n        case 1:\n            if(HorPos >= HorLimitPos-1) {\n                regW.W105 &= ~(0x0004);\n                regW.W105 |= 0x0008;\n                regWChanged = true;\n                HState=2;\n            }\n            break;\n        case 2:\n            if (HorPos <= HorLimitNeg+1) {\n                regW.W105 &= ~(0x0008);\n                regW.W105 |= 0x0004;\n                regWChanged = true;\n                HState = 1;\n            }\n            break;\n        default:\n            HState=0;\n            regWChanged = true;\n            break;\n    }\n    if (regWChanged) {\n        global.set(\"HState\",HState);\n    }\n\n} else if(HState!==0) {\n    global.set(\"HState\", 0);\n}\n\n\n// Vert. Sweep order?\nif ( ((regW.W0 & 0b00100000000) !== 0) && (!global.get(\"LimpModeVert\")) ) {\n\n    switch (VState) {\n        case 0:   // Order CW\n            regW.W100 |= 0x0004;\n            regW.W100 &= ~(0x0008);\n            regWChanged = true;\n            VState = 1;\n            break;\n\n        case 1:\n            if (VertPos >= VertLimitPos - 1) {\n                regW.W100 &= ~(0x0004);\n                regW.W100 |= 0x0008;\n                regWChanged = true;\n                VState = 2;\n            }\n            break;\n        case 2:\n            if (VertPos <= VertLimitNeg + 1) {\n                regW.W100 &= ~(0x0008);\n                regW.W100 |= 0x0004;\n                regWChanged = true;\n                VState = 1;\n            }\n            break;\n        default:\n            VState = 0;\n            regWChanged = true;\n            break;\n    }\n    if (regWChanged) {\n        global.set(\"VState\", VState);\n    }\n\n} else if(VState!==0) {\n    global.set(\"VState\", 0);\n}\n\n\nif (regWChanged == true) {\n    global.set(\"regW\", regW);\n}\n\n/*\nlet debug = {};\n//debug[\"VertPos\"] = VertPos;\n//debug[\"VertLimitNeg\"] = VertLimitNeg;\n//debug[\"VertLimitPos\"] = VertLimitPos;\ndebug[\"HState\"] = HState;\ndebug[\"VState\"] = VState;\n*/\n\nreturn [\n    { payload: HState },\n    { payload: VState }\n//    { payload: debug }\n];","outputs":2,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":300,"y":700,"wires":[["0165ab3eba8146b0"],["f947fb4d04013019"]]},{"id":"73a69804ee3ceb11","type":"function","z":"d2dbc81a58b6f72c","g":"b352b384e82cd839","name":"Command = 0x1000","func":"global.set(\"Command\", 0x1000);\nlet HSpeedIndex = Math.round(global.get(\"Horizontal_speed\") / 10);\nlet myR60HorizLookup = global.get(\"myR60HorizLookup\");\n\nif(msg.payload !== 0) {\n    // Todo: Horizontal_speed factor\n    global.set(\"HorInput\", Math.round(myR60HorizLookup.table[HSpeedIndex] * 0x7FFF / 100));\n}\n\nreturn msg;","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":940,"y":600,"wires":[["aefdd6bbab165660","1d7fa8f567af5272"]]},{"id":"5201617e5993901a","type":"function","z":"d2dbc81a58b6f72c","g":"b352b384e82cd839","name":"Set Target pos Horz.","func":"let setValue = 0;\nlet H318 = global.get(\"H318\");\nlet H320 = global.get(\"H320\");\n\nif(msg.payload==1) {\n    let H304 = global.get(\"H304\");\n    if(H304<H318) {\n        H304=H318;\n    }\n    if(H304>H320) {\n        H304=H320;\n    }\n    setValue = Math.round(H304 * global.get(\"myHorizRatio\"));\n} else if (msg.payload == 2) {\n    let H302 = global.get(\"H302\");\n    if(H302<H318) {\n        H302=H318;\n    }\n    if(H302>H320) {\n        H302=H320;\n    }\n    setValue = Math.round(H302 * global.get(\"myHorizRatio\"));\n} else {\n    setValue = Math.round(global.get(\"Horizontal_pos_act\") * global.get(\"myHorizRatio\"));\n}\n\nif(setValue < 0) {\n    setValue = 65535 + setValue + 1;\n}\n\nreturn { payload: setValue};","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":760,"y":720,"wires":[["028b768c4231a766"]]},{"id":"aefdd6bbab165660","type":"link out","z":"d2dbc81a58b6f72c","g":"b352b384e82cd839","name":"link out 42","mode":"link","links":["767f8aaf1be33f76"],"x":1105,"y":600,"wires":[]},{"id":"2ebde25686ed2cf0","type":"delay","z":"d2dbc81a58b6f72c","g":"b352b384e82cd839","name":"","pauseType":"delay","timeout":"100","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":730,"y":600,"wires":[["73a69804ee3ceb11"]]},{"id":"0c8737b68d5f0476","type":"inject","z":"d2dbc81a58b6f72c","g":"b352b384e82cd839","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":true,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":230,"y":540,"wires":[["64f7604383a3a9a3"]]},{"id":"64f7604383a3a9a3","type":"change","z":"d2dbc81a58b6f72c","g":"b352b384e82cd839","name":"Set Init Flow States for State machine","rules":[{"t":"set","p":"HState","pt":"global","to":"0","tot":"num"},{"t":"set","p":"VState","pt":"global","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":530,"y":540,"wires":[[]]},{"id":"0165ab3eba8146b0","type":"rbe","z":"d2dbc81a58b6f72c","g":"b352b384e82cd839","name":"","func":"rbe","gap":"","start":"","inout":"out","septopics":true,"property":"payload","topi":"topic","x":570,"y":600,"wires":[["2ebde25686ed2cf0","5201617e5993901a"]]},{"id":"d86143f5cc9ad61f","type":"function","z":"d2dbc81a58b6f72c","g":"b352b384e82cd839","name":"Command = 0x2000","func":"global.set(\"Command\", 0x2000);\nlet VSpeedIndex = Math.round(global.get(\"Vertical_speed\") / 10);\nlet myR60VertLookup = global.get(\"myR60VertLookup\");\n\nif (msg.payload !== 0) {\n    global.set(\"VertInput\", Math.round(myR60VertLookup.table[VSpeedIndex] * 0x7FFF / 100));\n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":940,"y":800,"wires":[["3f1d876259dfbd13","a4fd1790552f815f"]]},{"id":"4cd2a9e73edc5b5f","type":"function","z":"d2dbc81a58b6f72c","g":"b352b384e82cd839","name":"Set Target pos Vert","func":"let setValue = 0;\nlet H322 = global.get(\"H322\");\nlet H324 = global.get(\"H324\");\n\nif(msg.payload==1) {\n    let H308 = global.get(\"H308\");\n    if(H308<H322) {\n        H308=H322;\n    }\n    if(H308>H324) {\n        H308=H324;\n    }\n    setValue = Math.round(H308 * global.get(\"myVertRatio\"));\n} else if (msg.payload == 2) {\n    let H306 = global.get(\"H306\");\n    if(H306<H322) {\n        H306=H322;\n    }\n    if(H306>H324) {\n        H306=H324;\n    }\n    setValue = Math.round(H306 * global.get(\"myVertRatio\"));\n} else {\n    setValue = Math.round(global.get(\"Vertical_pos_act\") * global.get(\"myVertRatio\"));\n}\n\nif(setValue < 0) {\n    setValue = 65535 + setValue + 1;\n}\n\nreturn { payload: setValue};","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":750,"y":920,"wires":[["8b27ad56e07adcf3"]]},{"id":"3f1d876259dfbd13","type":"link out","z":"d2dbc81a58b6f72c","g":"b352b384e82cd839","name":"link out 44","mode":"link","links":["767f8aaf1be33f76"],"x":1105,"y":800,"wires":[]},{"id":"3caa410f0e4f31cb","type":"delay","z":"d2dbc81a58b6f72c","g":"b352b384e82cd839","name":"","pauseType":"delay","timeout":"100","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":730,"y":800,"wires":[["d86143f5cc9ad61f"]]},{"id":"f947fb4d04013019","type":"rbe","z":"d2dbc81a58b6f72c","g":"b352b384e82cd839","name":"","func":"rbe","gap":"","start":"","inout":"out","septopics":true,"property":"payload","topi":"topic","x":570,"y":800,"wires":[["3caa410f0e4f31cb","4cd2a9e73edc5b5f"]]},{"id":"1d7fa8f567af5272","type":"delay","z":"d2dbc81a58b6f72c","g":"b352b384e82cd839","name":"","pauseType":"delay","timeout":"500","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":730,"y":660,"wires":[["88801acca232782a"]]},{"id":"88801acca232782a","type":"change","z":"d2dbc81a58b6f72c","g":"b352b384e82cd839","name":"","rules":[{"t":"set","p":"HorInput","pt":"global","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":930,"y":660,"wires":[[]]},{"id":"a4fd1790552f815f","type":"delay","z":"d2dbc81a58b6f72c","g":"b352b384e82cd839","name":"","pauseType":"delay","timeout":"500","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":730,"y":860,"wires":[["39bbbdbfb4a48c58"]]},{"id":"39bbbdbfb4a48c58","type":"change","z":"d2dbc81a58b6f72c","g":"b352b384e82cd839","name":"","rules":[{"t":"set","p":"VertInput","pt":"global","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":930,"y":860,"wires":[[]]},{"id":"19f0705ab06b7a96","type":"link out","z":"d2dbc81a58b6f72c","g":"49fa3c13452e364d","name":"link out HorizPosCounter","mode":"link","links":["83f1cc1bdff22594"],"x":655,"y":260,"wires":[]},{"id":"bcac5efc59b31124","type":"link out","z":"d2dbc81a58b6f72c","g":"49fa3c13452e364d","name":"link out VertPosCounter","mode":"link","links":["21ef1f1dabe04bb2"],"x":655,"y":380,"wires":[]},{"id":"028b768c4231a766","type":"link out","z":"d2dbc81a58b6f72c","g":"b352b384e82cd839","name":"link out HorizPosCounter","mode":"link","links":["83f1cc1bdff22594"],"x":915,"y":720,"wires":[]},{"id":"8b27ad56e07adcf3","type":"link out","z":"d2dbc81a58b6f72c","g":"b352b384e82cd839","name":"link out VertPosCounter","mode":"link","links":["21ef1f1dabe04bb2"],"x":895,"y":920,"wires":[]},{"id":"4054cf89b419b0f4","type":"ui_button","z":"d2dbc81a58b6f72c","g":"49fa3c13452e364d","name":"","group":"5ff70e0f4e7a65cc","order":5,"width":0,"height":0,"passthru":true,"label":"Goto Horizontal counter Pos","tooltip":"","color":"","bgcolor":"","className":"","icon":"","payload":"1","payloadType":"num","topic":"topic","topicType":"msg","x":260,"y":200,"wires":[["61c5a95bce99d031","715ffcc4ea0f3d5c"]]},{"id":"67d5fb115392ea07","type":"ui_button","z":"d2dbc81a58b6f72c","g":"49fa3c13452e364d","name":"","group":"5ff70e0f4e7a65cc","order":9,"width":0,"height":0,"passthru":true,"label":"Goto Vertical counter Pos","tooltip":"","color":"","bgcolor":"","className":"","icon":"","payload":"1","payloadType":"num","topic":"topic","topicType":"msg","x":270,"y":320,"wires":[["bcc94dcaf135b892","830d5cdb1c43c7e4"]]},{"id":"328908909b833374","type":"comment","z":"1bf2db867fa90a88","name":"Reset/Calibrate State machine","info":"0 - Standby\n1 - Start - Set Init_On (W15.00 - Init_Active)\n\n2 - Kjør Vertical 100% - (CW)\n3 - Se etter \"VerticalEndStopCW\"\n4 - Wait\n5 - SetVertCounter = H116:H117 (DWORD)\n6 - Set Actual heading\n7 - Kjør Vertical 100% - (CCW)\n8 - Se etter -5 grader\n9 - Kjør Vertical 30% - (CCW)\n10 - Se etter 0 grader\n\n2 - Kjør Horiz 100% - (CCW)\n3 - Se etter \"HorizEndStopCCW\"\n4 - Wait\n5 - SetHorizCounter = H114:H115 (DWORD)\n6 - Set Actual heading\n7 - Kjør Horiz 100% - (CCW)\n8 - Se etter 5 grader\n9 - Kjør Horiz 30% - (CCW)\n10 - Se etter 0 grader\n\n2 - Kjør Fokus Neg.\n3 - Se etter \"FokusEndStopNeg\"\n2 - Kjør Fokus Pos.\n3 - Se etter \"FokusEndStopPos\"\n2 - Kjør Fokus Neg. x sek.\n\nx - Clear Init_On (W15.00 - Init_Active)\n\n- Timeout TBD.","x":160,"y":40,"wires":[]},{"id":"44a748f2a0c6f48a","type":"link in","z":"1bf2db867fa90a88","name":"link in Reset","links":["a7b1a9cba31ca8db"],"x":625,"y":100,"wires":[["874cf1817d36c02f"]]},{"id":"874cf1817d36c02f","type":"function","z":"1bf2db867fa90a88","name":"Set W15.00, Clear Init Errors","func":"if (msg.payload == true) {\n    let regW = global.get(\"regW\");\n    if ((regW.W15 & 0b0000000000000001)==0) {\n        \n        // Set Init running\n        regW.W15 |= 0b0000000000000001;\n\n        // Clear all Init Error flags\n        regW.W31 &= ~(0b01111100);\n\n        global.set(\"regW\", regW);\n        return {payload: false};\n    }\n}\n\n","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":890,"y":100,"wires":[["5300c28fa54ac5ed","3331d187d5fe3b3e","428447ccd8ab7731"]]},{"id":"5300c28fa54ac5ed","type":"link out","z":"1bf2db867fa90a88","name":"link out 5","mode":"link","links":["785ae8c5d002b12d"],"x":1085,"y":180,"wires":[]},{"id":"3331d187d5fe3b3e","type":"function","z":"1bf2db867fa90a88","name":"Handle \"Init Active\"","func":"let regW = global.get(\"regW\");\nreturn {payload: (regW.W15&0b0000000000000001?true:false)};","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":1310,"y":100,"wires":[["758c5ca5126b018c"]]},{"id":"0fa1395d8cad095c","type":"function","z":"1bf2db867fa90a88","name":"Clear W15.00","func":"let regW = global.get(\"regW\");\nregW.W15 &= ~(0b0000000000000001);\nglobal.set(\"regW\",regW);\nreturn {payload:false}\n","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":840,"y":60,"wires":[["3331d187d5fe3b3e"]]},{"id":"418eb6dabf3544ed","type":"inject","z":"1bf2db867fa90a88","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":true,"onceDelay":"2","topic":"","payload":"Standby","payloadType":"str","x":140,"y":100,"wires":[["96aec0bd10166831"]]},{"id":"085be12661d7b485","type":"function","z":"1bf2db867fa90a88","g":"bf211c3a96a53c94","name":"Vertical 100% (CW)","func":"global.set(\"VertInput\", 32766);\nlet myTimeout = flow.get(\"myTimeout\");\nmyTimeout = myTimeout - 200;\nflow.set(\"myTimeout\", myTimeout);\n\nreturn {payload: myTimeout};","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":750,"y":360,"wires":[["15d3d9784dc286bc","a160791941aa8aa6"]]},{"id":"15d3d9784dc286bc","type":"link out","z":"1bf2db867fa90a88","g":"bf211c3a96a53c94","name":"link out 6","mode":"link","links":["767f8aaf1be33f76"],"x":1345,"y":360,"wires":[]},{"id":"8ca34c79d9702964","type":"function","z":"1bf2db867fa90a88","g":"bf211c3a96a53c94","name":"Stop Vertical","func":"global.set(\"VertInput\",0);\nflow.set(\"myTimeout\", 0);\n//return {payload:true}\nreturn {payload:1}","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":1270,"y":500,"wires":[["15d3d9784dc286bc","97d38ca2d4e2510b"]]},{"id":"7bdb9538db131314","type":"delay","z":"1bf2db867fa90a88","g":"bf211c3a96a53c94","name":"","pauseType":"delay","timeout":"200","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":1270,"y":420,"wires":[["085be12661d7b485"]]},{"id":"a160791941aa8aa6","type":"switch","z":"1bf2db867fa90a88","g":"bf211c3a96a53c94","name":"myTimeout?","property":"myTimeout","propertyType":"flow","rules":[{"t":"gt","v":"0","vt":"num"},{"t":"lte","v":"0","vt":"num"}],"checkall":"true","repair":false,"outputs":2,"x":770,"y":440,"wires":[["2a949cd2c4a18a98"],["0d76d7da04f1d219"]]},{"id":"2a949cd2c4a18a98","type":"switch","z":"1bf2db867fa90a88","g":"bf211c3a96a53c94","name":"SLStatus.endStopVertCW?","property":"SLStatus.endStopVertCW","propertyType":"global","rules":[{"t":"false"},{"t":"true"}],"checkall":"true","repair":false,"outputs":2,"x":1040,"y":440,"wires":[["7bdb9538db131314"],["8ca34c79d9702964"]]},{"id":"31dab7b657757ae2","type":"function","z":"1bf2db867fa90a88","g":"1b367e1c6e762837","name":"Command = 0x8000","func":"global.set(\"Command\", 0x8000);\nlet setVerticalCounter = global.get(\"myVerticalInitValue\");\nglobal.set(\"setVerticalCounter\", setVerticalCounter);\nreturn { payload: Math.round(setVerticalCounter) & 0xFFFF };","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":760,"y":620,"wires":[["b6457177e5e2cb6c","38a9b0640c52b3db"]]},{"id":"81d956aa84d8f23a","type":"link out","z":"1bf2db867fa90a88","g":"1b367e1c6e762837","name":"link out 7","mode":"link","links":["767f8aaf1be33f76"],"x":855,"y":720,"wires":[]},{"id":"b6457177e5e2cb6c","type":"delay","z":"1bf2db867fa90a88","g":"1b367e1c6e762837","name":"","pauseType":"delay","timeout":"250","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":730,"y":680,"wires":[["81d956aa84d8f23a","0aa5f2b0dcfc5c62"]]},{"id":"0aa5f2b0dcfc5c62","type":"delay","z":"1bf2db867fa90a88","g":"1b367e1c6e762837","name":"","pauseType":"delay","timeout":"250","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":910,"y":680,"wires":[["64f749329ba140c9"]]},{"id":"64f749329ba140c9","type":"function","z":"1bf2db867fa90a88","g":"1b367e1c6e762837","name":"Calibrate Heading","func":"let Ratio = global.get(\"myVertRatio\");\nlet setVerticalCounter = global.get(\"setVerticalCounter\");\nlet result = 0;\n\nresult = setVerticalCounter / Ratio;\n\nif (!Number.isNaN(result)) {\n\n    global.set(\"Vertical_pos_act\",result);\n\n}\n\nreturn {payload: result}","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1110,"y":680,"wires":[["6a702c1d534c56e3","dc2d0a9aacfe0c5d"]]},{"id":"6a702c1d534c56e3","type":"link out","z":"1bf2db867fa90a88","g":"1b367e1c6e762837","name":"link out 8","mode":"link","links":["34d601203a1fb526"],"x":1255,"y":680,"wires":[]},{"id":"dc2d0a9aacfe0c5d","type":"delay","z":"1bf2db867fa90a88","g":"1b367e1c6e762837","name":"","pauseType":"delay","timeout":"500","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":1310,"y":740,"wires":[["ac1c86bc3a55b0b6"]]},{"id":"aab91a42aee0211b","type":"function","z":"1bf2db867fa90a88","g":"9c116711da37882f","name":"Horizontal 100% (CCW)","func":"global.set(\"HorInput\", (~(0x7FFF)+1) & 0xFFFF);\nlet myTimeout = flow.get(\"myTimeout\");\nmyTimeout = myTimeout - 200;\nflow.set(\"myTimeout\", myTimeout);\n\nreturn { payload: myTimeout };","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":770,"y":1180,"wires":[["1ceffebc9470b44d","c11ce10a8b29113a"]]},{"id":"0204d67770ee94a9","type":"function","z":"1bf2db867fa90a88","g":"9c116711da37882f","name":"Stop Horiz","func":"global.set(\"HorInput\",0);\nflow.set(\"myTimeoutII\", 0);\n//return {payload:true}\nreturn {payload:1}","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":1170,"y":1340,"wires":[["1ceffebc9470b44d","9e075221a17b3e65"]]},{"id":"ef48e913eda34001","type":"delay","z":"1bf2db867fa90a88","g":"9c116711da37882f","name":"","pauseType":"delay","timeout":"200","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":1250,"y":1240,"wires":[["aab91a42aee0211b"]]},{"id":"d12c473c0d3b9762","type":"switch","z":"1bf2db867fa90a88","g":"9c116711da37882f","name":"SLStatus.endStopHorCCW?","property":"SLStatus.endStopHorCCW","propertyType":"global","rules":[{"t":"false"},{"t":"true"}],"checkall":"true","repair":false,"outputs":2,"x":1020,"y":1260,"wires":[["ef48e913eda34001"],["0204d67770ee94a9"]]},{"id":"6a3a126537aab26c","type":"function","z":"1bf2db867fa90a88","g":"b3faf7a5880f6195","name":"Command = 0x4000","func":"global.set(\"Command\", 0x4000);\nlet setHorizontalCounter = global.get(\"myHorizontalInitValue\");\nglobal.set(\"setHorizontalCounter\", setHorizontalCounter);\nreturn { payload: Math.round(setHorizontalCounter) & 0xFFFF };","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":760,"y":1440,"wires":[["749dcc3191ba2a8d","d6f9cfaef56beb34"]]},{"id":"bc43c369702c528e","type":"link out","z":"1bf2db867fa90a88","g":"b3faf7a5880f6195","name":"link out 9","mode":"link","links":["767f8aaf1be33f76"],"x":855,"y":1540,"wires":[]},{"id":"749dcc3191ba2a8d","type":"delay","z":"1bf2db867fa90a88","g":"b3faf7a5880f6195","name":"","pauseType":"delay","timeout":"250","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":730,"y":1500,"wires":[["bc43c369702c528e","8bc19da847148d1b"]]},{"id":"8bc19da847148d1b","type":"delay","z":"1bf2db867fa90a88","g":"b3faf7a5880f6195","name":"","pauseType":"delay","timeout":"250","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":910,"y":1500,"wires":[["758da18ab585440d"]]},{"id":"758da18ab585440d","type":"function","z":"1bf2db867fa90a88","g":"b3faf7a5880f6195","name":"Calibrate Heading","func":"let Ratio = global.get(\"myHorizRatio\");\nlet setHorizontalCounter = global.get(\"setHorizontalCounter\");\nlet result = 0;\n\nresult = setHorizontalCounter / Ratio;\n\nif (!Number.isNaN(result)) {\n\n    global.set(\"Horizontal_pos_act\",result);\n\n}\n\nreturn {payload: result}","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":1110,"y":1500,"wires":[["ad0aea1f48711b41","34c57ae98a1c6547"]]},{"id":"ad0aea1f48711b41","type":"link out","z":"1bf2db867fa90a88","g":"b3faf7a5880f6195","name":"link out 10","mode":"link","links":["32885a0d66a25f9d"],"x":1255,"y":1500,"wires":[]},{"id":"34c57ae98a1c6547","type":"delay","z":"1bf2db867fa90a88","g":"b3faf7a5880f6195","name":"","pauseType":"delay","timeout":"500","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":1210,"y":1560,"wires":[["7f85547b150814f3"]]},{"id":"96aec0bd10166831","type":"change","z":"1bf2db867fa90a88","name":"myResetState=0","rules":[{"t":"set","p":"myResetState","pt":"flow","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":330,"y":100,"wires":[["5058243616ea8f15","0fa1395d8cad095c"]]},{"id":"5058243616ea8f15","type":"switch","z":"1bf2db867fa90a88","name":"myResetState","property":"myResetState","propertyType":"flow","rules":[{"t":"nnull"},{"t":"eq","v":"0","vt":"num"},{"t":"eq","v":"1","vt":"num"},{"t":"eq","v":"2","vt":"num"},{"t":"eq","v":"3","vt":"num"},{"t":"eq","v":"4","vt":"num"},{"t":"eq","v":"5","vt":"num"},{"t":"eq","v":"6","vt":"num"},{"t":"eq","v":"7","vt":"num"},{"t":"eq","v":"8","vt":"num"},{"t":"eq","v":"9","vt":"num"}],"checkall":"true","repair":false,"outputs":11,"x":180,"y":640,"wires":[["8d99e8f495d9bcc0"],[],["63899168af84886c"],["31dab7b657757ae2"],["7a9f3d75cff060e8"],["8873cd7715923ccc"],["6a3a126537aab26c"],["8e9501282cb74835"],["3e77215ddbd74746"],["bf88378288bef8e5"],["b3a3185e7b31bf85"]]},{"id":"8d99e8f495d9bcc0","type":"function","z":"1bf2db867fa90a88","name":"Update State text","func":"let State = flow.get(\"myResetState\");\nlet StateMsg = \"...\";\n\nswitch(State) {\n    case 0: StateMsg = \"Standby...\";\n        break;\n    case 1: StateMsg = \"Drive to Vertical End Stop (CW)\";\n        break;\n    case 2: StateMsg = \"Reset Vertical Counter\";\n        break;\n    case 3: StateMsg = \"Return to 0\";\n        break;\n    case 4: StateMsg = \"Drive to Horizontal End Stop (CCW)\";\n        break;\n    case 5: StateMsg = \"Reset Horizontal Counter\";\n        break;\n    case 6: StateMsg = \"Return to 0\";\n        break;\n    case 7: StateMsg =  \"Drive to Focus End Out\";\n        break;\n    case 8: StateMsg = \"Drive to Focus End In\";\n        break;\n    case 9: StateMsg = \"Drive to Focus 50%\";\n        break;\n    default: StateMsg = \"...\";\n    break;\n}\n\nreturn { payload: StateMsg};","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":710,"y":260,"wires":[["740356443b07689b"]]},{"id":"63899168af84886c","type":"change","z":"1bf2db867fa90a88","name":"","rules":[{"t":"set","p":"myTimeout","pt":"flow","to":"20000","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":490,"y":320,"wires":[["085be12661d7b485"]]},{"id":"97d38ca2d4e2510b","type":"change","z":"1bf2db867fa90a88","name":"myResetState=2","rules":[{"t":"set","p":"myResetState","pt":"flow","to":"2","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":1530,"y":500,"wires":[["6ca6432b6a2c0301"]]},{"id":"6ca6432b6a2c0301","type":"link out","z":"1bf2db867fa90a88","name":"link out 12","mode":"link","links":["4c03d6837cb5e30f"],"x":1675,"y":500,"wires":[]},{"id":"4c03d6837cb5e30f","type":"link in","z":"1bf2db867fa90a88","name":"link in StateMachine","links":["6ca6432b6a2c0301","b2b91130f57cd72b","f43c8e780ac33050","ac6c8a5229e92521","c940db4da3eb465f","b05f35c272d1261f","29679f3025d1ef5e","875751ac86ad003c","2b1eafc99d3471bd","6110f7fca3b9e834"],"x":155,"y":360,"wires":[["5058243616ea8f15"]]},{"id":"fe771f1d8c1e12a2","type":"change","z":"1bf2db867fa90a88","name":"myResetState=1","rules":[{"t":"set","p":"myResetState","pt":"flow","to":"1","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":1310,"y":140,"wires":[["b2b91130f57cd72b"]]},{"id":"b2b91130f57cd72b","type":"link out","z":"1bf2db867fa90a88","name":"link out 13","mode":"link","links":["4c03d6837cb5e30f"],"x":1465,"y":140,"wires":[]},{"id":"ac1c86bc3a55b0b6","type":"change","z":"1bf2db867fa90a88","name":"myResetState=3","rules":[{"t":"set","p":"myResetState","pt":"flow","to":"3","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":1530,"y":740,"wires":[["f43c8e780ac33050"]]},{"id":"f43c8e780ac33050","type":"link out","z":"1bf2db867fa90a88","name":"link out 14","mode":"link","links":["4c03d6837cb5e30f"],"x":1675,"y":740,"wires":[]},{"id":"ba3b6063e1987b66","type":"inject","z":"1bf2db867fa90a88","name":"Reset","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"true","payloadType":"bool","x":530,"y":140,"wires":[["ca910cb754aa96a1"]]},{"id":"7a9f3d75cff060e8","type":"change","z":"1bf2db867fa90a88","name":"","rules":[{"t":"set","p":"myTimeout","pt":"flow","to":"20000","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":490,"y":780,"wires":[["307d4ad1e94243bb","6dd1e32fecc428bd"]]},{"id":"78aa97310b307bdc","type":"function","z":"1bf2db867fa90a88","g":"a6dda6644d170c83","name":"Vertical x% (CCW)","func":"let myVpos = global.get(\"Vertical_pos_act\");\nlet myTimeout = flow.get(\"myTimeout\");\n//let Vert_Speed = 35;\n\n//global.set(\"VertInput\", (~(Math.round((Vert_Speed * 0x7FFF / 100))) + 1) & 0xFFFF);\nmyTimeout = myTimeout - 200;\nflow.set(\"myTimeout\", myTimeout);\n\nreturn { payload: myTimeout };","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":830,"y":960,"wires":[["c9904abdf5614f9c"]]},{"id":"a765675e0b5acb00","type":"function","z":"1bf2db867fa90a88","g":"a6dda6644d170c83","name":"Stop Vertical","func":"global.set(\"VertInput\",0);\nflow.set(\"myTimeout\", 0);\nreturn {payload:true}","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1130,"y":1080,"wires":[["5c3e5c203ff08edb"]]},{"id":"3585ac7db134cd56","type":"delay","z":"1bf2db867fa90a88","g":"a6dda6644d170c83","name":"","pauseType":"delay","timeout":"200","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":1250,"y":900,"wires":[["78aa97310b307bdc"]]},{"id":"1df48fd17328b5ff","type":"switch","z":"1bf2db867fa90a88","g":"a6dda6644d170c83","name":"Vertical_pos_act<0?","property":"Vertical_pos_act","propertyType":"global","rules":[{"t":"lt","v":"-0.49","vt":"num"},{"t":"gte","v":"-0.49","vt":"num"}],"checkall":"true","repair":false,"outputs":2,"x":1020,"y":1020,"wires":[["3585ac7db134cd56"],["5c3e5c203ff08edb"]]},{"id":"c9904abdf5614f9c","type":"switch","z":"1bf2db867fa90a88","g":"a6dda6644d170c83","name":"myTimeout?","property":"myTimeout","propertyType":"flow","rules":[{"t":"gt","v":"0","vt":"num"},{"t":"lte","v":"0","vt":"num"}],"checkall":"true","repair":false,"outputs":2,"x":750,"y":1020,"wires":[["1df48fd17328b5ff"],["d230dd178d7236f6"]]},{"id":"0e285340fc611f24","type":"link in","z":"1bf2db867fa90a88","name":"link in Clear W15.00","links":["10c49ff9973d375d"],"x":625,"y":60,"wires":[["0fa1395d8cad095c"]]},{"id":"10c49ff9973d375d","type":"link out","z":"1bf2db867fa90a88","name":"link out Clear W15.00","mode":"link","links":["0e285340fc611f24"],"x":1635,"y":2860,"wires":[]},{"id":"8873cd7715923ccc","type":"change","z":"1bf2db867fa90a88","name":"","rules":[{"t":"set","p":"myTimeout","pt":"flow","to":"50000","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":490,"y":820,"wires":[["aab91a42aee0211b"]]},{"id":"1ceffebc9470b44d","type":"link out","z":"1bf2db867fa90a88","g":"9c116711da37882f","name":"link out 18","mode":"link","links":["767f8aaf1be33f76"],"x":1325,"y":1180,"wires":[]},{"id":"c11ce10a8b29113a","type":"switch","z":"1bf2db867fa90a88","g":"9c116711da37882f","name":"myTimeout?","property":"myTimeout","propertyType":"flow","rules":[{"t":"gt","v":"0","vt":"num"},{"t":"lte","v":"0","vt":"num"}],"checkall":"true","repair":false,"outputs":2,"x":730,"y":1260,"wires":[["d12c473c0d3b9762"],["a4b79894487aa1dc"]]},{"id":"f6a2f4a7cad302fb","type":"change","z":"1bf2db867fa90a88","name":"myResetState=4","rules":[{"t":"set","p":"myResetState","pt":"flow","to":"4","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":1550,"y":1080,"wires":[["ac6c8a5229e92521"]]},{"id":"ac6c8a5229e92521","type":"link out","z":"1bf2db867fa90a88","name":"link out 19","mode":"link","links":["4c03d6837cb5e30f"],"x":1675,"y":1080,"wires":[]},{"id":"9e075221a17b3e65","type":"change","z":"1bf2db867fa90a88","name":"myResetState=5","rules":[{"t":"set","p":"myResetState","pt":"flow","to":"5","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":1510,"y":1340,"wires":[["c940db4da3eb465f"]]},{"id":"c940db4da3eb465f","type":"link out","z":"1bf2db867fa90a88","name":"link out 20","mode":"link","links":["4c03d6837cb5e30f"],"x":1655,"y":1340,"wires":[]},{"id":"7f85547b150814f3","type":"change","z":"1bf2db867fa90a88","name":"myResetState=6","rules":[{"t":"set","p":"myResetState","pt":"flow","to":"6","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":1510,"y":1580,"wires":[["b05f35c272d1261f"]]},{"id":"b05f35c272d1261f","type":"link out","z":"1bf2db867fa90a88","name":"link out 21","mode":"link","links":["4c03d6837cb5e30f"],"x":1655,"y":1580,"wires":[]},{"id":"8e9501282cb74835","type":"change","z":"1bf2db867fa90a88","name":"","rules":[{"t":"set","p":"myTimeout","pt":"flow","to":"50000","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":490,"y":1660,"wires":[["5d0d34b6a4a5edcc","bfefb994801f08ac"]]},{"id":"982d341815cb6b8e","type":"change","z":"1bf2db867fa90a88","name":"myResetState=7","rules":[{"t":"set","p":"myResetState","pt":"flow","to":"7","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":1530,"y":1940,"wires":[["29679f3025d1ef5e"]]},{"id":"29679f3025d1ef5e","type":"link out","z":"1bf2db867fa90a88","name":"link out 24","mode":"link","links":["4c03d6837cb5e30f"],"x":1675,"y":1940,"wires":[]},{"id":"3c52eaf0b3466897","type":"function","z":"1bf2db867fa90a88","g":"c1f6e3626f8d7626","name":"Horizontal x% (CW)","func":"//let myHorPos = global.get(\"Horizontal_pos_act\");\nlet myTimeout = flow.get(\"myTimeout\");\n//let HorSpeed = 30;\n\n//global.set(\"HorInput\", Math.floor(HorSpeed * 0x7FFF / 100));\n\nmyTimeout = myTimeout - 200;\nflow.set(\"myTimeout\", myTimeout);\n\nreturn { payload: myTimeout };","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":770,"y":1820,"wires":[["403276ccaf0e8ff0"]]},{"id":"374433f255f01a65","type":"function","z":"1bf2db867fa90a88","g":"c1f6e3626f8d7626","name":"Stop Horiz","func":"global.set(\"HorInput\",0);\nreturn {payload:true}","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1210,"y":1960,"wires":[["982d341815cb6b8e"]]},{"id":"0c8ef268adb45e2f","type":"delay","z":"1bf2db867fa90a88","g":"c1f6e3626f8d7626","name":"","pauseType":"delay","timeout":"200","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":1170,"y":1760,"wires":[["3c52eaf0b3466897"]]},{"id":"3a0e6ab56cfce0a2","type":"switch","z":"1bf2db867fa90a88","g":"c1f6e3626f8d7626","name":"Horizontal_pos_act>0?","property":"Horizontal_pos_act","propertyType":"global","rules":[{"t":"lt","v":"-0.49","vt":"num"},{"t":"gte","v":"-0.49","vt":"num"}],"checkall":"true","repair":false,"outputs":2,"x":1010,"y":1860,"wires":[["0c8ef268adb45e2f"],["982d341815cb6b8e"]]},{"id":"403276ccaf0e8ff0","type":"switch","z":"1bf2db867fa90a88","g":"c1f6e3626f8d7626","name":"myTimeout?","property":"myTimeout","propertyType":"flow","rules":[{"t":"gt","v":"0","vt":"num"},{"t":"lte","v":"0","vt":"num"}],"checkall":"true","repair":false,"outputs":2,"x":750,"y":1900,"wires":[["3a0e6ab56cfce0a2"],["02b7d2c465a1fba8"]]},{"id":"5c3e5c203ff08edb","type":"delay","z":"1bf2db867fa90a88","g":"a6dda6644d170c83","name":"","pauseType":"delay","timeout":"250","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":1310,"y":1080,"wires":[["f6a2f4a7cad302fb"]]},{"id":"3e77215ddbd74746","type":"change","z":"1bf2db867fa90a88","name":"","rules":[{"t":"set","p":"myTimeout","pt":"flow","to":"15000","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":490,"y":2060,"wires":[["85c52af54aa1a6ea"]]},{"id":"1f494d59a3e1ef11","type":"change","z":"1bf2db867fa90a88","name":"myResetState=8","rules":[{"t":"set","p":"myResetState","pt":"flow","to":"8","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":1490,"y":2240,"wires":[["875751ac86ad003c"]]},{"id":"875751ac86ad003c","type":"link out","z":"1bf2db867fa90a88","name":"link out 28","mode":"link","links":["4c03d6837cb5e30f"],"x":1635,"y":2240,"wires":[]},{"id":"85c52af54aa1a6ea","type":"function","z":"1bf2db867fa90a88","g":"af908bacf1378db2","name":"Focus -100%","func":"let myTimeout = flow.get(\"myTimeout\");\nglobal.set(\"focusInput\", 1 & 0xFFFF);\n\nmyTimeout = myTimeout - 200;\nflow.set(\"myTimeout\", myTimeout);\n\nreturn { payload: myTimeout };","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":730,"y":2060,"wires":[["4a17aa992ce34303","ece980fb1ab7e973"]]},{"id":"33b506a6c1a7b45f","type":"function","z":"1bf2db867fa90a88","g":"af908bacf1378db2","name":"Stop Focus","func":"global.set(\"focusInput\", 0);\n//return {payload:true}\nreturn {payload:1}","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":1070,"y":2240,"wires":[["4a17aa992ce34303","e3bbf8a4a55d021c"]]},{"id":"f5d6144c0c07013c","type":"delay","z":"1bf2db867fa90a88","g":"af908bacf1378db2","name":"","pauseType":"delay","timeout":"200","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":1250,"y":2120,"wires":[["85c52af54aa1a6ea"]]},{"id":"8d1ffb4fd6bf0180","type":"switch","z":"1bf2db867fa90a88","g":"af908bacf1378db2","name":"Physical_input=0?","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"0","vt":"num"},{"t":"neq","v":"0","vt":"num"}],"checkall":"true","repair":false,"outputs":2,"x":1030,"y":2180,"wires":[["f5d6144c0c07013c"],["33b506a6c1a7b45f"]]},{"id":"4a17aa992ce34303","type":"link out","z":"1bf2db867fa90a88","g":"af908bacf1378db2","name":"link out 29","mode":"link","links":["767f8aaf1be33f76"],"x":1325,"y":2060,"wires":[]},{"id":"ece980fb1ab7e973","type":"switch","z":"1bf2db867fa90a88","g":"af908bacf1378db2","name":"myTimeout?","property":"myTimeout","propertyType":"flow","rules":[{"t":"gt","v":"0","vt":"num"},{"t":"lte","v":"0","vt":"num"}],"checkall":"true","repair":false,"outputs":2,"x":730,"y":2180,"wires":[["a7c91e46b0913bfb"],["d3a76658f7c0bee6"]]},{"id":"bf88378288bef8e5","type":"change","z":"1bf2db867fa90a88","name":"","rules":[{"t":"set","p":"myTimeout","pt":"flow","to":"15000","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":490,"y":2320,"wires":[["74a0ac2e72d8e615"]]},{"id":"fede654efc1f376b","type":"change","z":"1bf2db867fa90a88","name":"myResetState=9","rules":[{"t":"set","p":"myResetState","pt":"flow","to":"9","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":1490,"y":2520,"wires":[["2b1eafc99d3471bd"]]},{"id":"2b1eafc99d3471bd","type":"link out","z":"1bf2db867fa90a88","name":"link out 30","mode":"link","links":["4c03d6837cb5e30f"],"x":1635,"y":2520,"wires":[]},{"id":"74a0ac2e72d8e615","type":"function","z":"1bf2db867fa90a88","g":"7ae20847982ca1d3","name":"Focus -100%","func":"let myTimeout = flow.get(\"myTimeout\");\nglobal.set(\"focusInput\", -1);\n\nmyTimeout = myTimeout - 200;\nflow.set(\"myTimeout\", myTimeout);\n\nreturn { payload: myTimeout };","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":730,"y":2340,"wires":[["a641e7f58c0cbc43","8c9b79429770e2d4"]]},{"id":"38a998e78e93eeba","type":"function","z":"1bf2db867fa90a88","g":"7ae20847982ca1d3","name":"Stop Focus","func":"global.set(\"focusInput\", 0);\n//return {payload:true}\nreturn {payload:1}","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":1070,"y":2520,"wires":[["a641e7f58c0cbc43","2beedbfeb4f2f53a"]]},{"id":"1f031c24ff1fd113","type":"delay","z":"1bf2db867fa90a88","g":"7ae20847982ca1d3","name":"","pauseType":"delay","timeout":"200","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":1250,"y":2400,"wires":[["74a0ac2e72d8e615"]]},{"id":"a641e7f58c0cbc43","type":"link out","z":"1bf2db867fa90a88","g":"7ae20847982ca1d3","name":"link out 31","mode":"link","links":["767f8aaf1be33f76"],"x":1325,"y":2340,"wires":[]},{"id":"8c9b79429770e2d4","type":"switch","z":"1bf2db867fa90a88","g":"7ae20847982ca1d3","name":"myTimeout?","property":"myTimeout","propertyType":"flow","rules":[{"t":"gt","v":"0","vt":"num"},{"t":"lte","v":"0","vt":"num"}],"checkall":"true","repair":false,"outputs":2,"x":730,"y":2420,"wires":[["1e0fd7d93ddee310"],["2d0bc4c2631406b5"]]},{"id":"b3a3185e7b31bf85","type":"change","z":"1bf2db867fa90a88","name":"","rules":[{"t":"set","p":"myTimeout","pt":"flow","to":"5000","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":490,"y":2600,"wires":[["4be5940e88346c7e"]]},{"id":"7f6923fa8eaabe62","type":"change","z":"1bf2db867fa90a88","name":"myResetState=0","rules":[{"t":"set","p":"myResetState","pt":"flow","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":1490,"y":2780,"wires":[["6110f7fca3b9e834"]]},{"id":"6110f7fca3b9e834","type":"link out","z":"1bf2db867fa90a88","name":"link out 32","mode":"link","links":["4c03d6837cb5e30f"],"x":1635,"y":2780,"wires":[]},{"id":"4be5940e88346c7e","type":"function","z":"1bf2db867fa90a88","g":"5ac5e6e38e0af80f","name":"Focus -100%","func":"let myTimeout = flow.get(\"myTimeout\");\nglobal.set(\"focusInput\", 1);\n\nmyTimeout = myTimeout - 200;\nflow.set(\"myTimeout\", myTimeout);\n\nreturn { payload: myTimeout };","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":730,"y":2620,"wires":[["039507982c21ad7a","126e3b7b72df9204"]]},{"id":"5ed90eb1b70bd6f0","type":"function","z":"1bf2db867fa90a88","g":"5ac5e6e38e0af80f","name":"Stop Focus","func":"global.set(\"focusInput\", 0);\n//return {payload:true}\nreturn {payload:1}","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":1070,"y":2780,"wires":[["039507982c21ad7a","aa02fa42cbf9f51c"]]},{"id":"bef2bf962b240e0f","type":"delay","z":"1bf2db867fa90a88","g":"5ac5e6e38e0af80f","name":"","pauseType":"delay","timeout":"200","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":1070,"y":2680,"wires":[["4be5940e88346c7e"]]},{"id":"039507982c21ad7a","type":"link out","z":"1bf2db867fa90a88","g":"5ac5e6e38e0af80f","name":"link out 33","mode":"link","links":["767f8aaf1be33f76"],"x":1325,"y":2620,"wires":[]},{"id":"126e3b7b72df9204","type":"switch","z":"1bf2db867fa90a88","g":"5ac5e6e38e0af80f","name":"myTimeout?","property":"myTimeout","propertyType":"flow","rules":[{"t":"gt","v":"0","vt":"num"},{"t":"lte","v":"0","vt":"num"}],"checkall":"true","repair":false,"outputs":2,"x":730,"y":2700,"wires":[["bef2bf962b240e0f"],["5ed90eb1b70bd6f0"]]},{"id":"a7c91e46b0913bfb","type":"function","z":"1bf2db867fa90a88","g":"af908bacf1378db2","name":"Mask Physical_input Focus End Out","func":"let myPi = global.get(\"Physical_input\");\nreturn {payload: ((myPi&0x0010)==0 ? 1 : 0)};\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":950,"y":2120,"wires":[["8d1ffb4fd6bf0180"]]},{"id":"1e0fd7d93ddee310","type":"function","z":"1bf2db867fa90a88","g":"7ae20847982ca1d3","name":"Mask Physical_input Focus End In","func":"let myPi = global.get(\"Physical_input\");\nreturn {payload: ((myPi&0x0020)==0 ? 1 : 0)};\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":960,"y":2400,"wires":[["d90314293e7ff0e3"]]},{"id":"d90314293e7ff0e3","type":"switch","z":"1bf2db867fa90a88","g":"7ae20847982ca1d3","name":"Physical_input=0?","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"0","vt":"num"},{"t":"neq","v":"0","vt":"num"}],"checkall":"true","repair":false,"outputs":2,"x":1030,"y":2460,"wires":[["1f031c24ff1fd113"],["38a998e78e93eeba"]]},{"id":"e3bbf8a4a55d021c","type":"delay","z":"1bf2db867fa90a88","g":"af908bacf1378db2","name":"","pauseType":"delay","timeout":"2","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":1240,"y":2240,"wires":[["1f494d59a3e1ef11"]]},{"id":"2beedbfeb4f2f53a","type":"delay","z":"1bf2db867fa90a88","g":"7ae20847982ca1d3","name":"","pauseType":"delay","timeout":"2","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":1240,"y":2520,"wires":[["fede654efc1f376b"]]},{"id":"9347d2e7d1c4d8d2","type":"function","z":"1bf2db867fa90a88","g":"a6dda6644d170c83","name":"Command = 0x2000","func":"global.set(\"Command\", 0x2000);\nreturn msg;\n","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":940,"y":840,"wires":[["0f1d856e18d1302f","78aa97310b307bdc"]]},{"id":"307d4ad1e94243bb","type":"function","z":"1bf2db867fa90a88","g":"a6dda6644d170c83","name":"Value=0","func":"let setValue = Math.round(0 * global.get(\"myVertRatio\"));\n\nif (setValue < 0) {\n    setValue = 65535 + setValue + 1;\n}\n\nreturn { payload: Math.round(setValue) };","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":720,"y":900,"wires":[["6465015e58c642e7"]]},{"id":"0f1d856e18d1302f","type":"link out","z":"1bf2db867fa90a88","g":"a6dda6644d170c83","name":"link out 39","mode":"link","links":["767f8aaf1be33f76"],"x":1115,"y":840,"wires":[]},{"id":"6dd1e32fecc428bd","type":"delay","z":"1bf2db867fa90a88","g":"a6dda6644d170c83","name":"","pauseType":"delay","timeout":"250","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":730,"y":840,"wires":[["9347d2e7d1c4d8d2"]]},{"id":"bc6a04d28790fd17","type":"function","z":"1bf2db867fa90a88","g":"c1f6e3626f8d7626","name":"Command = 0x1000","func":"global.set(\"Command\", 0x1000);\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1080,"y":1680,"wires":[["395c29b5fd8075d8","3c52eaf0b3466897"]]},{"id":"bfefb994801f08ac","type":"function","z":"1bf2db867fa90a88","g":"c1f6e3626f8d7626","name":"Value=0","func":"let setValue = Math.round(0 * global.get(\"myHorizRatio\"));\n\nif(setValue < 0) {\n    setValue = 65535 + setValue + 1;\n}\n\nreturn { payload: setValue};\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":720,"y":1740,"wires":[["f1ac2345f0efabad"]]},{"id":"395c29b5fd8075d8","type":"link out","z":"1bf2db867fa90a88","g":"c1f6e3626f8d7626","name":"link out 40","mode":"link","links":["767f8aaf1be33f76"],"x":1245,"y":1680,"wires":[]},{"id":"5d0d34b6a4a5edcc","type":"delay","z":"1bf2db867fa90a88","g":"c1f6e3626f8d7626","name":"","pauseType":"delay","timeout":"250","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":730,"y":1680,"wires":[["bc6a04d28790fd17"]]},{"id":"0d76d7da04f1d219","type":"function","z":"1bf2db867fa90a88","g":"bf211c3a96a53c94","name":"W31.03 - Init Error Vertical","func":"let regW = global.get(\"regW\");\nregW.W31 |= 0b1000;\nglobal.set(\"regW\", regW);\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":820,"y":500,"wires":[["8ca34c79d9702964","1ee6780f9ee3a5f9"]]},{"id":"d230dd178d7236f6","type":"function","z":"1bf2db867fa90a88","g":"a6dda6644d170c83","name":"W31.03 - Init Error Vertical","func":"let regW = global.get(\"regW\");\nregW.W31 |= 0b1000;\nglobal.set(\"regW\", regW);\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":900,"y":1080,"wires":[["a765675e0b5acb00"]]},{"id":"a4b79894487aa1dc","type":"function","z":"1bf2db867fa90a88","g":"9c116711da37882f","name":"W31.04 - Init Error Horizontal","func":"let regW = global.get(\"regW\");\nregW.W31 |= 0b10000;\nglobal.set(\"regW\", regW);\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":820,"y":1340,"wires":[["0204d67770ee94a9","d9fc80567eacb9e3"]]},{"id":"02b7d2c465a1fba8","type":"function","z":"1bf2db867fa90a88","g":"c1f6e3626f8d7626","name":"W31.04 - Init Error Horizontal","func":"let regW = global.get(\"regW\");\nregW.W31 |= 0b101000;\nglobal.set(\"regW\", regW);\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":960,"y":1960,"wires":[["374433f255f01a65"]]},{"id":"d3a76658f7c0bee6","type":"function","z":"1bf2db867fa90a88","g":"af908bacf1378db2","name":"Set W31.05 - Init Error Focus Pos.","func":"let regW = global.get(\"regW\");\nregW.W31 |= 0b100000;\nglobal.set(\"regW\", regW);\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":800,"y":2240,"wires":[["33b506a6c1a7b45f","2667e535ac03fcfc"]]},{"id":"2d0bc4c2631406b5","type":"function","z":"1bf2db867fa90a88","g":"7ae20847982ca1d3","name":"Set W31.06 - Init Error Focus Neg.","func":"let regW = global.get(\"regW\");\nregW.W31 |= 0b1000000;\nglobal.set(\"regW\", regW);\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":800,"y":2520,"wires":[["38a998e78e93eeba","b0739134a75ee4f0"]]},{"id":"1ee6780f9ee3a5f9","type":"link out","z":"1bf2db867fa90a88","g":"bf211c3a96a53c94","name":"link out 45","mode":"link","links":["785ae8c5d002b12d"],"x":1045,"y":480,"wires":[]},{"id":"d9fc80567eacb9e3","type":"link out","z":"1bf2db867fa90a88","g":"9c116711da37882f","name":"link out 46","mode":"link","links":["785ae8c5d002b12d"],"x":1025,"y":1300,"wires":[]},{"id":"2667e535ac03fcfc","type":"link out","z":"1bf2db867fa90a88","g":"af908bacf1378db2","name":"link out 47","mode":"link","links":["785ae8c5d002b12d"],"x":1195,"y":2180,"wires":[]},{"id":"b0739134a75ee4f0","type":"link out","z":"1bf2db867fa90a88","g":"7ae20847982ca1d3","name":"link out 48","mode":"link","links":["785ae8c5d002b12d"],"x":1195,"y":2460,"wires":[]},{"id":"28e5a0ed92dc14ff","type":"subflow:9e702f4d4b057300","z":"1bf2db867fa90a88","name":"Lamp handler","x":1300,"y":200,"wires":[]},{"id":"428447ccd8ab7731","type":"function","z":"1bf2db867fa90a88","name":"Lamp On?","func":"\nreturn [\n    { payload: true },\n    { payload: (global.get(\"LampOnOff\")==3?true:false) }\n]","outputs":2,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1110,"y":140,"wires":[["fe771f1d8c1e12a2"],["28e5a0ed92dc14ff"]]},{"id":"cea6b186efea6412","type":"function","z":"1bf2db867fa90a88","name":"Report Init Error?","func":"let regW = global.get(\"regW\");\n\nif(regW.W31&0b01111000) {\n    regW.W31 |= 0b100;  // Set Init Error\n    global.set(\"regW\",regW);\n}\n\nreturn msg;","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":1490,"y":2860,"wires":[["10c49ff9973d375d","0e6588c5448b8a10"]]},{"id":"0e6588c5448b8a10","type":"link out","z":"1bf2db867fa90a88","name":"link out 53","mode":"link","links":["13a43e121be8adee"],"x":1635,"y":2920,"wires":[]},{"id":"38a9b0640c52b3db","type":"link out","z":"1bf2db867fa90a88","g":"1b367e1c6e762837","name":"link out VertPosCounter","mode":"link","links":["21ef1f1dabe04bb2"],"x":915,"y":620,"wires":[]},{"id":"6465015e58c642e7","type":"link out","z":"1bf2db867fa90a88","g":"a6dda6644d170c83","name":"link out VertPosCounter","mode":"link","links":["21ef1f1dabe04bb2"],"x":835,"y":900,"wires":[]},{"id":"d6f9cfaef56beb34","type":"link out","z":"1bf2db867fa90a88","g":"b3faf7a5880f6195","name":"link out HorizPosCounter","mode":"link","links":["83f1cc1bdff22594"],"x":915,"y":1440,"wires":[]},{"id":"f1ac2345f0efabad","type":"link out","z":"1bf2db867fa90a88","g":"c1f6e3626f8d7626","name":"link out HorizPosCounter","mode":"link","links":["83f1cc1bdff22594"],"x":835,"y":1740,"wires":[]},{"id":"aa02fa42cbf9f51c","type":"delay","z":"1bf2db867fa90a88","g":"5ac5e6e38e0af80f","name":"","pauseType":"delay","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":1260,"y":2780,"wires":[["7f6923fa8eaabe62","cea6b186efea6412"]]},{"id":"ca910cb754aa96a1","type":"ui_button","z":"1bf2db867fa90a88","name":"","group":"c663dac55eb75a60","order":3,"width":0,"height":0,"passthru":true,"label":"Reset","tooltip":"","color":"","bgcolor":"","className":"","icon":"reset","payload":"true","payloadType":"bool","topic":"topic","topicType":"msg","x":660,"y":140,"wires":[["874cf1817d36c02f"]]},{"id":"740356443b07689b","type":"ui_text","z":"1bf2db867fa90a88","group":"c663dac55eb75a60","order":2,"width":0,"height":0,"name":"","label":"State","format":"{{msg.payload}}","layout":"row-spread","className":"","style":false,"font":"","fontSize":"","color":"#000000","x":890,"y":260,"wires":[]},{"id":"758c5ca5126b018c","type":"ui_led","z":"1bf2db867fa90a88","order":1,"group":"c663dac55eb75a60","width":0,"height":0,"label":"Init Active","labelPlacement":"left","labelAlignment":"left","colorForValue":[{"color":"#9e9e9e","value":"false","valueType":"bool"},{"color":"#00800f","value":"true","valueType":"bool"}],"allowColorForValueInMessage":false,"shape":"circle","showGlow":true,"name":"","x":1490,"y":100,"wires":[]},{"id":"53d00d533a16bcac","type":"comment","z":"7bf98e21ded32b47","name":"Update On Lamp Hours","info":"","x":160,"y":80,"wires":[]},{"id":"e7e5577fe1f7f06c","type":"inject","z":"7bf98e21ded32b47","name":"Timer 1/3600 hours","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"1","crontab":"","once":true,"onceDelay":"1","topic":"","payload":"0.000278","payloadType":"num","x":160,"y":140,"wires":[["f5da750ee02c1320"]]},{"id":"f5da750ee02c1320","type":"switch","z":"7bf98e21ded32b47","name":"","property":"LampOnOff","propertyType":"global","rules":[{"t":"eq","v":"3","vt":"num"}],"checkall":"true","repair":false,"outputs":1,"x":350,"y":140,"wires":[["1227e58055ce6673"]]},{"id":"1227e58055ce6673","type":"function","z":"7bf98e21ded32b47","name":"Update myHoursOfUseLamp","func":"let myHoursOfUseLamp = global.get(\"myHoursOfUseLamp\");\nmyHoursOfUseLamp = myHoursOfUseLamp + msg.payload;\nglobal.set(\"myHoursOfUseLamp\", myHoursOfUseLamp);\n\nreturn { payload: myHoursOfUseLamp};","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":560,"y":140,"wires":[["02f925b6bcc2a96e","4fa4cfe00cc9c3a8"]]},{"id":"4fa4cfe00cc9c3a8","type":"switch","z":"7bf98e21ded32b47","name":"Check for Alarm Hour Limit Lamp","property":"payload","propertyType":"msg","rules":[{"t":"gt","v":"myAlarmLimitLamp","vt":"global"},{"t":"lte","v":"myAlarmLimitLamp","vt":"global"}],"checkall":"true","repair":false,"outputs":2,"x":860,"y":200,"wires":[["350fb1e74a878a92"],["94f2e7cb0d7f583e"]]},{"id":"350fb1e74a878a92","type":"function","z":"7bf98e21ded32b47","name":"Trigger Alarm W32.01","func":"let regW = global.get(\"regW\");\nif((regW.W32 & 0b0010) == 0) {\n    regW.W32 |= 0b0010;\n    global.set(\"regW\",regW);\n    return {payload: regW};\n}","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1140,"y":180,"wires":[["73b3cb15e4523091"]]},{"id":"94f2e7cb0d7f583e","type":"function","z":"7bf98e21ded32b47","name":"Clear Alarm W32.01","func":"let regW = global.get(\"regW\");\nif((regW.W32 & 0b0010) != 0) {\n    regW.W32 &= ~(0b0010);\n    global.set(\"regW\",regW);\n    return { payload: regW };\n}","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1140,"y":220,"wires":[["73b3cb15e4523091"]]},{"id":"73b3cb15e4523091","type":"link out","z":"7bf98e21ded32b47","name":"link out 36","mode":"link","links":["13a43e121be8adee"],"x":1305,"y":200,"wires":[]},{"id":"02f925b6bcc2a96e","type":"set-shared-state","z":"7bf98e21ded32b47","state":"a380e10a93bb06f6","name":"myHoursOfUseLamp","triggerOnInit":true,"triggerOnChange":true,"provideOutput":false,"outputs":0,"x":820,"y":140,"wires":[]},{"id":"d10bd6e49b821351","type":"trigger","z":"51bbad0878cd8966","name":"","op1":"","op2":"true","op1type":"nul","op2type":"bool","duration":"5","extend":true,"overrideDelay":false,"units":"min","reset":"","bytopic":"all","topic":"topic","outputs":1,"x":370,"y":140,"wires":[["b48eb779e09f0a4e","3c00c902fc06bdcb"]]},{"id":"845b9bcd371de79d","type":"link out","z":"51bbad0878cd8966","name":"link out RESET","mode":"link","links":["40f2c56e24879dc9"],"x":675,"y":140,"wires":[]},{"id":"5e41b789c5e169e6","type":"comment","z":"51bbad0878cd8966","name":"Simple Watchdog that run a reset of system if no UPD packets recived for tigger timer.","info":"Note that it not activated before a packet is recived (only detect lost of data packets...)","x":360,"y":80,"wires":[]},{"id":"2eb517afeb6b1164","type":"link in","z":"51bbad0878cd8966","name":"link in kick the WATCHDOG","links":["f0c0ecb1f63900c0","11cd94d3ecd36897"],"x":245,"y":140,"wires":[["d10bd6e49b821351"]]},{"id":"3c00c902fc06bdcb","type":"delay","z":"51bbad0878cd8966","name":"","pauseType":"delay","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":560,"y":140,"wires":[["845b9bcd371de79d"]]},{"id":"b48eb779e09f0a4e","type":"function","z":"51bbad0878cd8966","name":"Log","func":"return { topic: \"warn\", payload: \"Watchdog Triggered - Reset Raspberry Pi in 5 sec.\"};","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":550,"y":200,"wires":[["2be1b6c19240f617"]]},{"id":"2be1b6c19240f617","type":"subflow:190714efd60a5f96","z":"51bbad0878cd8966","name":"","x":710,"y":200,"wires":[]}]